2025-06-04 10:20:13,228 - __main__ - INFO - Starting duplicate signal test...
2025-06-04 10:20:13,235 - __main__ - INFO - Connecting to TWS...
2025-06-04 10:20:13,235 - src.tws_connection - INFO - Connecting to TWS at 127.0.0.1:7497
2025-06-04 10:20:13,237 - src.tws_connection - INFO - Connection thread: Connecting to 127.0.0.1:7497 (client ID: 1)
2025-06-04 10:20:14,824 - ibapi.client - INFO - sent startApi
2025-06-04 10:20:14,824 - ibapi.client - INFO - REQUEST startApi {}
2025-06-04 10:20:14,825 - ibapi.client - INFO - SENDING startApi b'\x00\x00\x00\x0871\x002\x001\x00\x00'
2025-06-04 10:20:14,844 - ibapi.client - INFO - REQUEST startApi {}
2025-06-04 10:20:14,845 - ibapi.client - INFO - SENDING startApi b'\x00\x00\x00\x0871\x002\x001\x00\x00'
2025-06-04 10:20:14,845 - src.tws_connection - INFO - Connection thread: Socket connected, starting message loop
2025-06-04 10:20:14,866 - src.tws_connection - INFO - Requesting additional order IDs from TWS
2025-06-04 10:20:14,867 - ibapi.client - INFO - REQUEST reqIds {'numIds': 50}
2025-06-04 10:20:14,867 - ibapi.client - INFO - SENDING reqIds b'\x00\x00\x00\x078\x001\x0050\x00'
2025-06-04 10:20:14,884 - src.order.manager - INFO - OrderManager callbacks set up with TWSConnection
2025-06-04 10:20:14,884 - src.position.tracker - INFO - PositionTracker async initialization completed
2025-06-04 10:20:14,884 - src.rule.linked_order_actions - INFO - LinkedOrderConclusionManager initialized - monitoring for position conclusions
2025-06-04 10:20:14,885 - LinkedDoubleDownFillManager - INFO - LinkedDoubleDownFillManager initialized
2025-06-04 10:20:14,885 - src.rule.engine - INFO - Rule engine started
2025-06-04 10:20:14,885 - __main__ - INFO - 
================================================================================
2025-06-04 10:20:14,885 - __main__ - INFO - TEST 1: FIRST BUY SIGNAL (should create position)
2025-06-04 10:20:14,886 - __main__ - INFO - ================================================================================
2025-06-04 10:20:14,886 - ibapi.client - INFO - REQUEST reqMktData {'reqId': 1000, 'contract': 1383166742544: 0,SLV,STK,,0.0,,,SMART,,USD,,,False,,combo:, 'genericTickList': '', 'snapshot': False, 'regulatorySnapshot': False, 'mktDataOptions': []}
2025-06-04 10:20:14,886 - ibapi.client - INFO - SENDING reqMktData b'\x00\x00\x0001\x0011\x001000\x000\x00SLV\x00STK\x00\x000.0\x00\x00\x00SMART\x00\x00USD\x00\x00\x000\x00\x000\x000\x00\x00'
2025-06-04 10:20:15,008 - ibapi.wrapper - INFO - ANSWER tickReqParams {'tickerId': 1000, 'minTick': 0.01, 'bboExchange': 'a60001', 'snapshotPermissions': 3}
2025-06-04 10:20:15,008 - ibapi.wrapper - INFO - ANSWER marketDataType {'reqId': 1000, 'marketDataType': 1}
2025-06-04 10:20:15,009 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1000, 'tickType': 1, 'price': 31.38, 'attrib': 1383166743552: CanAutoExecute: 1, PastLimit: 0, PreOpen: 0}
2025-06-04 10:20:15,009 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1000, 'tickType': 0, 'size': 194}
2025-06-04 10:20:15,009 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1000, 'tickType': 2, 'price': 31.39, 'attrib': 1383165372816: CanAutoExecute: 1, PastLimit: 0, PreOpen: 0}
2025-06-04 10:20:15,010 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1000, 'tickType': 3, 'size': 3270}
2025-06-04 10:20:15,010 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1000, 'tickType': 4, 'price': 31.39, 'attrib': 1383165372816: CanAutoExecute: 0, PastLimit: 0, PreOpen: 0}
2025-06-04 10:20:15,010 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1000, 'tickType': 5, 'size': 10}
2025-06-04 10:20:15,010 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1000, 'tickType': 0, 'size': 194}
2025-06-04 10:20:15,011 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1000, 'tickType': 3, 'size': 3270}
2025-06-04 10:20:15,011 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1000, 'tickType': 5, 'size': 10}
2025-06-04 10:20:15,011 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1000, 'tickType': 8, 'size': 57139}
2025-06-04 10:20:15,012 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1000, 'tickType': 6, 'price': 31.43, 'attrib': 1383165276416: CanAutoExecute: 0, PastLimit: 0, PreOpen: 0}
2025-06-04 10:20:15,012 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1000, 'tickType': 7, 'price': 31.25, 'attrib': 1383165276416: CanAutoExecute: 0, PastLimit: 0, PreOpen: 0}
2025-06-04 10:20:15,012 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1000, 'tickType': 9, 'price': 31.44, 'attrib': 1383165034032: CanAutoExecute: 0, PastLimit: 0, PreOpen: 0}
2025-06-04 10:20:15,013 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1000, 'tickType': 14, 'price': 31.32, 'attrib': 1383165854864: CanAutoExecute: 0, PastLimit: 0, PreOpen: 0}
2025-06-04 10:20:15,013 - ibapi.wrapper - INFO - ANSWER tickString {'reqId': 1000, 'tickType': 32, 'value': 'PTVU'}
2025-06-04 10:20:15,013 - ibapi.wrapper - INFO - ANSWER tickString {'reqId': 1000, 'tickType': 33, 'value': 'ABCNJKPTVXYZUH'}
2025-06-04 10:20:15,019 - ibapi.wrapper - INFO - ANSWER tickString {'reqId': 1000, 'tickType': 84, 'value': 'D'}
2025-06-04 10:20:15,028 - ibapi.wrapper - INFO - ANSWER tickString {'reqId': 1000, 'tickType': 45, 'value': '1749046811'}
2025-06-04 10:20:15,044 - ibapi.wrapper - INFO - ANSWER tickGeneric {'reqId': 1000, 'tickType': 49, 'value': 0.0}
2025-06-04 10:20:15,048 - ibapi.wrapper - INFO - ANSWER tickGeneric {'reqId': 1000, 'tickType': 49, 'value': 0.0}
2025-06-04 10:20:15,049 - ibapi.wrapper - INFO - ANSWER tickString {'reqId': 1000, 'tickType': 45, 'value': '1749046814'}
2025-06-04 10:20:15,049 - ibapi.wrapper - INFO - ANSWER tickGeneric {'reqId': 1000, 'tickType': 49, 'value': 0.0}
2025-06-04 10:20:15,049 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1000, 'tickType': 4, 'price': 31.38, 'attrib': 1383165854864: CanAutoExecute: 0, PastLimit: 0, PreOpen: 0}
2025-06-04 10:20:15,050 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1000, 'tickType': 5, 'size': 1}
2025-06-04 10:20:15,050 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1000, 'tickType': 5, 'size': 1}
2025-06-04 10:20:15,050 - ibapi.wrapper - INFO - ANSWER tickGeneric {'reqId': 1000, 'tickType': 49, 'value': 0.0}
2025-06-04 10:20:15,506 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1000, 'tickType': 0, 'size': 159}
2025-06-04 10:20:15,507 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1000, 'tickType': 3, 'size': 3273}
2025-06-04 10:20:15,507 - ibapi.wrapper - INFO - ANSWER tickString {'reqId': 1000, 'tickType': 32, 'value': 'PTU'}
2025-06-04 10:20:15,508 - ibapi.wrapper - INFO - ANSWER tickGeneric {'reqId': 1000, 'tickType': 49, 'value': 0.0}
2025-06-04 10:20:15,901 - ibapi.client - INFO - REQUEST cancelMktData {'reqId': 1000}
2025-06-04 10:20:15,901 - ibapi.client - INFO - SENDING cancelMktData b'\x00\x00\x00\t2\x002\x001000\x00'
2025-06-04 10:20:15,902 - src.position.sizer - INFO - BUY position size: 159 shares @ $31.38 = $4989.42 (99.8% of $5000.00 allocation)
2025-06-04 10:20:15,903 - src.order.base - INFO - Order f3fdb70c-9c40-408d-b16e-1950e163158a status changed: created -> pending_submit (Submitting to broker)
2025-06-04 10:20:15,903 - src.order.manager - INFO - Submitting order f3fdb70c-9c40-408d-b16e-1950e163158a to TWS
2025-06-04 10:20:15,903 - src.order.manager - INFO - Got broker order ID 41 for order f3fdb70c-9c40-408d-b16e-1950e163158a
2025-06-04 10:20:15,903 - src.order.manager - INFO - Calling placeOrder with ID 41, contract 0,SLV,STK,,0.0,,,SMART,,USD,,,False,,combo:, order 0,0,0: MKT BUY 159@0.000000 DAY
2025-06-04 10:20:15,903 - ibapi.client - INFO - REQUEST placeOrder {'orderId': 41, 'contract': 1383165373456: 0,SLV,STK,,0.0,,,SMART,,USD,,,False,,combo:, 'order': 1383166743552: 0,0,0: MKT BUY 159@0.000000 DAY}
2025-06-04 10:20:15,904 - ibapi.client - INFO - SENDING placeOrder b'\x00\x00\x01;3\x0041\x000\x00SLV\x00STK\x00\x000.0\x00\x00\x00SMART\x00\x00USD\x00\x00\x00\x00\x00BUY\x00159\x00MKT\x000\x000\x00DAY\x00\x00\x00\x000\x00\x001\x000\x000\x000\x000\x000\x000\x000\x00\x000\x00\x00\x00\x00\x00\x00\x00\x000\x00\x00-1\x000\x00\x00\x000\x00\x00\x000\x000\x00\x000\x00\x00\x00\x00\x00\x000\x00\x00\x00\x00\x000\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x000\x00\x00\x000\x000\x00\x00\x000\x00\x000\x000\x000\x000\x00\x001.7976931348623157e+308\x001.7976931348623157e+308\x001.7976931348623157e+308\x001.7976931348623157e+308\x001.7976931348623157e+308\x000\x00\x00\x00\x001.7976931348623157e+308\x00\x00\x00\x00\x000\x000\x000\x00\x00'
2025-06-04 10:20:15,904 - src.order.manager - INFO - placeOrder called successfully for order f3fdb70c-9c40-408d-b16e-1950e163158a
2025-06-04 10:20:15,904 - src.order.base - INFO - Order f3fdb70c-9c40-408d-b16e-1950e163158a status changed: pending_submit -> submitted (Submitted to broker)
2025-06-04 10:20:15,904 - src.rule.linked_order_actions - INFO - Created new order context for SLV BUY position
2025-06-04 10:20:15,905 - ibapi.client - INFO - REQUEST reqMktData {'reqId': 1001, 'contract': 1383165372816: 0,SLV,STK,,0.0,,,SMART,,USD,,,False,,combo:, 'genericTickList': '', 'snapshot': False, 'regulatorySnapshot': False, 'mktDataOptions': []}
2025-06-04 10:20:15,905 - ibapi.client - INFO - SENDING reqMktData b'\x00\x00\x0001\x0011\x001001\x000\x00SLV\x00STK\x00\x000.0\x00\x00\x00SMART\x00\x00USD\x00\x00\x000\x00\x000\x000\x00\x00'
2025-06-04 10:20:16,241 - src.tws_connection - INFO - Open Order - ID: 41, Symbol: SLV, Action: BUY, Quantity: 159.0
2025-06-04 10:20:16,302 - ibapi.wrapper - INFO - ANSWER tickReqParams {'tickerId': 1001, 'minTick': 0.01, 'bboExchange': 'a60001', 'snapshotPermissions': 3}
2025-06-04 10:20:16,303 - ibapi.wrapper - INFO - ANSWER marketDataType {'reqId': 1001, 'marketDataType': 1}
2025-06-04 10:20:16,304 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1001, 'tickType': 1, 'price': 31.38, 'attrib': 1383165530704: CanAutoExecute: 1, PastLimit: 0, PreOpen: 0}
2025-06-04 10:20:16,304 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1001, 'tickType': 0, 'size': 162}
2025-06-04 10:20:16,304 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1001, 'tickType': 2, 'price': 31.39, 'attrib': 1383165530704: CanAutoExecute: 1, PastLimit: 0, PreOpen: 0}
2025-06-04 10:20:16,305 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1001, 'tickType': 3, 'size': 3327}
2025-06-04 10:20:16,305 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1001, 'tickType': 4, 'price': 31.38, 'attrib': 1383165693056: CanAutoExecute: 0, PastLimit: 0, PreOpen: 0}
2025-06-04 10:20:16,305 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1001, 'tickType': 5, 'size': 20}
2025-06-04 10:20:16,305 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1001, 'tickType': 0, 'size': 162}
2025-06-04 10:20:16,306 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1001, 'tickType': 3, 'size': 3327}
2025-06-04 10:20:16,306 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1001, 'tickType': 5, 'size': 20}
2025-06-04 10:20:16,306 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1001, 'tickType': 8, 'size': 57185}
2025-06-04 10:20:16,307 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1001, 'tickType': 6, 'price': 31.43, 'attrib': 1383165693056: CanAutoExecute: 0, PastLimit: 0, PreOpen: 0}
2025-06-04 10:20:16,307 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1001, 'tickType': 7, 'price': 31.25, 'attrib': 1383165794512: CanAutoExecute: 0, PastLimit: 0, PreOpen: 0}
2025-06-04 10:20:16,307 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1001, 'tickType': 9, 'price': 31.44, 'attrib': 1383165794512: CanAutoExecute: 0, PastLimit: 0, PreOpen: 0}
2025-06-04 10:20:16,307 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1001, 'tickType': 14, 'price': 31.32, 'attrib': 1383167099376: CanAutoExecute: 0, PastLimit: 0, PreOpen: 0}
2025-06-04 10:20:16,308 - ibapi.wrapper - INFO - ANSWER tickString {'reqId': 1001, 'tickType': 32, 'value': 'PTVU'}
2025-06-04 10:20:16,308 - ibapi.wrapper - INFO - ANSWER tickString {'reqId': 1001, 'tickType': 33, 'value': 'ABCNJKPTVXYZUH'}
2025-06-04 10:20:16,308 - ibapi.wrapper - INFO - ANSWER tickString {'reqId': 1001, 'tickType': 84, 'value': 'V'}
2025-06-04 10:20:16,309 - ibapi.wrapper - INFO - ANSWER tickString {'reqId': 1001, 'tickType': 45, 'value': '1749046815'}
2025-06-04 10:20:16,309 - ibapi.wrapper - INFO - ANSWER tickGeneric {'reqId': 1001, 'tickType': 49, 'value': 0.0}
2025-06-04 10:20:16,402 - ibapi.client - INFO - REQUEST cancelMktData {'reqId': 1001}
2025-06-04 10:20:16,402 - ibapi.client - INFO - SENDING cancelMktData b'\x00\x00\x00\t2\x002\x001001\x00'
2025-06-04 10:20:16,402 - src.tws_connection - INFO - Open Order - ID: 41, Symbol: SLV, Action: BUY, Quantity: 159.0
2025-06-04 10:20:16,403 - src.rule.linked_order_actions - INFO - Percentage-based stop: SLV stop at $30.44 (3.0%)
2025-06-04 10:20:16,403 - src.order.base - INFO - Order d49d8c1d-de49-424b-9207-3a217c8bf99d status changed: created -> pending_submit (Submitting to broker)
2025-06-04 10:20:16,404 - src.order.manager - INFO - Submitting order d49d8c1d-de49-424b-9207-3a217c8bf99d to TWS
2025-06-04 10:20:16,404 - src.order.manager - INFO - Got broker order ID 42 for order d49d8c1d-de49-424b-9207-3a217c8bf99d
2025-06-04 10:20:16,404 - src.order.manager - INFO - Calling placeOrder with ID 42, contract 0,SLV,STK,,0.0,,,SMART,,USD,,,False,,combo:, order 0,0,0: STP SELL 159@0.000000 DAY
2025-06-04 10:20:16,404 - ibapi.client - INFO - REQUEST placeOrder {'orderId': 42, 'contract': 1383165854592: 0,SLV,STK,,0.0,,,SMART,,USD,,,False,,combo:, 'order': 1383165375696: 0,0,0: STP SELL 159@0.000000 DAY}
2025-06-04 10:20:16,405 - ibapi.client - INFO - SENDING placeOrder b'\x00\x00\x01@3\x0042\x000\x00SLV\x00STK\x00\x000.0\x00\x00\x00SMART\x00\x00USD\x00\x00\x00\x00\x00SELL\x00159\x00STP\x000\x0030.44\x00DAY\x00\x00\x00\x000\x00\x001\x000\x000\x000\x000\x000\x000\x000\x00\x000\x00\x00\x00\x00\x00\x00\x00\x000\x00\x00-1\x000\x00\x00\x000\x00\x00\x000\x000\x00\x000\x00\x00\x00\x00\x00\x000\x00\x00\x00\x00\x000\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x000\x00\x00\x000\x000\x00\x00\x000\x00\x000\x000\x000\x000\x00\x001.7976931348623157e+308\x001.7976931348623157e+308\x001.7976931348623157e+308\x001.7976931348623157e+308\x001.7976931348623157e+308\x000\x00\x00\x00\x001.7976931348623157e+308\x00\x00\x00\x00\x000\x000\x000\x00\x00'
2025-06-04 10:20:16,405 - src.order.manager - INFO - placeOrder called successfully for order d49d8c1d-de49-424b-9207-3a217c8bf99d
2025-06-04 10:20:16,405 - src.order.base - INFO - Order d49d8c1d-de49-424b-9207-3a217c8bf99d status changed: pending_submit -> submitted (Submitted to broker)
2025-06-04 10:20:16,406 - src.rule.linked_order_actions - INFO - Auto-created BUY stop loss d49d8c1d-de49-424b-9207-3a217c8bf99d at $30.44
2025-06-04 10:20:16,406 - src.rule.linked_order_actions - INFO - Percentage-based target: SLV target at $33.26 (6.0%)
2025-06-04 10:20:16,406 - src.order.base - INFO - Order f718b713-fbaa-452b-b7fe-da3c6b9075af status changed: created -> pending_submit (Submitting to broker)
2025-06-04 10:20:16,406 - src.order.manager - INFO - Submitting order f718b713-fbaa-452b-b7fe-da3c6b9075af to TWS
2025-06-04 10:20:16,407 - src.order.manager - INFO - Got broker order ID 43 for order f718b713-fbaa-452b-b7fe-da3c6b9075af
2025-06-04 10:20:16,407 - src.order.manager - INFO - Calling placeOrder with ID 43, contract 0,SLV,STK,,0.0,,,SMART,,USD,,,False,,combo:, order 0,0,0: LMT SELL 159@33.260000 DAY
2025-06-04 10:20:16,407 - ibapi.client - INFO - REQUEST placeOrder {'orderId': 43, 'contract': 1383165854864: 0,SLV,STK,,0.0,,,SMART,,USD,,,False,,combo:, 'order': 1383165376336: 0,0,0: LMT SELL 159@33.260000 DAY}
2025-06-04 10:20:16,407 - ibapi.client - INFO - SENDING placeOrder b'\x00\x00\x01@3\x0043\x000\x00SLV\x00STK\x00\x000.0\x00\x00\x00SMART\x00\x00USD\x00\x00\x00\x00\x00SELL\x00159\x00LMT\x0033.26\x000\x00DAY\x00\x00\x00\x000\x00\x001\x000\x000\x000\x000\x000\x000\x000\x00\x000\x00\x00\x00\x00\x00\x00\x00\x000\x00\x00-1\x000\x00\x00\x000\x00\x00\x000\x000\x00\x000\x00\x00\x00\x00\x00\x000\x00\x00\x00\x00\x000\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x000\x00\x00\x000\x000\x00\x00\x000\x00\x000\x000\x000\x000\x00\x001.7976931348623157e+308\x001.7976931348623157e+308\x001.7976931348623157e+308\x001.7976931348623157e+308\x001.7976931348623157e+308\x000\x00\x00\x00\x001.7976931348623157e+308\x00\x00\x00\x00\x000\x000\x000\x00\x00'
2025-06-04 10:20:16,408 - src.order.manager - INFO - placeOrder called successfully for order f718b713-fbaa-452b-b7fe-da3c6b9075af
2025-06-04 10:20:16,408 - src.order.base - INFO - Order f718b713-fbaa-452b-b7fe-da3c6b9075af status changed: pending_submit -> submitted (Submitted to broker)
2025-06-04 10:20:16,408 - src.rule.linked_order_actions - INFO - Auto-created BUY take profit f718b713-fbaa-452b-b7fe-da3c6b9075af at $33.26
2025-06-04 10:20:16,409 - src.rule.linked_order_actions - INFO - Starting double down order creation for SLV
2025-06-04 10:20:16,409 - src.order.base - INFO - Order f3fdb70c-9c40-408d-b16e-1950e163158a status changed: submitted -> filled (Order fully filled)
2025-06-04 10:20:16,409 - src.order.base - INFO - Order f3fdb70c-9c40-408d-b16e-1950e163158a filled: 159.0 @ 31.39 (159.0/159)
2025-06-04 10:20:16,436 - src.tws_connection - INFO - Open Order - ID: 41, Symbol: SLV, Action: BUY, Quantity: 159.0
2025-06-04 10:20:16,437 - ibapi.wrapper - INFO - ANSWER commissionReport {'commissionReport': 1383166744224: ExecId: 00025b49.68404955.01.01, Commission: 1.005565, Currency: USD, RealizedPnL: , Yield: , YieldRedemptionDate: 0}
2025-06-04 10:20:16,612 - src.tws_connection - INFO - Open Order - ID: 42, Symbol: SLV, Action: SELL, Quantity: 159.0
2025-06-04 10:20:16,613 - src.order.base - INFO - Order d49d8c1d-de49-424b-9207-3a217c8bf99d status changed: submitted -> accepted (IB status: PreSubmitted)
2025-06-04 10:20:16,735 - src.tws_connection - INFO - Open Order - ID: 43, Symbol: SLV, Action: SELL, Quantity: 159.0
2025-06-04 10:20:16,923 - src.rule.linked_order_actions - INFO - Found 1 stop orders for SLV: ['d49d8c1d-de49-424b-9207-3a217c8bf99d']
2025-06-04 10:20:16,923 - src.rule.linked_order_actions - INFO - Executing double down action for SLV
2025-06-04 10:20:16,924 - ibapi.client - INFO - REQUEST reqMktData {'reqId': 1002, 'contract': 1383165693056: 0,SLV,STK,,0.0,,,SMART,,USD,,,False,,combo:, 'genericTickList': '', 'snapshot': False, 'regulatorySnapshot': False, 'mktDataOptions': []}
2025-06-04 10:20:16,924 - ibapi.client - INFO - SENDING reqMktData b'\x00\x00\x0001\x0011\x001002\x000\x00SLV\x00STK\x00\x000.0\x00\x00\x00SMART\x00\x00USD\x00\x00\x000\x00\x000\x000\x00\x00'
2025-06-04 10:20:17,024 - ibapi.wrapper - INFO - ANSWER tickReqParams {'tickerId': 1002, 'minTick': 0.01, 'bboExchange': 'a60001', 'snapshotPermissions': 3}
2025-06-04 10:20:17,025 - ibapi.wrapper - INFO - ANSWER marketDataType {'reqId': 1002, 'marketDataType': 1}
2025-06-04 10:20:17,025 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1002, 'tickType': 1, 'price': 31.37, 'attrib': 1383165957456: CanAutoExecute: 1, PastLimit: 0, PreOpen: 0}
2025-06-04 10:20:17,026 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1002, 'tickType': 0, 'size': 701}
2025-06-04 10:20:17,026 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1002, 'tickType': 2, 'price': 31.38, 'attrib': 1383165957456: CanAutoExecute: 1, PastLimit: 0, PreOpen: 0}
2025-06-04 10:20:17,026 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1002, 'tickType': 3, 'size': 1692}
2025-06-04 10:20:17,027 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1002, 'tickType': 4, 'price': 31.38, 'attrib': 1383165472000: CanAutoExecute: 0, PastLimit: 0, PreOpen: 0}
2025-06-04 10:20:17,027 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1002, 'tickType': 5, 'size': 1}
2025-06-04 10:20:17,027 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1002, 'tickType': 0, 'size': 701}
2025-06-04 10:20:17,028 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1002, 'tickType': 3, 'size': 1692}
2025-06-04 10:20:17,028 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1002, 'tickType': 5, 'size': 1}
2025-06-04 10:20:17,028 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1002, 'tickType': 8, 'size': 57194}
2025-06-04 10:20:17,029 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1002, 'tickType': 6, 'price': 31.43, 'attrib': 1383165472000: CanAutoExecute: 0, PastLimit: 0, PreOpen: 0}
2025-06-04 10:20:17,030 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1002, 'tickType': 7, 'price': 31.25, 'attrib': 1383166006992: CanAutoExecute: 0, PastLimit: 0, PreOpen: 0}
2025-06-04 10:20:17,030 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1002, 'tickType': 9, 'price': 31.44, 'attrib': 1383166006992: CanAutoExecute: 0, PastLimit: 0, PreOpen: 0}
2025-06-04 10:20:17,030 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1002, 'tickType': 14, 'price': 31.32, 'attrib': 1383166561312: CanAutoExecute: 0, PastLimit: 0, PreOpen: 0}
2025-06-04 10:20:17,032 - ibapi.wrapper - INFO - ANSWER tickString {'reqId': 1002, 'tickType': 32, 'value': 'ANJKPTVZUH'}
2025-06-04 10:20:17,033 - ibapi.wrapper - INFO - ANSWER tickString {'reqId': 1002, 'tickType': 33, 'value': 'ACNJKPTYZUH'}
2025-06-04 10:20:17,033 - ibapi.wrapper - INFO - ANSWER tickString {'reqId': 1002, 'tickType': 84, 'value': 'P'}
2025-06-04 10:20:17,033 - ibapi.wrapper - INFO - ANSWER tickString {'reqId': 1002, 'tickType': 45, 'value': '1749046816'}
2025-06-04 10:20:17,035 - ibapi.wrapper - INFO - ANSWER tickGeneric {'reqId': 1002, 'tickType': 49, 'value': 0.0}
2025-06-04 10:20:17,120 - ibapi.wrapper - INFO - ANSWER tickGeneric {'reqId': 1002, 'tickType': 49, 'value': 0.0}
2025-06-04 10:20:17,372 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1002, 'tickType': 0, 'size': 521}
2025-06-04 10:20:17,372 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1002, 'tickType': 3, 'size': 1484}
2025-06-04 10:20:17,372 - ibapi.wrapper - INFO - ANSWER tickString {'reqId': 1002, 'tickType': 32, 'value': 'ANKPTVZUH'}
2025-06-04 10:20:17,373 - ibapi.wrapper - INFO - ANSWER tickString {'reqId': 1002, 'tickType': 33, 'value': 'ACNJKPTVYZUH'}
2025-06-04 10:20:17,897 - ibapi.client - INFO - REQUEST cancelMktData {'reqId': 1002}
2025-06-04 10:20:17,900 - ibapi.client - INFO - SENDING cancelMktData b'\x00\x00\x00\t2\x002\x001002\x00'
2025-06-04 10:20:17,908 - src.rule.linked_order_actions - INFO - Using ATR-based stop distance for SLV: 0.0814
2025-06-04 10:20:17,908 - src.rule.linked_order_actions - INFO - Double down calc for SLV (BUY): current=$31.38, stop_distance=$0.08, dd_distance=$0.04, dd_price=$31.34, original_qty=159, dd_qty=159
2025-06-04 10:20:17,909 - src.order.base - INFO - Order b93dcd5a-6c13-4da4-a1c2-cb959f252803 status changed: created -> pending_submit (Submitting to broker)
2025-06-04 10:20:17,909 - src.order.manager - INFO - Submitting order b93dcd5a-6c13-4da4-a1c2-cb959f252803 to TWS
2025-06-04 10:20:17,910 - src.order.manager - INFO - Got broker order ID 44 for order b93dcd5a-6c13-4da4-a1c2-cb959f252803
2025-06-04 10:20:17,910 - src.order.manager - INFO - Calling placeOrder with ID 44, contract 0,SLV,STK,,0.0,,,SMART,,USD,,,False,,combo:, order 0,0,0: LMT BUY 159@31.340000 DAY
2025-06-04 10:20:17,911 - ibapi.client - INFO - REQUEST placeOrder {'orderId': 44, 'contract': 1383165693056: 0,SLV,STK,,0.0,,,SMART,,USD,,,False,,combo:, 'order': 1383165374416: 0,0,0: LMT BUY 159@31.340000 DAY}
2025-06-04 10:20:17,911 - ibapi.client - INFO - SENDING placeOrder b'\x00\x00\x01?3\x0044\x000\x00SLV\x00STK\x00\x000.0\x00\x00\x00SMART\x00\x00USD\x00\x00\x00\x00\x00BUY\x00159\x00LMT\x0031.34\x000\x00DAY\x00\x00\x00\x000\x00\x001\x000\x000\x000\x000\x000\x000\x000\x00\x000\x00\x00\x00\x00\x00\x00\x00\x000\x00\x00-1\x000\x00\x00\x000\x00\x00\x000\x000\x00\x000\x00\x00\x00\x00\x00\x000\x00\x00\x00\x00\x000\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x000\x00\x00\x000\x000\x00\x00\x000\x00\x000\x000\x000\x000\x00\x001.7976931348623157e+308\x001.7976931348623157e+308\x001.7976931348623157e+308\x001.7976931348623157e+308\x001.7976931348623157e+308\x000\x00\x00\x00\x001.7976931348623157e+308\x00\x00\x00\x00\x000\x000\x000\x00\x00'
2025-06-04 10:20:17,915 - src.order.manager - INFO - placeOrder called successfully for order b93dcd5a-6c13-4da4-a1c2-cb959f252803
2025-06-04 10:20:17,920 - src.order.base - INFO - Order b93dcd5a-6c13-4da4-a1c2-cb959f252803 status changed: pending_submit -> submitted (Submitted to broker)
2025-06-04 10:20:17,920 - src.rule.linked_order_actions - INFO - Created BUY double down order 'doubledown1' for SLV: 159 shares @ $31.34
2025-06-04 10:20:17,920 - src.rule.linked_order_actions - INFO - Auto-created double down order for SLV
2025-06-04 10:20:17,921 - src.rule.linked_order_actions - INFO - Created and linked BUY main order f3fdb70c-9c40-408d-b16e-1950e163158a for SLV
2025-06-04 10:20:17,924 - __main__ - INFO - 
================================================================================
2025-06-04 10:20:17,924 - __main__ - INFO - TEST 2: SECOND BUY SIGNAL (should be ignored)
2025-06-04 10:20:17,924 - __main__ - INFO - ================================================================================
2025-06-04 10:20:17,925 - __main__ - INFO - Active orders before second signal: 3
2025-06-04 10:20:17,925 - ibapi.client - INFO - REQUEST reqMktData {'reqId': 1003, 'contract': 1383165693056: 0,SLV,STK,,0.0,,,SMART,,USD,,,False,,combo:, 'genericTickList': '', 'snapshot': False, 'regulatorySnapshot': False, 'mktDataOptions': []}
2025-06-04 10:20:17,926 - ibapi.client - INFO - SENDING reqMktData b'\x00\x00\x0001\x0011\x001003\x000\x00SLV\x00STK\x00\x000.0\x00\x00\x00SMART\x00\x00USD\x00\x00\x000\x00\x000\x000\x00\x00'
2025-06-04 10:20:18,099 - ibapi.wrapper - INFO - ANSWER tickReqParams {'tickerId': 1003, 'minTick': 0.01, 'bboExchange': 'a60001', 'snapshotPermissions': 3}
2025-06-04 10:20:18,100 - ibapi.wrapper - INFO - ANSWER marketDataType {'reqId': 1003, 'marketDataType': 1}
2025-06-04 10:20:18,100 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1003, 'tickType': 1, 'price': 31.37, 'attrib': 1383167091792: CanAutoExecute: 1, PastLimit: 0, PreOpen: 0}
2025-06-04 10:20:18,100 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1003, 'tickType': 0, 'size': 521}
2025-06-04 10:20:18,101 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1003, 'tickType': 2, 'price': 31.38, 'attrib': 1383167091792: CanAutoExecute: 1, PastLimit: 0, PreOpen: 0}
2025-06-04 10:20:18,101 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1003, 'tickType': 3, 'size': 1484}
2025-06-04 10:20:18,101 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1003, 'tickType': 4, 'price': 31.38, 'attrib': 1383166584304: CanAutoExecute: 0, PastLimit: 0, PreOpen: 0}
2025-06-04 10:20:18,101 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1003, 'tickType': 5, 'size': 1}
2025-06-04 10:20:18,102 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1003, 'tickType': 0, 'size': 521}
2025-06-04 10:20:18,102 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1003, 'tickType': 3, 'size': 1484}
2025-06-04 10:20:18,102 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1003, 'tickType': 5, 'size': 1}
2025-06-04 10:20:18,102 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1003, 'tickType': 8, 'size': 57194}
2025-06-04 10:20:18,103 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1003, 'tickType': 6, 'price': 31.43, 'attrib': 1383166584304: CanAutoExecute: 0, PastLimit: 0, PreOpen: 0}
2025-06-04 10:20:18,103 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1003, 'tickType': 7, 'price': 31.25, 'attrib': 1383167038704: CanAutoExecute: 0, PastLimit: 0, PreOpen: 0}
2025-06-04 10:20:18,103 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1003, 'tickType': 9, 'price': 31.44, 'attrib': 1383167038704: CanAutoExecute: 0, PastLimit: 0, PreOpen: 0}
2025-06-04 10:20:18,103 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1003, 'tickType': 14, 'price': 31.32, 'attrib': 1383167038704: CanAutoExecute: 0, PastLimit: 0, PreOpen: 0}
2025-06-04 10:20:18,103 - ibapi.wrapper - INFO - ANSWER tickString {'reqId': 1003, 'tickType': 32, 'value': 'ANKPTVZUH'}
2025-06-04 10:20:18,103 - ibapi.wrapper - INFO - ANSWER tickString {'reqId': 1003, 'tickType': 33, 'value': 'ACNJKPTVYZUH'}
2025-06-04 10:20:18,104 - ibapi.wrapper - INFO - ANSWER tickString {'reqId': 1003, 'tickType': 84, 'value': 'P'}
2025-06-04 10:20:18,104 - ibapi.wrapper - INFO - ANSWER tickString {'reqId': 1003, 'tickType': 45, 'value': '1749046816'}
2025-06-04 10:20:18,104 - ibapi.wrapper - INFO - ANSWER tickGeneric {'reqId': 1003, 'tickType': 49, 'value': 0.0}
2025-06-04 10:20:18,190 - ibapi.wrapper - INFO - ANSWER tickGeneric {'reqId': 1003, 'tickType': 49, 'value': 0.0}
2025-06-04 10:20:18,191 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1003, 'tickType': 0, 'size': 375}
2025-06-04 10:20:18,191 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1003, 'tickType': 3, 'size': 1879}
2025-06-04 10:20:18,192 - ibapi.wrapper - INFO - ANSWER tickString {'reqId': 1003, 'tickType': 32, 'value': 'NKPTVUH'}
2025-06-04 10:20:18,239 - src.tws_connection - INFO - Open Order - ID: 44, Symbol: SLV, Action: BUY, Quantity: 159.0
2025-06-04 10:20:18,242 - ibapi.client - INFO - REQUEST cancelMktData {'reqId': 1003}
2025-06-04 10:20:18,242 - ibapi.client - INFO - SENDING cancelMktData b'\x00\x00\x00\t2\x002\x001003\x00'
2025-06-04 10:20:18,243 - src.position.sizer - INFO - BUY position size: 159 shares @ $31.38 = $4989.42 (99.8% of $5000.00 allocation)
2025-06-04 10:20:18,243 - src.order.base - INFO - Order 98422267-b01e-44e2-8535-77fe5593bbfc status changed: created -> pending_submit (Submitting to broker)
2025-06-04 10:20:18,243 - src.order.manager - INFO - Submitting order 98422267-b01e-44e2-8535-77fe5593bbfc to TWS
2025-06-04 10:20:18,244 - src.order.manager - INFO - Got broker order ID 45 for order 98422267-b01e-44e2-8535-77fe5593bbfc
2025-06-04 10:20:18,244 - src.order.manager - INFO - Calling placeOrder with ID 45, contract 0,SLV,STK,,0.0,,,SMART,,USD,,,False,,combo:, order 0,0,0: MKT BUY 159@0.000000 DAY
2025-06-04 10:20:18,245 - ibapi.client - INFO - REQUEST placeOrder {'orderId': 45, 'contract': 1383165695696: 0,SLV,STK,,0.0,,,SMART,,USD,,,False,,combo:, 'order': 1383165376336: 0,0,0: MKT BUY 159@0.000000 DAY}
2025-06-04 10:20:18,245 - ibapi.client - INFO - SENDING placeOrder b'\x00\x00\x01;3\x0045\x000\x00SLV\x00STK\x00\x000.0\x00\x00\x00SMART\x00\x00USD\x00\x00\x00\x00\x00BUY\x00159\x00MKT\x000\x000\x00DAY\x00\x00\x00\x000\x00\x001\x000\x000\x000\x000\x000\x000\x000\x00\x000\x00\x00\x00\x00\x00\x00\x00\x000\x00\x00-1\x000\x00\x00\x000\x00\x00\x000\x000\x00\x000\x00\x00\x00\x00\x00\x000\x00\x00\x00\x00\x000\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x000\x00\x00\x000\x000\x00\x00\x000\x00\x000\x000\x000\x000\x00\x001.7976931348623157e+308\x001.7976931348623157e+308\x001.7976931348623157e+308\x001.7976931348623157e+308\x001.7976931348623157e+308\x000\x00\x00\x00\x001.7976931348623157e+308\x00\x00\x00\x00\x000\x000\x000\x00\x00'
2025-06-04 10:20:18,245 - src.order.manager - INFO - placeOrder called successfully for order 98422267-b01e-44e2-8535-77fe5593bbfc
2025-06-04 10:20:18,246 - src.order.base - INFO - Order 98422267-b01e-44e2-8535-77fe5593bbfc status changed: pending_submit -> submitted (Submitted to broker)
2025-06-04 10:20:18,246 - src.rule.linked_order_actions - INFO - Created new order context for SLV BUY position
2025-06-04 10:20:18,247 - ibapi.client - INFO - REQUEST reqMktData {'reqId': 1004, 'contract': 1383165695696: 0,SLV,STK,,0.0,,,SMART,,USD,,,False,,combo:, 'genericTickList': '', 'snapshot': False, 'regulatorySnapshot': False, 'mktDataOptions': []}
2025-06-04 10:20:18,249 - ibapi.client - INFO - SENDING reqMktData b'\x00\x00\x0001\x0011\x001004\x000\x00SLV\x00STK\x00\x000.0\x00\x00\x00SMART\x00\x00USD\x00\x00\x000\x00\x000\x000\x00\x00'
2025-06-04 10:20:18,491 - src.tws_connection - INFO - Open Order - ID: 45, Symbol: SLV, Action: BUY, Quantity: 159.0
2025-06-04 10:20:18,560 - src.tws_connection - INFO - Open Order - ID: 45, Symbol: SLV, Action: BUY, Quantity: 159.0
2025-06-04 10:20:18,562 - ibapi.wrapper - INFO - ANSWER tickReqParams {'tickerId': 1004, 'minTick': 0.01, 'bboExchange': 'a60001', 'snapshotPermissions': 3}
2025-06-04 10:20:18,562 - ibapi.wrapper - INFO - ANSWER marketDataType {'reqId': 1004, 'marketDataType': 1}
2025-06-04 10:20:18,563 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1004, 'tickType': 1, 'price': 31.37, 'attrib': 1383167249584: CanAutoExecute: 1, PastLimit: 0, PreOpen: 0}
2025-06-04 10:20:18,563 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1004, 'tickType': 0, 'size': 375}
2025-06-04 10:20:18,563 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1004, 'tickType': 2, 'price': 31.38, 'attrib': 1383167249584: CanAutoExecute: 1, PastLimit: 0, PreOpen: 0}
2025-06-04 10:20:18,563 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1004, 'tickType': 3, 'size': 1879}
2025-06-04 10:20:18,563 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1004, 'tickType': 4, 'price': 31.38, 'attrib': 1383167249584: CanAutoExecute: 0, PastLimit: 0, PreOpen: 0}
2025-06-04 10:20:18,563 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1004, 'tickType': 5, 'size': 1}
2025-06-04 10:20:18,564 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1004, 'tickType': 0, 'size': 375}
2025-06-04 10:20:18,566 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1004, 'tickType': 3, 'size': 1879}
2025-06-04 10:20:18,566 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1004, 'tickType': 5, 'size': 1}
2025-06-04 10:20:18,567 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1004, 'tickType': 8, 'size': 57194}
2025-06-04 10:20:18,567 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1004, 'tickType': 6, 'price': 31.43, 'attrib': 1383167249584: CanAutoExecute: 0, PastLimit: 0, PreOpen: 0}
2025-06-04 10:20:18,568 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1004, 'tickType': 7, 'price': 31.25, 'attrib': 1383167249584: CanAutoExecute: 0, PastLimit: 0, PreOpen: 0}
2025-06-04 10:20:18,568 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1004, 'tickType': 9, 'price': 31.44, 'attrib': 1383167249584: CanAutoExecute: 0, PastLimit: 0, PreOpen: 0}
2025-06-04 10:20:18,568 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1004, 'tickType': 14, 'price': 31.32, 'attrib': 1383167249584: CanAutoExecute: 0, PastLimit: 0, PreOpen: 0}
2025-06-04 10:20:18,568 - ibapi.wrapper - INFO - ANSWER tickString {'reqId': 1004, 'tickType': 32, 'value': 'NKPTVUH'}
2025-06-04 10:20:18,569 - ibapi.wrapper - INFO - ANSWER tickString {'reqId': 1004, 'tickType': 33, 'value': 'ACNJKPTVYZUH'}
2025-06-04 10:20:18,569 - ibapi.wrapper - INFO - ANSWER tickString {'reqId': 1004, 'tickType': 84, 'value': 'P'}
2025-06-04 10:20:18,569 - ibapi.wrapper - INFO - ANSWER tickString {'reqId': 1004, 'tickType': 45, 'value': '1749046816'}
2025-06-04 10:20:18,569 - ibapi.wrapper - INFO - ANSWER tickGeneric {'reqId': 1004, 'tickType': 49, 'value': 0.0}
2025-06-04 10:20:18,569 - ibapi.wrapper - INFO - ANSWER tickGeneric {'reqId': 1004, 'tickType': 49, 'value': 0.0}
2025-06-04 10:20:18,933 - ibapi.client - INFO - REQUEST cancelMktData {'reqId': 1004}
2025-06-04 10:20:18,935 - ibapi.client - INFO - SENDING cancelMktData b'\x00\x00\x00\t2\x002\x001004\x00'
2025-06-04 10:20:18,936 - src.rule.linked_order_actions - INFO - Percentage-based stop: SLV stop at $30.44 (3.0%)
2025-06-04 10:20:18,937 - src.order.base - INFO - Order 2725fc1e-b2b6-48d3-ab70-15974fc66ceb status changed: created -> pending_submit (Submitting to broker)
2025-06-04 10:20:18,938 - src.order.manager - INFO - Submitting order 2725fc1e-b2b6-48d3-ab70-15974fc66ceb to TWS
2025-06-04 10:20:18,938 - src.order.manager - INFO - Got broker order ID 46 for order 2725fc1e-b2b6-48d3-ab70-15974fc66ceb
2025-06-04 10:20:18,939 - src.order.manager - INFO - Calling placeOrder with ID 46, contract 0,SLV,STK,,0.0,,,SMART,,USD,,,False,,combo:, order 0,0,0: STP SELL 159@0.000000 DAY
2025-06-04 10:20:18,939 - ibapi.client - INFO - REQUEST placeOrder {'orderId': 46, 'contract': 1383165695696: 0,SLV,STK,,0.0,,,SMART,,USD,,,False,,combo:, 'order': 1383165374416: 0,0,0: STP SELL 159@0.000000 DAY}
2025-06-04 10:20:18,940 - ibapi.client - INFO - SENDING placeOrder b'\x00\x00\x01@3\x0046\x000\x00SLV\x00STK\x00\x000.0\x00\x00\x00SMART\x00\x00USD\x00\x00\x00\x00\x00SELL\x00159\x00STP\x000\x0030.44\x00DAY\x00\x00\x00\x000\x00\x001\x000\x000\x000\x000\x000\x000\x000\x00\x000\x00\x00\x00\x00\x00\x00\x00\x000\x00\x00-1\x000\x00\x00\x000\x00\x00\x000\x000\x00\x000\x00\x00\x00\x00\x00\x000\x00\x00\x00\x00\x000\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x000\x00\x00\x000\x000\x00\x00\x000\x00\x000\x000\x000\x000\x00\x001.7976931348623157e+308\x001.7976931348623157e+308\x001.7976931348623157e+308\x001.7976931348623157e+308\x001.7976931348623157e+308\x000\x00\x00\x00\x001.7976931348623157e+308\x00\x00\x00\x00\x000\x000\x000\x00\x00'
2025-06-04 10:20:18,940 - src.order.manager - INFO - placeOrder called successfully for order 2725fc1e-b2b6-48d3-ab70-15974fc66ceb
2025-06-04 10:20:18,941 - src.order.base - INFO - Order 2725fc1e-b2b6-48d3-ab70-15974fc66ceb status changed: pending_submit -> submitted (Submitted to broker)
2025-06-04 10:20:18,941 - src.rule.linked_order_actions - INFO - Auto-created BUY stop loss 2725fc1e-b2b6-48d3-ab70-15974fc66ceb at $30.44
2025-06-04 10:20:18,942 - src.rule.linked_order_actions - INFO - Percentage-based target: SLV target at $33.26 (6.0%)
2025-06-04 10:20:18,942 - src.order.base - INFO - Order 12f023e1-ab18-4b18-820a-099eaf21cc59 status changed: created -> pending_submit (Submitting to broker)
2025-06-04 10:20:18,943 - src.order.manager - INFO - Submitting order 12f023e1-ab18-4b18-820a-099eaf21cc59 to TWS
2025-06-04 10:20:18,944 - src.order.manager - INFO - Got broker order ID 47 for order 12f023e1-ab18-4b18-820a-099eaf21cc59
2025-06-04 10:20:18,944 - src.order.manager - INFO - Calling placeOrder with ID 47, contract 0,SLV,STK,,0.0,,,SMART,,USD,,,False,,combo:, order 0,0,0: LMT SELL 159@33.260000 DAY
2025-06-04 10:20:18,944 - ibapi.client - INFO - REQUEST placeOrder {'orderId': 47, 'contract': 1383165695696: 0,SLV,STK,,0.0,,,SMART,,USD,,,False,,combo:, 'order': 1383165375056: 0,0,0: LMT SELL 159@33.260000 DAY}
2025-06-04 10:20:18,945 - ibapi.client - INFO - SENDING placeOrder b'\x00\x00\x01@3\x0047\x000\x00SLV\x00STK\x00\x000.0\x00\x00\x00SMART\x00\x00USD\x00\x00\x00\x00\x00SELL\x00159\x00LMT\x0033.26\x000\x00DAY\x00\x00\x00\x000\x00\x001\x000\x000\x000\x000\x000\x000\x000\x00\x000\x00\x00\x00\x00\x00\x00\x00\x000\x00\x00-1\x000\x00\x00\x000\x00\x00\x000\x000\x00\x000\x00\x00\x00\x00\x00\x000\x00\x00\x00\x00\x000\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x000\x00\x00\x000\x000\x00\x00\x000\x00\x000\x000\x000\x000\x00\x001.7976931348623157e+308\x001.7976931348623157e+308\x001.7976931348623157e+308\x001.7976931348623157e+308\x001.7976931348623157e+308\x000\x00\x00\x00\x001.7976931348623157e+308\x00\x00\x00\x00\x000\x000\x000\x00\x00'
2025-06-04 10:20:18,945 - src.order.manager - INFO - placeOrder called successfully for order 12f023e1-ab18-4b18-820a-099eaf21cc59
2025-06-04 10:20:18,946 - src.order.base - INFO - Order 12f023e1-ab18-4b18-820a-099eaf21cc59 status changed: pending_submit -> submitted (Submitted to broker)
2025-06-04 10:20:18,946 - src.rule.linked_order_actions - INFO - Auto-created BUY take profit 12f023e1-ab18-4b18-820a-099eaf21cc59 at $33.26
2025-06-04 10:20:18,947 - src.rule.linked_order_actions - INFO - Starting double down order creation for SLV
2025-06-04 10:20:19,158 - src.tws_connection - INFO - Open Order - ID: 46, Symbol: SLV, Action: SELL, Quantity: 159.0
2025-06-04 10:20:19,160 - src.order.base - INFO - Order 2725fc1e-b2b6-48d3-ab70-15974fc66ceb status changed: submitted -> accepted (IB status: PreSubmitted)
2025-06-04 10:20:19,280 - src.tws_connection - INFO - Open Order - ID: 47, Symbol: SLV, Action: SELL, Quantity: 159.0
2025-06-04 10:20:19,438 - src.order.base - INFO - Order 98422267-b01e-44e2-8535-77fe5593bbfc status changed: submitted -> filled (Order fully filled)
2025-06-04 10:20:19,433 - src.tws_connection - INFO - Open Order - ID: 45, Symbol: SLV, Action: BUY, Quantity: 159.0
2025-06-04 10:20:19,439 - src.order.base - INFO - Order 98422267-b01e-44e2-8535-77fe5593bbfc filled: 159.0 @ 31.38 (159.0/159)
2025-06-04 10:20:19,440 - src.tws_connection - INFO - Open Order - ID: 45, Symbol: SLV, Action: BUY, Quantity: 159.0
2025-06-04 10:20:19,441 - ibapi.wrapper - INFO - ANSWER commissionReport {'commissionReport': 1383165374416: ExecId: 00025b49.68404962.01.01, Commission: 1.005565, Currency: USD, RealizedPnL: , Yield: , YieldRedemptionDate: 0}
2025-06-04 10:20:19,459 - src.rule.linked_order_actions - INFO - Found 1 stop orders for SLV: ['2725fc1e-b2b6-48d3-ab70-15974fc66ceb']
2025-06-04 10:20:19,459 - src.rule.linked_order_actions - INFO - Executing double down action for SLV
2025-06-04 10:20:19,460 - ibapi.client - INFO - REQUEST reqMktData {'reqId': 1005, 'contract': 1383165696416: 0,SLV,STK,,0.0,,,SMART,,USD,,,False,,combo:, 'genericTickList': '', 'snapshot': False, 'regulatorySnapshot': False, 'mktDataOptions': []}
2025-06-04 10:20:19,460 - ibapi.client - INFO - SENDING reqMktData b'\x00\x00\x0001\x0011\x001005\x000\x00SLV\x00STK\x00\x000.0\x00\x00\x00SMART\x00\x00USD\x00\x00\x000\x00\x000\x000\x00\x00'
2025-06-04 10:20:19,528 - ibapi.wrapper - INFO - ANSWER tickReqParams {'tickerId': 1005, 'minTick': 0.01, 'bboExchange': 'a60001', 'snapshotPermissions': 3}
2025-06-04 10:20:19,528 - ibapi.wrapper - INFO - ANSWER marketDataType {'reqId': 1005, 'marketDataType': 1}
2025-06-04 10:20:19,529 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1005, 'tickType': 1, 'price': 31.37, 'attrib': 1383167249392: CanAutoExecute: 1, PastLimit: 0, PreOpen: 0}
2025-06-04 10:20:19,529 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1005, 'tickType': 0, 'size': 218}
2025-06-04 10:20:19,529 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1005, 'tickType': 2, 'price': 31.38, 'attrib': 1383167249392: CanAutoExecute: 1, PastLimit: 0, PreOpen: 0}
2025-06-04 10:20:19,530 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1005, 'tickType': 3, 'size': 3097}
2025-06-04 10:20:19,530 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1005, 'tickType': 4, 'price': 31.38, 'attrib': 1383167249392: CanAutoExecute: 0, PastLimit: 0, PreOpen: 0}
2025-06-04 10:20:19,530 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1005, 'tickType': 5, 'size': 1}
2025-06-04 10:20:19,530 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1005, 'tickType': 0, 'size': 218}
2025-06-04 10:20:19,530 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1005, 'tickType': 3, 'size': 3097}
2025-06-04 10:20:19,535 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1005, 'tickType': 5, 'size': 1}
2025-06-04 10:20:19,537 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1005, 'tickType': 8, 'size': 57194}
2025-06-04 10:20:19,538 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1005, 'tickType': 6, 'price': 31.43, 'attrib': 1383167249392: CanAutoExecute: 0, PastLimit: 0, PreOpen: 0}
2025-06-04 10:20:19,538 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1005, 'tickType': 7, 'price': 31.25, 'attrib': 1383167249392: CanAutoExecute: 0, PastLimit: 0, PreOpen: 0}
2025-06-04 10:20:19,539 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1005, 'tickType': 9, 'price': 31.44, 'attrib': 1383167249392: CanAutoExecute: 0, PastLimit: 0, PreOpen: 0}
2025-06-04 10:20:19,539 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1005, 'tickType': 14, 'price': 31.32, 'attrib': 1383167249392: CanAutoExecute: 0, PastLimit: 0, PreOpen: 0}
2025-06-04 10:20:19,539 - ibapi.wrapper - INFO - ANSWER tickString {'reqId': 1005, 'tickType': 32, 'value': 'KPTVUH'}
2025-06-04 10:20:19,539 - ibapi.wrapper - INFO - ANSWER tickString {'reqId': 1005, 'tickType': 33, 'value': 'ABCNJKPTVXYZUH'}
2025-06-04 10:20:19,539 - ibapi.wrapper - INFO - ANSWER tickString {'reqId': 1005, 'tickType': 84, 'value': 'P'}
2025-06-04 10:20:19,539 - ibapi.wrapper - INFO - ANSWER tickString {'reqId': 1005, 'tickType': 45, 'value': '1749046816'}
2025-06-04 10:20:19,540 - ibapi.wrapper - INFO - ANSWER tickGeneric {'reqId': 1005, 'tickType': 49, 'value': 0.0}
2025-06-04 10:20:19,754 - ibapi.wrapper - INFO - ANSWER tickGeneric {'reqId': 1005, 'tickType': 49, 'value': 0.0}
2025-06-04 10:20:19,926 - ibapi.client - INFO - REQUEST cancelMktData {'reqId': 1005}
2025-06-04 10:20:19,927 - ibapi.client - INFO - SENDING cancelMktData b'\x00\x00\x00\t2\x002\x001005\x00'
2025-06-04 10:20:19,933 - src.rule.linked_order_actions - INFO - Using ATR-based stop distance for SLV: 0.0814
2025-06-04 10:20:19,934 - src.rule.linked_order_actions - INFO - Double down calc for SLV (BUY): current=$31.38, stop_distance=$0.08, dd_distance=$0.04, dd_price=$31.34, original_qty=159, dd_qty=159
2025-06-04 10:20:19,935 - src.order.base - INFO - Order 86c1ef91-077f-4d8a-a400-354919108d52 status changed: created -> pending_submit (Submitting to broker)
2025-06-04 10:20:19,936 - src.order.manager - INFO - Submitting order 86c1ef91-077f-4d8a-a400-354919108d52 to TWS
2025-06-04 10:20:19,937 - src.order.manager - INFO - Got broker order ID 48 for order 86c1ef91-077f-4d8a-a400-354919108d52
2025-06-04 10:20:19,937 - src.order.manager - INFO - Calling placeOrder with ID 48, contract 0,SLV,STK,,0.0,,,SMART,,USD,,,False,,combo:, order 0,0,0: LMT BUY 159@31.340000 DAY
2025-06-04 10:20:19,938 - ibapi.client - INFO - REQUEST placeOrder {'orderId': 48, 'contract': 1383165693776: 0,SLV,STK,,0.0,,,SMART,,USD,,,False,,combo:, 'order': 1383165376976: 0,0,0: LMT BUY 159@31.340000 DAY}
2025-06-04 10:20:19,938 - ibapi.client - INFO - SENDING placeOrder b'\x00\x00\x01?3\x0048\x000\x00SLV\x00STK\x00\x000.0\x00\x00\x00SMART\x00\x00USD\x00\x00\x00\x00\x00BUY\x00159\x00LMT\x0031.34\x000\x00DAY\x00\x00\x00\x000\x00\x001\x000\x000\x000\x000\x000\x000\x000\x00\x000\x00\x00\x00\x00\x00\x00\x00\x000\x00\x00-1\x000\x00\x00\x000\x00\x00\x000\x000\x00\x000\x00\x00\x00\x00\x00\x000\x00\x00\x00\x00\x000\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x000\x00\x00\x000\x000\x00\x00\x000\x00\x000\x000\x000\x000\x00\x001.7976931348623157e+308\x001.7976931348623157e+308\x001.7976931348623157e+308\x001.7976931348623157e+308\x001.7976931348623157e+308\x000\x00\x00\x00\x001.7976931348623157e+308\x00\x00\x00\x00\x000\x000\x000\x00\x00'
2025-06-04 10:20:19,938 - src.order.manager - INFO - placeOrder called successfully for order 86c1ef91-077f-4d8a-a400-354919108d52
2025-06-04 10:20:19,939 - src.order.base - INFO - Order 86c1ef91-077f-4d8a-a400-354919108d52 status changed: pending_submit -> submitted (Submitted to broker)
2025-06-04 10:20:19,940 - src.rule.linked_order_actions - INFO - Created BUY double down order 'doubledown1' for SLV: 159 shares @ $31.34
2025-06-04 10:20:19,941 - src.rule.linked_order_actions - INFO - Auto-created double down order for SLV
2025-06-04 10:20:19,941 - src.rule.linked_order_actions - INFO - Created and linked BUY main order 98422267-b01e-44e2-8535-77fe5593bbfc for SLV
2025-06-04 10:20:19,942 - __main__ - INFO - Active orders after second signal: 6
2025-06-04 10:20:20,110 - src.tws_connection - INFO - Open Order - ID: 48, Symbol: SLV, Action: BUY, Quantity: 159.0
2025-06-04 10:20:22,953 - __main__ - INFO - 
================================================================================
2025-06-04 10:20:22,953 - __main__ - INFO - TEST 3: SELL SIGNAL (should reverse position)
2025-06-04 10:20:22,954 - __main__ - INFO - ================================================================================
2025-06-04 10:20:22,955 - ibapi.client - INFO - REQUEST reqMktData {'reqId': 1006, 'contract': 1383165696176: 0,SLV,STK,,0.0,,,SMART,,USD,,,False,,combo:, 'genericTickList': '', 'snapshot': False, 'regulatorySnapshot': False, 'mktDataOptions': []}
2025-06-04 10:20:22,955 - ibapi.client - INFO - SENDING reqMktData b'\x00\x00\x0001\x0011\x001006\x000\x00SLV\x00STK\x00\x000.0\x00\x00\x00SMART\x00\x00USD\x00\x00\x000\x00\x000\x000\x00\x00'
2025-06-04 10:20:22,989 - ibapi.wrapper - INFO - ANSWER tickReqParams {'tickerId': 1006, 'minTick': 0.01, 'bboExchange': 'a60001', 'snapshotPermissions': 3}
2025-06-04 10:20:22,993 - ibapi.wrapper - INFO - ANSWER marketDataType {'reqId': 1006, 'marketDataType': 1}
2025-06-04 10:20:22,993 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1006, 'tickType': 1, 'price': 31.37, 'attrib': 1383167249584: CanAutoExecute: 1, PastLimit: 0, PreOpen: 0}
2025-06-04 10:20:22,994 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1006, 'tickType': 0, 'size': 137}
2025-06-04 10:20:22,995 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1006, 'tickType': 2, 'price': 31.38, 'attrib': 1383167249584: CanAutoExecute: 1, PastLimit: 0, PreOpen: 0}
2025-06-04 10:20:22,995 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1006, 'tickType': 3, 'size': 3198}
2025-06-04 10:20:22,996 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1006, 'tickType': 4, 'price': 31.38, 'attrib': 1383167249584: CanAutoExecute: 0, PastLimit: 0, PreOpen: 0}
2025-06-04 10:20:22,996 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1006, 'tickType': 5, 'size': 1}
2025-06-04 10:20:22,997 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1006, 'tickType': 0, 'size': 137}
2025-06-04 10:20:22,997 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1006, 'tickType': 3, 'size': 3198}
2025-06-04 10:20:22,998 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1006, 'tickType': 5, 'size': 1}
2025-06-04 10:20:23,002 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1006, 'tickType': 8, 'size': 57387}
2025-06-04 10:20:23,004 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1006, 'tickType': 6, 'price': 31.43, 'attrib': 1383167249584: CanAutoExecute: 0, PastLimit: 0, PreOpen: 0}
2025-06-04 10:20:23,005 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1006, 'tickType': 7, 'price': 31.25, 'attrib': 1383167249584: CanAutoExecute: 0, PastLimit: 0, PreOpen: 0}
2025-06-04 10:20:23,005 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1006, 'tickType': 9, 'price': 31.44, 'attrib': 1383167249584: CanAutoExecute: 0, PastLimit: 0, PreOpen: 0}
2025-06-04 10:20:23,005 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1006, 'tickType': 14, 'price': 31.32, 'attrib': 1383167249584: CanAutoExecute: 0, PastLimit: 0, PreOpen: 0}
2025-06-04 10:20:23,006 - ibapi.wrapper - INFO - ANSWER tickString {'reqId': 1006, 'tickType': 32, 'value': 'PTU'}
2025-06-04 10:20:23,006 - ibapi.wrapper - INFO - ANSWER tickString {'reqId': 1006, 'tickType': 33, 'value': 'ABCNJKPTVXYZUH'}
2025-06-04 10:20:23,006 - ibapi.wrapper - INFO - ANSWER tickString {'reqId': 1006, 'tickType': 84, 'value': 'P'}
2025-06-04 10:20:23,007 - ibapi.wrapper - INFO - ANSWER tickString {'reqId': 1006, 'tickType': 45, 'value': '1749046816'}
2025-06-04 10:20:23,007 - ibapi.wrapper - INFO - ANSWER tickGeneric {'reqId': 1006, 'tickType': 49, 'value': 0.0}
2025-06-04 10:20:23,603 - ibapi.wrapper - INFO - ANSWER tickGeneric {'reqId': 1006, 'tickType': 49, 'value': 0.0}
2025-06-04 10:20:23,862 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1006, 'tickType': 8, 'size': 57423}
2025-06-04 10:20:23,870 - ibapi.wrapper - INFO - ANSWER tickString {'reqId': 1006, 'tickType': 45, 'value': '1749046823'}
2025-06-04 10:20:23,871 - ibapi.wrapper - INFO - ANSWER tickString {'reqId': 1006, 'tickType': 84, 'value': 'D'}
2025-06-04 10:20:23,872 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1006, 'tickType': 4, 'price': 31.36, 'attrib': 1383167249584: CanAutoExecute: 0, PastLimit: 0, PreOpen: 0}
2025-06-04 10:20:23,872 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1006, 'tickType': 5, 'size': 5}
2025-06-04 10:20:23,873 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1006, 'tickType': 5, 'size': 5}
2025-06-04 10:20:23,873 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1006, 'tickType': 1, 'price': 31.36, 'attrib': 1383167249584: CanAutoExecute: 1, PastLimit: 0, PreOpen: 0}
2025-06-04 10:20:23,874 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1006, 'tickType': 0, 'size': 967}
2025-06-04 10:20:23,874 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1006, 'tickType': 2, 'price': 31.37, 'attrib': 1383167249584: CanAutoExecute: 1, PastLimit: 0, PreOpen: 0}
2025-06-04 10:20:23,874 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1006, 'tickType': 3, 'size': 1511}
2025-06-04 10:20:23,875 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1006, 'tickType': 0, 'size': 967}
2025-06-04 10:20:23,875 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1006, 'tickType': 3, 'size': 1511}
2025-06-04 10:20:23,876 - ibapi.wrapper - INFO - ANSWER tickString {'reqId': 1006, 'tickType': 32, 'value': 'ACNJKPTVZUH'}
2025-06-04 10:20:23,876 - ibapi.wrapper - INFO - ANSWER tickString {'reqId': 1006, 'tickType': 33, 'value': 'ACNJKPTZU'}
2025-06-04 10:20:24,607 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1006, 'tickType': 8, 'size': 57425}
2025-06-04 10:20:24,608 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1006, 'tickType': 5, 'size': 2}
2025-06-04 10:20:24,608 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1006, 'tickType': 0, 'size': 551}
2025-06-04 10:20:24,609 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1006, 'tickType': 3, 'size': 1633}
2025-06-04 10:20:24,609 - ibapi.wrapper - INFO - ANSWER tickString {'reqId': 1006, 'tickType': 32, 'value': 'ANJKPTVZUH'}
2025-06-04 10:20:24,610 - ibapi.wrapper - INFO - ANSWER tickString {'reqId': 1006, 'tickType': 33, 'value': 'ACNJKPTVYZUH'}
2025-06-04 10:20:25,307 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1006, 'tickType': 0, 'size': 461}
2025-06-04 10:20:25,308 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1006, 'tickType': 3, 'size': 1643}
2025-06-04 10:20:26,106 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1006, 'tickType': 0, 'size': 436}
2025-06-04 10:20:26,106 - ibapi.wrapper - INFO - ANSWER tickString {'reqId': 1006, 'tickType': 32, 'value': 'NKPTVZUH'}
2025-06-04 10:20:26,854 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1006, 'tickType': 0, 'size': 536}
2025-06-04 10:20:26,855 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1006, 'tickType': 3, 'size': 1642}
2025-06-04 10:20:26,856 - ibapi.wrapper - INFO - ANSWER tickString {'reqId': 1006, 'tickType': 32, 'value': 'NJKPTVZUH'}
2025-06-04 10:20:27,614 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1006, 'tickType': 0, 'size': 825}
2025-06-04 10:20:27,614 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1006, 'tickType': 3, 'size': 1172}
2025-06-04 10:20:27,618 - ibapi.wrapper - INFO - ANSWER tickString {'reqId': 1006, 'tickType': 32, 'value': 'ACNJKPTVZUH'}
2025-06-04 10:20:27,618 - ibapi.wrapper - INFO - ANSWER tickString {'reqId': 1006, 'tickType': 33, 'value': 'ANJKPTVYZUH'}
2025-06-04 10:20:27,971 - ibapi.client - INFO - REQUEST cancelMktData {'reqId': 1006}
2025-06-04 10:20:27,972 - ibapi.client - INFO - SENDING cancelMktData b'\x00\x00\x00\t2\x002\x001006\x00'
2025-06-04 10:20:27,973 - src.position.sizer - INFO - SELL position size: 159 shares @ $31.37 = $4987.83 (99.8% of $5000.00 allocation)
2025-06-04 10:20:27,975 - src.order.base - INFO - Order f709f3e7-480f-455b-bc0b-5732a9ee209d status changed: created -> pending_submit (Submitting to broker)
2025-06-04 10:20:27,978 - src.order.manager - INFO - Submitting order f709f3e7-480f-455b-bc0b-5732a9ee209d to TWS
2025-06-04 10:20:27,979 - src.order.manager - INFO - Got broker order ID 49 for order f709f3e7-480f-455b-bc0b-5732a9ee209d
2025-06-04 10:20:27,979 - src.order.manager - INFO - Calling placeOrder with ID 49, contract 0,SLV,STK,,0.0,,,SMART,,USD,,,False,,combo:, order 0,0,0: MKT SELL 159@0.000000 DAY
2025-06-04 10:20:27,979 - ibapi.client - INFO - REQUEST placeOrder {'orderId': 49, 'contract': 1383165695216: 0,SLV,STK,,0.0,,,SMART,,USD,,,False,,combo:, 'order': 1383165376656: 0,0,0: MKT SELL 159@0.000000 DAY}
2025-06-04 10:20:27,980 - ibapi.client - INFO - SENDING placeOrder b'\x00\x00\x01<3\x0049\x000\x00SLV\x00STK\x00\x000.0\x00\x00\x00SMART\x00\x00USD\x00\x00\x00\x00\x00SELL\x00159\x00MKT\x000\x000\x00DAY\x00\x00\x00\x000\x00\x001\x000\x000\x000\x000\x000\x000\x000\x00\x000\x00\x00\x00\x00\x00\x00\x00\x000\x00\x00-1\x000\x00\x00\x000\x00\x00\x000\x000\x00\x000\x00\x00\x00\x00\x00\x000\x00\x00\x00\x00\x000\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x000\x00\x00\x000\x000\x00\x00\x000\x00\x000\x000\x000\x000\x00\x001.7976931348623157e+308\x001.7976931348623157e+308\x001.7976931348623157e+308\x001.7976931348623157e+308\x001.7976931348623157e+308\x000\x00\x00\x00\x001.7976931348623157e+308\x00\x00\x00\x00\x000\x000\x000\x00\x00'
2025-06-04 10:20:27,980 - src.order.manager - INFO - placeOrder called successfully for order f709f3e7-480f-455b-bc0b-5732a9ee209d
2025-06-04 10:20:27,980 - src.order.base - INFO - Order f709f3e7-480f-455b-bc0b-5732a9ee209d status changed: pending_submit -> submitted (Submitted to broker)
2025-06-04 10:20:27,984 - src.rule.linked_order_actions - INFO - Created new order context for SLV SELL position
2025-06-04 10:20:27,986 - ibapi.client - INFO - REQUEST reqMktData {'reqId': 1007, 'contract': 1383165695216: 0,SLV,STK,,0.0,,,SMART,,USD,,,False,,combo:, 'genericTickList': '', 'snapshot': False, 'regulatorySnapshot': False, 'mktDataOptions': []}
2025-06-04 10:20:27,986 - ibapi.client - INFO - SENDING reqMktData b'\x00\x00\x0001\x0011\x001007\x000\x00SLV\x00STK\x00\x000.0\x00\x00\x00SMART\x00\x00USD\x00\x00\x000\x00\x000\x000\x00\x00'
2025-06-04 10:20:27,987 - __main__ - INFO - 
================================================================================
2025-06-04 10:20:27,987 - __main__ - INFO - TEST 4: SECOND SELL SIGNAL (should be ignored)
2025-06-04 10:20:27,988 - __main__ - INFO - ================================================================================
2025-06-04 10:20:27,988 - __main__ - INFO - Active orders before second SELL signal: 7
2025-06-04 10:20:28,059 - ibapi.wrapper - INFO - ANSWER tickReqParams {'tickerId': 1007, 'minTick': 0.01, 'bboExchange': 'a60001', 'snapshotPermissions': 3}
2025-06-04 10:20:28,060 - ibapi.wrapper - INFO - ANSWER marketDataType {'reqId': 1007, 'marketDataType': 1}
2025-06-04 10:20:28,060 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1007, 'tickType': 1, 'price': 31.36, 'attrib': 1383167249776: CanAutoExecute: 1, PastLimit: 0, PreOpen: 0}
2025-06-04 10:20:28,060 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1007, 'tickType': 0, 'size': 825}
2025-06-04 10:20:28,060 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1007, 'tickType': 2, 'price': 31.37, 'attrib': 1383167249776: CanAutoExecute: 1, PastLimit: 0, PreOpen: 0}
2025-06-04 10:20:28,061 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1007, 'tickType': 3, 'size': 1172}
2025-06-04 10:20:28,061 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1007, 'tickType': 4, 'price': 31.36, 'attrib': 1383167249776: CanAutoExecute: 0, PastLimit: 0, PreOpen: 0}
2025-06-04 10:20:28,061 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1007, 'tickType': 5, 'size': 2}
2025-06-04 10:20:28,061 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1007, 'tickType': 0, 'size': 825}
2025-06-04 10:20:28,061 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1007, 'tickType': 3, 'size': 1172}
2025-06-04 10:20:28,061 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1007, 'tickType': 5, 'size': 2}
2025-06-04 10:20:28,062 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1007, 'tickType': 8, 'size': 57425}
2025-06-04 10:20:28,062 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1007, 'tickType': 6, 'price': 31.43, 'attrib': 1383167249776: CanAutoExecute: 0, PastLimit: 0, PreOpen: 0}
2025-06-04 10:20:28,063 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1007, 'tickType': 7, 'price': 31.25, 'attrib': 1383167249776: CanAutoExecute: 0, PastLimit: 0, PreOpen: 0}
2025-06-04 10:20:28,063 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1007, 'tickType': 9, 'price': 31.44, 'attrib': 1383167249776: CanAutoExecute: 0, PastLimit: 0, PreOpen: 0}
2025-06-04 10:20:28,063 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1007, 'tickType': 14, 'price': 31.32, 'attrib': 1383167249776: CanAutoExecute: 0, PastLimit: 0, PreOpen: 0}
2025-06-04 10:20:28,063 - ibapi.wrapper - INFO - ANSWER tickString {'reqId': 1007, 'tickType': 32, 'value': 'ACNJKPTVZUH'}
2025-06-04 10:20:28,063 - ibapi.wrapper - INFO - ANSWER tickString {'reqId': 1007, 'tickType': 33, 'value': 'ANJKPTVYZUH'}
2025-06-04 10:20:28,063 - ibapi.wrapper - INFO - ANSWER tickString {'reqId': 1007, 'tickType': 84, 'value': 'D'}
2025-06-04 10:20:28,063 - ibapi.wrapper - INFO - ANSWER tickString {'reqId': 1007, 'tickType': 45, 'value': '1749046823'}
2025-06-04 10:20:28,063 - ibapi.wrapper - INFO - ANSWER tickGeneric {'reqId': 1007, 'tickType': 49, 'value': 0.0}
2025-06-04 10:20:28,111 - src.tws_connection - INFO - Open Order - ID: 49, Symbol: SLV, Action: SELL, Quantity: 159.0
2025-06-04 10:20:28,112 - ibapi.client - INFO - REQUEST cancelMktData {'reqId': 1007}
2025-06-04 10:20:28,112 - ibapi.client - INFO - SENDING cancelMktData b'\x00\x00\x00\t2\x002\x001007\x00'
2025-06-04 10:20:28,112 - src.rule.linked_order_actions - INFO - Percentage-based stop: SLV stop at $32.30 (3.0%)
2025-06-04 10:20:28,113 - src.order.base - INFO - Order c7492c23-81a9-4f46-ac4a-c1e6b0ff3b28 status changed: created -> pending_submit (Submitting to broker)
2025-06-04 10:20:28,113 - src.order.manager - INFO - Submitting order c7492c23-81a9-4f46-ac4a-c1e6b0ff3b28 to TWS
2025-06-04 10:20:28,113 - src.order.manager - INFO - Got broker order ID 50 for order c7492c23-81a9-4f46-ac4a-c1e6b0ff3b28
2025-06-04 10:20:28,113 - src.order.manager - INFO - Calling placeOrder with ID 50, contract 0,SLV,STK,,0.0,,,SMART,,USD,,,False,,combo:, order 0,0,0: STP BUY 159@0.000000 DAY
2025-06-04 10:20:28,113 - ibapi.client - INFO - REQUEST placeOrder {'orderId': 50, 'contract': 1383165696176: 0,SLV,STK,,0.0,,,SMART,,USD,,,False,,combo:, 'order': 1383165377296: 0,0,0: STP BUY 159@0.000000 DAY}
2025-06-04 10:20:28,114 - ibapi.client - INFO - SENDING placeOrder b'\x00\x00\x01>3\x0050\x000\x00SLV\x00STK\x00\x000.0\x00\x00\x00SMART\x00\x00USD\x00\x00\x00\x00\x00BUY\x00159\x00STP\x000\x0032.3\x00DAY\x00\x00\x00\x000\x00\x001\x000\x000\x000\x000\x000\x000\x000\x00\x000\x00\x00\x00\x00\x00\x00\x00\x000\x00\x00-1\x000\x00\x00\x000\x00\x00\x000\x000\x00\x000\x00\x00\x00\x00\x00\x000\x00\x00\x00\x00\x000\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x000\x00\x00\x000\x000\x00\x00\x000\x00\x000\x000\x000\x000\x00\x001.7976931348623157e+308\x001.7976931348623157e+308\x001.7976931348623157e+308\x001.7976931348623157e+308\x001.7976931348623157e+308\x000\x00\x00\x00\x001.7976931348623157e+308\x00\x00\x00\x00\x000\x000\x000\x00\x00'
2025-06-04 10:20:28,114 - src.order.manager - INFO - placeOrder called successfully for order c7492c23-81a9-4f46-ac4a-c1e6b0ff3b28
2025-06-04 10:20:28,116 - src.order.base - INFO - Order c7492c23-81a9-4f46-ac4a-c1e6b0ff3b28 status changed: pending_submit -> submitted (Submitted to broker)
2025-06-04 10:20:28,117 - src.rule.linked_order_actions - INFO - Auto-created SELL stop loss c7492c23-81a9-4f46-ac4a-c1e6b0ff3b28 at $32.30
2025-06-04 10:20:28,118 - src.rule.linked_order_actions - INFO - Percentage-based target: SLV target at $29.48 (6.0%)
2025-06-04 10:20:28,118 - src.order.base - INFO - Order 93ee78a3-7e0b-408b-a7ae-ccf9d94d13bc status changed: created -> pending_submit (Submitting to broker)
2025-06-04 10:20:28,119 - src.order.manager - INFO - Submitting order 93ee78a3-7e0b-408b-a7ae-ccf9d94d13bc to TWS
2025-06-04 10:20:28,119 - src.order.manager - INFO - Got broker order ID 51 for order 93ee78a3-7e0b-408b-a7ae-ccf9d94d13bc
2025-06-04 10:20:28,119 - src.order.manager - INFO - Calling placeOrder with ID 51, contract 0,SLV,STK,,0.0,,,SMART,,USD,,,False,,combo:, order 0,0,0: LMT BUY 159@29.480000 DAY
2025-06-04 10:20:28,119 - ibapi.client - INFO - REQUEST placeOrder {'orderId': 51, 'contract': 1383165695216: 0,SLV,STK,,0.0,,,SMART,,USD,,,False,,combo:, 'order': 1383165377616: 0,0,0: LMT BUY 159@29.480000 DAY}
2025-06-04 10:20:28,119 - ibapi.client - INFO - SENDING placeOrder b'\x00\x00\x01?3\x0051\x000\x00SLV\x00STK\x00\x000.0\x00\x00\x00SMART\x00\x00USD\x00\x00\x00\x00\x00BUY\x00159\x00LMT\x0029.48\x000\x00DAY\x00\x00\x00\x000\x00\x001\x000\x000\x000\x000\x000\x000\x000\x00\x000\x00\x00\x00\x00\x00\x00\x00\x000\x00\x00-1\x000\x00\x00\x000\x00\x00\x000\x000\x00\x000\x00\x00\x00\x00\x00\x000\x00\x00\x00\x00\x000\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x000\x00\x00\x000\x000\x00\x00\x000\x00\x000\x000\x000\x000\x00\x001.7976931348623157e+308\x001.7976931348623157e+308\x001.7976931348623157e+308\x001.7976931348623157e+308\x001.7976931348623157e+308\x000\x00\x00\x00\x001.7976931348623157e+308\x00\x00\x00\x00\x000\x000\x000\x00\x00'
2025-06-04 10:20:28,120 - src.order.manager - INFO - placeOrder called successfully for order 93ee78a3-7e0b-408b-a7ae-ccf9d94d13bc
2025-06-04 10:20:28,120 - src.order.base - INFO - Order 93ee78a3-7e0b-408b-a7ae-ccf9d94d13bc status changed: pending_submit -> submitted (Submitted to broker)
2025-06-04 10:20:28,120 - src.rule.linked_order_actions - INFO - Auto-created SELL take profit 93ee78a3-7e0b-408b-a7ae-ccf9d94d13bc at $29.48
2025-06-04 10:20:28,121 - src.rule.linked_order_actions - INFO - Starting double down order creation for SLV
2025-06-04 10:20:28,146 - src.tws_connection - INFO - Open Order - ID: 49, Symbol: SLV, Action: SELL, Quantity: 159.0
2025-06-04 10:20:28,255 - src.tws_connection - INFO - Open Order - ID: 50, Symbol: SLV, Action: BUY, Quantity: 159.0
2025-06-04 10:20:28,256 - src.order.base - INFO - Order c7492c23-81a9-4f46-ac4a-c1e6b0ff3b28 status changed: submitted -> accepted (IB status: PreSubmitted)
2025-06-04 10:20:28,308 - src.tws_connection - INFO - Open Order - ID: 51, Symbol: SLV, Action: BUY, Quantity: 159.0
2025-06-04 10:20:28,389 - src.order.base - INFO - Order f709f3e7-480f-455b-bc0b-5732a9ee209d status changed: submitted -> filled (Order fully filled)
2025-06-04 10:20:28,389 - src.order.base - INFO - Order f709f3e7-480f-455b-bc0b-5732a9ee209d filled: 159.0 @ 31.36 (159.0/159)
2025-06-04 10:20:28,390 - src.tws_connection - INFO - Open Order - ID: 49, Symbol: SLV, Action: SELL, Quantity: 159.0
2025-06-04 10:20:28,391 - src.tws_connection - INFO - Open Order - ID: 49, Symbol: SLV, Action: SELL, Quantity: 159.0
2025-06-04 10:20:28,392 - ibapi.wrapper - INFO - ANSWER commissionReport {'commissionReport': 1383165377616: ExecId: 00025b49.68404981.01.01, Commission: 1.031959, Currency: USD, RealizedPnL: -6.29725, Yield: , YieldRedemptionDate: 0}
2025-06-04 10:20:28,629 - src.rule.linked_order_actions - INFO - Found 1 stop orders for SLV: ['c7492c23-81a9-4f46-ac4a-c1e6b0ff3b28']
2025-06-04 10:20:28,630 - src.rule.linked_order_actions - INFO - Executing double down action for SLV
2025-06-04 10:20:28,630 - ibapi.client - INFO - REQUEST reqMktData {'reqId': 1008, 'contract': 1383165695216: 0,SLV,STK,,0.0,,,SMART,,USD,,,False,,combo:, 'genericTickList': '', 'snapshot': False, 'regulatorySnapshot': False, 'mktDataOptions': []}
2025-06-04 10:20:28,630 - ibapi.client - INFO - SENDING reqMktData b'\x00\x00\x0001\x0011\x001008\x000\x00SLV\x00STK\x00\x000.0\x00\x00\x00SMART\x00\x00USD\x00\x00\x000\x00\x000\x000\x00\x00'
2025-06-04 10:20:28,670 - ibapi.wrapper - INFO - ANSWER tickReqParams {'tickerId': 1008, 'minTick': 0.01, 'bboExchange': 'a60001', 'snapshotPermissions': 3}
2025-06-04 10:20:28,671 - ibapi.wrapper - INFO - ANSWER marketDataType {'reqId': 1008, 'marketDataType': 1}
2025-06-04 10:20:28,671 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1008, 'tickType': 1, 'price': 31.36, 'attrib': 1383167249968: CanAutoExecute: 1, PastLimit: 0, PreOpen: 0}
2025-06-04 10:20:28,672 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1008, 'tickType': 0, 'size': 827}
2025-06-04 10:20:28,672 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1008, 'tickType': 2, 'price': 31.37, 'attrib': 1383167249968: CanAutoExecute: 1, PastLimit: 0, PreOpen: 0}
2025-06-04 10:20:28,672 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1008, 'tickType': 3, 'size': 1167}
2025-06-04 10:20:28,673 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1008, 'tickType': 4, 'price': 31.36, 'attrib': 1383167249968: CanAutoExecute: 0, PastLimit: 0, PreOpen: 0}
2025-06-04 10:20:28,673 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1008, 'tickType': 5, 'size': 2}
2025-06-04 10:20:28,673 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1008, 'tickType': 0, 'size': 827}
2025-06-04 10:20:28,674 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1008, 'tickType': 3, 'size': 1167}
2025-06-04 10:20:28,674 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1008, 'tickType': 5, 'size': 2}
2025-06-04 10:20:28,674 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1008, 'tickType': 8, 'size': 57425}
2025-06-04 10:20:28,675 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1008, 'tickType': 6, 'price': 31.43, 'attrib': 1383167249968: CanAutoExecute: 0, PastLimit: 0, PreOpen: 0}
2025-06-04 10:20:28,675 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1008, 'tickType': 7, 'price': 31.25, 'attrib': 1383167249968: CanAutoExecute: 0, PastLimit: 0, PreOpen: 0}
2025-06-04 10:20:28,676 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1008, 'tickType': 9, 'price': 31.44, 'attrib': 1383167249968: CanAutoExecute: 0, PastLimit: 0, PreOpen: 0}
2025-06-04 10:20:28,676 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1008, 'tickType': 14, 'price': 31.32, 'attrib': 1383167249968: CanAutoExecute: 0, PastLimit: 0, PreOpen: 0}
2025-06-04 10:20:28,676 - ibapi.wrapper - INFO - ANSWER tickString {'reqId': 1008, 'tickType': 32, 'value': 'ACNJKPTVZUH'}
2025-06-04 10:20:28,677 - ibapi.wrapper - INFO - ANSWER tickString {'reqId': 1008, 'tickType': 33, 'value': 'ANJKPTVYZUH'}
2025-06-04 10:20:28,677 - ibapi.wrapper - INFO - ANSWER tickString {'reqId': 1008, 'tickType': 84, 'value': 'D'}
2025-06-04 10:20:28,678 - ibapi.wrapper - INFO - ANSWER tickString {'reqId': 1008, 'tickType': 45, 'value': '1749046823'}
2025-06-04 10:20:28,678 - ibapi.wrapper - INFO - ANSWER tickGeneric {'reqId': 1008, 'tickType': 49, 'value': 0.0}
2025-06-04 10:20:29,089 - ibapi.wrapper - INFO - ANSWER tickGeneric {'reqId': 1008, 'tickType': 49, 'value': 0.0}
2025-06-04 10:20:29,839 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1008, 'tickType': 3, 'size': 1191}
2025-06-04 10:20:29,990 - ibapi.client - INFO - REQUEST cancelMktData {'reqId': 1008}
2025-06-04 10:20:29,991 - ibapi.client - INFO - SENDING cancelMktData b'\x00\x00\x00\t2\x002\x001008\x00'
2025-06-04 10:20:29,995 - src.rule.linked_order_actions - INFO - Using ATR-based stop distance for SLV: 0.0814
2025-06-04 10:20:29,996 - src.rule.linked_order_actions - INFO - Double down calc for SLV (SELL): current=$31.36, stop_distance=$0.08, dd_distance=$0.04, dd_price=$31.40, original_qty=159, dd_qty=-159
2025-06-04 10:20:29,996 - src.order.base - INFO - Order 79eae042-b55f-4243-87e2-52605a321a88 status changed: created -> pending_submit (Submitting to broker)
2025-06-04 10:20:29,997 - src.order.manager - INFO - Submitting order 79eae042-b55f-4243-87e2-52605a321a88 to TWS
2025-06-04 10:20:29,997 - src.order.manager - INFO - Got broker order ID 52 for order 79eae042-b55f-4243-87e2-52605a321a88
2025-06-04 10:20:29,997 - src.order.manager - INFO - Calling placeOrder with ID 52, contract 0,SLV,STK,,0.0,,,SMART,,USD,,,False,,combo:, order 0,0,0: LMT SELL 159@31.400000 DAY
2025-06-04 10:20:30,002 - ibapi.client - INFO - REQUEST placeOrder {'orderId': 52, 'contract': 1383165695216: 0,SLV,STK,,0.0,,,SMART,,USD,,,False,,combo:, 'order': 1383167213648: 0,0,0: LMT SELL 159@31.400000 DAY}
2025-06-04 10:20:30,002 - ibapi.client - INFO - SENDING placeOrder b'\x00\x00\x01?3\x0052\x000\x00SLV\x00STK\x00\x000.0\x00\x00\x00SMART\x00\x00USD\x00\x00\x00\x00\x00SELL\x00159\x00LMT\x0031.4\x000\x00DAY\x00\x00\x00\x000\x00\x001\x000\x000\x000\x000\x000\x000\x000\x00\x000\x00\x00\x00\x00\x00\x00\x00\x000\x00\x00-1\x000\x00\x00\x000\x00\x00\x000\x000\x00\x000\x00\x00\x00\x00\x00\x000\x00\x00\x00\x00\x000\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x000\x00\x00\x000\x000\x00\x00\x000\x00\x000\x000\x000\x000\x00\x001.7976931348623157e+308\x001.7976931348623157e+308\x001.7976931348623157e+308\x001.7976931348623157e+308\x001.7976931348623157e+308\x000\x00\x00\x00\x001.7976931348623157e+308\x00\x00\x00\x00\x000\x000\x000\x00\x00'
2025-06-04 10:20:30,003 - src.order.manager - INFO - placeOrder called successfully for order 79eae042-b55f-4243-87e2-52605a321a88
2025-06-04 10:20:30,003 - src.order.base - INFO - Order 79eae042-b55f-4243-87e2-52605a321a88 status changed: pending_submit -> submitted (Submitted to broker)
2025-06-04 10:20:30,004 - src.rule.linked_order_actions - INFO - Created SELL double down order 'doubledown1' for SLV: -159 shares @ $31.40
2025-06-04 10:20:30,004 - src.rule.linked_order_actions - INFO - Auto-created double down order for SLV
2025-06-04 10:20:30,004 - src.rule.linked_order_actions - INFO - Created and linked SELL main order f709f3e7-480f-455b-bc0b-5732a9ee209d for SLV
2025-06-04 10:20:30,005 - ibapi.client - INFO - REQUEST reqMktData {'reqId': 1009, 'contract': 1383165695216: 0,SLV,STK,,0.0,,,SMART,,USD,,,False,,combo:, 'genericTickList': '', 'snapshot': False, 'regulatorySnapshot': False, 'mktDataOptions': []}
2025-06-04 10:20:30,005 - ibapi.client - INFO - SENDING reqMktData b'\x00\x00\x0001\x0011\x001009\x000\x00SLV\x00STK\x00\x000.0\x00\x00\x00SMART\x00\x00USD\x00\x00\x000\x00\x000\x000\x00\x00'
2025-06-04 10:20:30,005 - __main__ - INFO - Active orders after second SELL signal: 9
2025-06-04 10:20:30,009 - __main__ - INFO - 
================================================================================
2025-06-04 10:20:30,010 - __main__ - INFO - TEST SUMMARY
2025-06-04 10:20:30,010 - __main__ - INFO - ================================================================================
2025-06-04 10:20:30,010 - __main__ - INFO - Total active orders: 9
2025-06-04 10:20:30,010 - __main__ - INFO - Total completed orders: 3
2025-06-04 10:20:30,010 - __main__ - INFO - 
Order Details:
2025-06-04 10:20:30,010 - __main__ - INFO -   SLV sell 159 @ market - filled
2025-06-04 10:20:30,011 - __main__ - INFO -   SLV buy 159 @ market - filled
2025-06-04 10:20:30,011 - __main__ - INFO -   SLV buy 159 @ market - filled
2025-06-04 10:20:30,018 - ibapi.client - INFO - REQUEST cancelMktData {'reqId': 1009}
2025-06-04 10:20:30,018 - ibapi.client - INFO - SENDING cancelMktData b'\x00\x00\x00\t2\x002\x001009\x00'
2025-06-04 10:20:30,019 - src.rule.engine - INFO - Rule engine stopped
2025-06-04 10:20:30,020 - __main__ - INFO - 
Cleaning up orders...
2025-06-04 10:20:30,020 - src.order.base - INFO - Order 79eae042-b55f-4243-87e2-52605a321a88 status changed: submitted -> pending_cancel (Test cleanup)
2025-06-04 10:20:30,020 - src.order.manager - INFO - Cancelling order 79eae042-b55f-4243-87e2-52605a321a88 with broker ID 52
2025-06-04 10:20:30,020 - ibapi.client - INFO - REQUEST cancelOrder {'orderId': 52}
2025-06-04 10:20:30,020 - ibapi.client - INFO - SENDING cancelOrder b'\x00\x00\x00\x074\x001\x0052\x00'
2025-06-04 10:20:30,021 - src.order.base - INFO - Order 86c1ef91-077f-4d8a-a400-354919108d52 status changed: submitted -> pending_cancel (Test cleanup)
2025-06-04 10:20:30,021 - src.order.manager - INFO - Cancelling order 86c1ef91-077f-4d8a-a400-354919108d52 with broker ID 48
2025-06-04 10:20:30,021 - ibapi.client - INFO - REQUEST cancelOrder {'orderId': 48}
2025-06-04 10:20:30,021 - ibapi.client - INFO - SENDING cancelOrder b'\x00\x00\x00\x074\x001\x0048\x00'
2025-06-04 10:20:30,022 - src.order.base - INFO - Order b93dcd5a-6c13-4da4-a1c2-cb959f252803 status changed: submitted -> pending_cancel (Test cleanup)
2025-06-04 10:20:30,022 - src.order.manager - INFO - Cancelling order b93dcd5a-6c13-4da4-a1c2-cb959f252803 with broker ID 44
2025-06-04 10:20:30,022 - ibapi.client - INFO - REQUEST cancelOrder {'orderId': 44}
2025-06-04 10:20:30,022 - ibapi.client - INFO - SENDING cancelOrder b'\x00\x00\x00\x074\x001\x0044\x00'
2025-06-04 10:20:30,022 - src.order.base - INFO - Order 12f023e1-ab18-4b18-820a-099eaf21cc59 status changed: submitted -> pending_cancel (Test cleanup)
2025-06-04 10:20:30,023 - src.order.manager - INFO - Cancelling order 12f023e1-ab18-4b18-820a-099eaf21cc59 with broker ID 47
2025-06-04 10:20:30,023 - ibapi.client - INFO - REQUEST cancelOrder {'orderId': 47}
2025-06-04 10:20:30,023 - ibapi.client - INFO - SENDING cancelOrder b'\x00\x00\x00\x074\x001\x0047\x00'
2025-06-04 10:20:30,023 - src.order.base - INFO - Order 93ee78a3-7e0b-408b-a7ae-ccf9d94d13bc status changed: submitted -> pending_cancel (Test cleanup)
2025-06-04 10:20:30,023 - src.order.manager - INFO - Cancelling order 93ee78a3-7e0b-408b-a7ae-ccf9d94d13bc with broker ID 51
2025-06-04 10:20:30,023 - ibapi.client - INFO - REQUEST cancelOrder {'orderId': 51}
2025-06-04 10:20:30,024 - ibapi.client - INFO - SENDING cancelOrder b'\x00\x00\x00\x074\x001\x0051\x00'
2025-06-04 10:20:30,024 - src.order.base - INFO - Order 2725fc1e-b2b6-48d3-ab70-15974fc66ceb status changed: accepted -> pending_cancel (Test cleanup)
2025-06-04 10:20:30,024 - src.order.manager - INFO - Cancelling order 2725fc1e-b2b6-48d3-ab70-15974fc66ceb with broker ID 46
2025-06-04 10:20:30,024 - ibapi.client - INFO - REQUEST cancelOrder {'orderId': 46}
2025-06-04 10:20:30,024 - ibapi.client - INFO - SENDING cancelOrder b'\x00\x00\x00\x074\x001\x0046\x00'
2025-06-04 10:20:30,024 - src.order.base - INFO - Order d49d8c1d-de49-424b-9207-3a217c8bf99d status changed: accepted -> pending_cancel (Test cleanup)
2025-06-04 10:20:30,025 - src.order.manager - INFO - Cancelling order d49d8c1d-de49-424b-9207-3a217c8bf99d with broker ID 42
2025-06-04 10:20:30,025 - ibapi.client - INFO - REQUEST cancelOrder {'orderId': 42}
2025-06-04 10:20:30,025 - ibapi.client - INFO - SENDING cancelOrder b'\x00\x00\x00\x074\x001\x0042\x00'
2025-06-04 10:20:30,025 - src.order.base - INFO - Order f718b713-fbaa-452b-b7fe-da3c6b9075af status changed: submitted -> pending_cancel (Test cleanup)
2025-06-04 10:20:30,025 - src.order.manager - INFO - Cancelling order f718b713-fbaa-452b-b7fe-da3c6b9075af with broker ID 43
2025-06-04 10:20:30,026 - ibapi.client - INFO - REQUEST cancelOrder {'orderId': 43}
2025-06-04 10:20:30,026 - ibapi.client - INFO - SENDING cancelOrder b'\x00\x00\x00\x074\x001\x0043\x00'
2025-06-04 10:20:30,026 - src.order.base - INFO - Order c7492c23-81a9-4f46-ac4a-c1e6b0ff3b28 status changed: accepted -> pending_cancel (Test cleanup)
2025-06-04 10:20:30,026 - src.order.manager - INFO - Cancelling order c7492c23-81a9-4f46-ac4a-c1e6b0ff3b28 with broker ID 50
2025-06-04 10:20:30,026 - ibapi.client - INFO - REQUEST cancelOrder {'orderId': 50}
2025-06-04 10:20:30,026 - ibapi.client - INFO - SENDING cancelOrder b'\x00\x00\x00\x074\x001\x0050\x00'
2025-06-04 10:20:30,027 - __main__ - INFO - Disconnecting from TWS...
2025-06-04 10:20:30,027 - src.tws_connection - INFO - Disconnecting from TWS
2025-06-04 10:20:30,027 - ibapi.client - INFO - disconnecting
2025-06-04 10:20:30,055 - src.tws_connection - WARNING - Not connected to TWS
2025-06-04 10:20:30,056 - src.price.service - WARNING - TWS not connected - cannot get price
2025-06-04 10:20:30,056 - src.tws_connection - INFO - Connection thread: Message loop ended
2025-06-04 10:20:30,056 - src.rule.linked_order_actions - ERROR - Could not get price for SLV
2025-06-04 10:20:30,057 - src.rule.linked_order_actions - WARNING - Could not calculate position size for SLV
2025-06-04 10:22:24,974 - __main__ - INFO - Starting duplicate signal test...
2025-06-04 10:22:24,978 - __main__ - INFO - Connecting to TWS...
2025-06-04 10:22:24,978 - src.tws_connection - INFO - Connecting to TWS at 127.0.0.1:7497
2025-06-04 10:22:24,979 - src.tws_connection - INFO - Connection thread: Connecting to 127.0.0.1:7497 (client ID: 2)
2025-06-04 10:22:27,283 - ibapi.client - INFO - sent startApi
2025-06-04 10:22:27,283 - ibapi.client - INFO - REQUEST startApi {}
2025-06-04 10:22:27,283 - ibapi.client - INFO - SENDING startApi b'\x00\x00\x00\x0871\x002\x002\x00\x00'
2025-06-04 10:22:27,290 - ibapi.client - INFO - REQUEST startApi {}
2025-06-04 10:22:27,291 - ibapi.client - INFO - SENDING startApi b'\x00\x00\x00\x0871\x002\x002\x00\x00'
2025-06-04 10:22:27,291 - src.tws_connection - INFO - Connection thread: Socket connected, starting message loop
2025-06-04 10:22:27,315 - src.tws_connection - INFO - Requesting additional order IDs from TWS
2025-06-04 10:22:27,316 - ibapi.client - INFO - REQUEST reqIds {'numIds': 50}
2025-06-04 10:22:27,316 - ibapi.client - INFO - SENDING reqIds b'\x00\x00\x00\x078\x001\x0050\x00'
2025-06-04 10:22:27,334 - src.order.manager - INFO - OrderManager callbacks set up with TWSConnection
2025-06-04 10:22:27,334 - src.position.tracker - INFO - PositionTracker async initialization completed
2025-06-04 10:22:27,335 - src.rule.linked_order_actions - INFO - LinkedOrderConclusionManager initialized - monitoring for position conclusions
2025-06-04 10:22:27,335 - LinkedDoubleDownFillManager - INFO - LinkedDoubleDownFillManager initialized
2025-06-04 10:22:27,335 - src.rule.engine - INFO - Rule engine started
2025-06-04 10:22:27,336 - __main__ - INFO - 
================================================================================
2025-06-04 10:22:27,336 - __main__ - INFO - TEST 1: FIRST BUY SIGNAL (should create position)
2025-06-04 10:22:27,337 - __main__ - INFO - ================================================================================
2025-06-04 10:22:27,338 - ibapi.client - INFO - REQUEST reqMktData {'reqId': 1000, 'contract': 1734125064208: 0,SLV,STK,,0.0,,,SMART,,USD,,,False,,combo:, 'genericTickList': '', 'snapshot': False, 'regulatorySnapshot': False, 'mktDataOptions': []}
2025-06-04 10:22:27,339 - ibapi.client - INFO - SENDING reqMktData b'\x00\x00\x0001\x0011\x001000\x000\x00SLV\x00STK\x00\x000.0\x00\x00\x00SMART\x00\x00USD\x00\x00\x000\x00\x000\x000\x00\x00'
2025-06-04 10:22:27,386 - ibapi.wrapper - INFO - ANSWER tickReqParams {'tickerId': 1000, 'minTick': 0.01, 'bboExchange': 'a60001', 'snapshotPermissions': 3}
2025-06-04 10:22:27,387 - ibapi.wrapper - INFO - ANSWER marketDataType {'reqId': 1000, 'marketDataType': 1}
2025-06-04 10:22:27,387 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1000, 'tickType': 1, 'price': 31.34, 'attrib': 1734125065216: CanAutoExecute: 1, PastLimit: 0, PreOpen: 0}
2025-06-04 10:22:27,387 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1000, 'tickType': 0, 'size': 846}
2025-06-04 10:22:27,388 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1000, 'tickType': 2, 'price': 31.35, 'attrib': 1734123301264: CanAutoExecute: 1, PastLimit: 0, PreOpen: 0}
2025-06-04 10:22:27,389 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1000, 'tickType': 3, 'size': 1348}
2025-06-04 10:22:27,389 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1000, 'tickType': 4, 'price': 31.34, 'attrib': 1734123301264: CanAutoExecute: 0, PastLimit: 0, PreOpen: 0}
2025-06-04 10:22:27,389 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1000, 'tickType': 5, 'size': 5}
2025-06-04 10:22:27,390 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1000, 'tickType': 0, 'size': 846}
2025-06-04 10:22:27,390 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1000, 'tickType': 3, 'size': 1348}
2025-06-04 10:22:27,390 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1000, 'tickType': 5, 'size': 5}
2025-06-04 10:22:27,391 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1000, 'tickType': 8, 'size': 59297}
2025-06-04 10:22:27,391 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1000, 'tickType': 6, 'price': 31.43, 'attrib': 1734123173312: CanAutoExecute: 0, PastLimit: 0, PreOpen: 0}
2025-06-04 10:22:27,391 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1000, 'tickType': 7, 'price': 31.25, 'attrib': 1734123173312: CanAutoExecute: 0, PastLimit: 0, PreOpen: 0}
2025-06-04 10:22:27,392 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1000, 'tickType': 9, 'price': 31.44, 'attrib': 1734122962480: CanAutoExecute: 0, PastLimit: 0, PreOpen: 0}
2025-06-04 10:22:27,392 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1000, 'tickType': 14, 'price': 31.32, 'attrib': 1734123783040: CanAutoExecute: 0, PastLimit: 0, PreOpen: 0}
2025-06-04 10:22:27,395 - ibapi.wrapper - INFO - ANSWER tickString {'reqId': 1000, 'tickType': 32, 'value': 'ANJKPTVZUH'}
2025-06-04 10:22:27,395 - ibapi.wrapper - INFO - ANSWER tickString {'reqId': 1000, 'tickType': 33, 'value': 'ACNJKPTVZUH'}
2025-06-04 10:22:27,396 - ibapi.wrapper - INFO - ANSWER tickString {'reqId': 1000, 'tickType': 84, 'value': 'D'}
2025-06-04 10:22:27,396 - ibapi.wrapper - INFO - ANSWER tickString {'reqId': 1000, 'tickType': 45, 'value': '1749046944'}
2025-06-04 10:22:27,396 - ibapi.wrapper - INFO - ANSWER tickGeneric {'reqId': 1000, 'tickType': 49, 'value': 0.0}
2025-06-04 10:22:28,040 - ibapi.wrapper - INFO - ANSWER tickGeneric {'reqId': 1000, 'tickType': 49, 'value': 0.0}
2025-06-04 10:22:28,352 - ibapi.client - INFO - REQUEST cancelMktData {'reqId': 1000}
2025-06-04 10:22:28,352 - ibapi.client - INFO - SENDING cancelMktData b'\x00\x00\x00\t2\x002\x001000\x00'
2025-06-04 10:22:28,353 - src.position.sizer - INFO - BUY position size: 159 shares @ $31.34 = $4983.06 (99.7% of $5000.00 allocation)
2025-06-04 10:22:28,354 - src.order.base - INFO - Order 227657d3-ec10-4263-898d-84a42494490c status changed: created -> pending_submit (Submitting to broker)
2025-06-04 10:22:28,355 - src.order.manager - INFO - Submitting order 227657d3-ec10-4263-898d-84a42494490c to TWS
2025-06-04 10:22:28,355 - src.order.manager - INFO - Got broker order ID 36 for order 227657d3-ec10-4263-898d-84a42494490c
2025-06-04 10:22:28,355 - src.order.manager - INFO - Calling placeOrder with ID 36, contract 0,SLV,STK,,0.0,,,SMART,,USD,,,False,,combo:, order 0,0,0: MKT BUY 159@0.000000 DAY
2025-06-04 10:22:28,355 - ibapi.client - INFO - REQUEST placeOrder {'orderId': 36, 'contract': 1734123301904: 0,SLV,STK,,0.0,,,SMART,,USD,,,False,,combo:, 'order': 1734125065216: 0,0,0: MKT BUY 159@0.000000 DAY}
2025-06-04 10:22:28,356 - ibapi.client - INFO - SENDING placeOrder b'\x00\x00\x01;3\x0036\x000\x00SLV\x00STK\x00\x000.0\x00\x00\x00SMART\x00\x00USD\x00\x00\x00\x00\x00BUY\x00159\x00MKT\x000\x000\x00DAY\x00\x00\x00\x000\x00\x001\x000\x000\x000\x000\x000\x000\x000\x00\x000\x00\x00\x00\x00\x00\x00\x00\x000\x00\x00-1\x000\x00\x00\x000\x00\x00\x000\x000\x00\x000\x00\x00\x00\x00\x00\x000\x00\x00\x00\x00\x000\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x000\x00\x00\x000\x000\x00\x00\x000\x00\x000\x000\x000\x000\x00\x001.7976931348623157e+308\x001.7976931348623157e+308\x001.7976931348623157e+308\x001.7976931348623157e+308\x001.7976931348623157e+308\x000\x00\x00\x00\x001.7976931348623157e+308\x00\x00\x00\x00\x000\x000\x000\x00\x00'
2025-06-04 10:22:28,356 - src.order.manager - INFO - placeOrder called successfully for order 227657d3-ec10-4263-898d-84a42494490c
2025-06-04 10:22:28,356 - src.order.base - INFO - Order 227657d3-ec10-4263-898d-84a42494490c status changed: pending_submit -> submitted (Submitted to broker)
2025-06-04 10:22:28,358 - src.rule.linked_order_actions - INFO - Created new order context for SLV BUY position
2025-06-04 10:22:28,358 - ibapi.client - INFO - REQUEST reqMktData {'reqId': 1001, 'contract': 1734123301264: 0,SLV,STK,,0.0,,,SMART,,USD,,,False,,combo:, 'genericTickList': '', 'snapshot': False, 'regulatorySnapshot': False, 'mktDataOptions': []}
2025-06-04 10:22:28,358 - ibapi.client - INFO - SENDING reqMktData b'\x00\x00\x0001\x0011\x001001\x000\x00SLV\x00STK\x00\x000.0\x00\x00\x00SMART\x00\x00USD\x00\x00\x000\x00\x000\x000\x00\x00'
2025-06-04 10:22:28,428 - ibapi.wrapper - INFO - ANSWER tickReqParams {'tickerId': 1001, 'minTick': 0.01, 'bboExchange': 'a60001', 'snapshotPermissions': 3}
2025-06-04 10:22:28,429 - ibapi.wrapper - INFO - ANSWER marketDataType {'reqId': 1001, 'marketDataType': 1}
2025-06-04 10:22:28,429 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1001, 'tickType': 1, 'price': 31.34, 'attrib': 1734123783040: CanAutoExecute: 1, PastLimit: 0, PreOpen: 0}
2025-06-04 10:22:28,430 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1001, 'tickType': 0, 'size': 846}
2025-06-04 10:22:28,430 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1001, 'tickType': 2, 'price': 31.35, 'attrib': 1734123410256: CanAutoExecute: 1, PastLimit: 0, PreOpen: 0}
2025-06-04 10:22:28,430 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1001, 'tickType': 3, 'size': 1341}
2025-06-04 10:22:28,430 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1001, 'tickType': 4, 'price': 31.34, 'attrib': 1734123410256: CanAutoExecute: 0, PastLimit: 0, PreOpen: 0}
2025-06-04 10:22:28,431 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1001, 'tickType': 5, 'size': 5}
2025-06-04 10:22:28,431 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1001, 'tickType': 0, 'size': 846}
2025-06-04 10:22:28,431 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1001, 'tickType': 3, 'size': 1341}
2025-06-04 10:22:28,431 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1001, 'tickType': 5, 'size': 5}
2025-06-04 10:22:28,431 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1001, 'tickType': 8, 'size': 59297}
2025-06-04 10:22:28,431 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1001, 'tickType': 6, 'price': 31.43, 'attrib': 1734123639568: CanAutoExecute: 0, PastLimit: 0, PreOpen: 0}
2025-06-04 10:22:28,432 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1001, 'tickType': 7, 'price': 31.25, 'attrib': 1734123639568: CanAutoExecute: 0, PastLimit: 0, PreOpen: 0}
2025-06-04 10:22:28,432 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1001, 'tickType': 9, 'price': 31.44, 'attrib': 1734123739120: CanAutoExecute: 0, PastLimit: 0, PreOpen: 0}
2025-06-04 10:22:28,432 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1001, 'tickType': 14, 'price': 31.32, 'attrib': 1734123739120: CanAutoExecute: 0, PastLimit: 0, PreOpen: 0}
2025-06-04 10:22:28,432 - ibapi.wrapper - INFO - ANSWER tickString {'reqId': 1001, 'tickType': 32, 'value': 'ANJKPTVZUH'}
2025-06-04 10:22:28,433 - ibapi.wrapper - INFO - ANSWER tickString {'reqId': 1001, 'tickType': 33, 'value': 'ACNJKPTVZUH'}
2025-06-04 10:22:28,433 - ibapi.wrapper - INFO - ANSWER tickString {'reqId': 1001, 'tickType': 84, 'value': 'D'}
2025-06-04 10:22:28,433 - ibapi.wrapper - INFO - ANSWER tickString {'reqId': 1001, 'tickType': 45, 'value': '1749046944'}
2025-06-04 10:22:28,433 - ibapi.wrapper - INFO - ANSWER tickGeneric {'reqId': 1001, 'tickType': 49, 'value': 0.0}
2025-06-04 10:22:28,485 - src.tws_connection - INFO - Open Order - ID: 36, Symbol: SLV, Action: BUY, Quantity: 159.0
2025-06-04 10:22:28,486 - ibapi.client - INFO - REQUEST cancelMktData {'reqId': 1001}
2025-06-04 10:22:28,488 - ibapi.client - INFO - SENDING cancelMktData b'\x00\x00\x00\t2\x002\x001001\x00'
2025-06-04 10:22:28,489 - src.rule.linked_order_actions - INFO - Percentage-based stop: SLV stop at $30.40 (3.0%)
2025-06-04 10:22:28,489 - src.order.base - INFO - Order c6c1d7cd-eace-423b-a750-9f0dd06c1fbd status changed: created -> pending_submit (Submitting to broker)
2025-06-04 10:22:28,489 - src.order.manager - INFO - Submitting order c6c1d7cd-eace-423b-a750-9f0dd06c1fbd to TWS
2025-06-04 10:22:28,490 - src.order.manager - INFO - Got broker order ID 37 for order c6c1d7cd-eace-423b-a750-9f0dd06c1fbd
2025-06-04 10:22:28,490 - src.order.manager - INFO - Calling placeOrder with ID 37, contract 0,SLV,STK,,0.0,,,SMART,,USD,,,False,,combo:, order 0,0,0: STP SELL 159@0.000000 DAY
2025-06-04 10:22:28,491 - ibapi.client - INFO - REQUEST placeOrder {'orderId': 37, 'contract': 1734125092944: 0,SLV,STK,,0.0,,,SMART,,USD,,,False,,combo:, 'order': 1734123304144: 0,0,0: STP SELL 159@0.000000 DAY}
2025-06-04 10:22:28,491 - ibapi.client - INFO - SENDING placeOrder b'\x00\x00\x01?3\x0037\x000\x00SLV\x00STK\x00\x000.0\x00\x00\x00SMART\x00\x00USD\x00\x00\x00\x00\x00SELL\x00159\x00STP\x000\x0030.4\x00DAY\x00\x00\x00\x000\x00\x001\x000\x000\x000\x000\x000\x000\x000\x00\x000\x00\x00\x00\x00\x00\x00\x00\x000\x00\x00-1\x000\x00\x00\x000\x00\x00\x000\x000\x00\x000\x00\x00\x00\x00\x00\x000\x00\x00\x00\x00\x000\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x000\x00\x00\x000\x000\x00\x00\x000\x00\x000\x000\x000\x000\x00\x001.7976931348623157e+308\x001.7976931348623157e+308\x001.7976931348623157e+308\x001.7976931348623157e+308\x001.7976931348623157e+308\x000\x00\x00\x00\x001.7976931348623157e+308\x00\x00\x00\x00\x000\x000\x000\x00\x00'
2025-06-04 10:22:28,491 - src.order.manager - INFO - placeOrder called successfully for order c6c1d7cd-eace-423b-a750-9f0dd06c1fbd
2025-06-04 10:22:28,492 - src.order.base - INFO - Order c6c1d7cd-eace-423b-a750-9f0dd06c1fbd status changed: pending_submit -> submitted (Submitted to broker)
2025-06-04 10:22:28,492 - src.rule.linked_order_actions - INFO - Auto-created BUY stop loss c6c1d7cd-eace-423b-a750-9f0dd06c1fbd at $30.40
2025-06-04 10:22:28,492 - src.rule.linked_order_actions - INFO - Percentage-based target: SLV target at $33.22 (6.0%)
2025-06-04 10:22:28,492 - src.order.base - INFO - Order e11358c4-b5e7-4cdc-9c7c-1aa89e6f2b83 status changed: created -> pending_submit (Submitting to broker)
2025-06-04 10:22:28,493 - src.order.manager - INFO - Submitting order e11358c4-b5e7-4cdc-9c7c-1aa89e6f2b83 to TWS
2025-06-04 10:22:28,493 - src.order.manager - INFO - Got broker order ID 38 for order e11358c4-b5e7-4cdc-9c7c-1aa89e6f2b83
2025-06-04 10:22:28,493 - src.order.manager - INFO - Calling placeOrder with ID 38, contract 0,SLV,STK,,0.0,,,SMART,,USD,,,False,,combo:, order 0,0,0: LMT SELL 159@33.220000 DAY
2025-06-04 10:22:28,493 - ibapi.client - INFO - REQUEST placeOrder {'orderId': 38, 'contract': 1734123798608: 0,SLV,STK,,0.0,,,SMART,,USD,,,False,,combo:, 'order': 1734123304784: 0,0,0: LMT SELL 159@33.220000 DAY}
2025-06-04 10:22:28,494 - ibapi.client - INFO - SENDING placeOrder b'\x00\x00\x01@3\x0038\x000\x00SLV\x00STK\x00\x000.0\x00\x00\x00SMART\x00\x00USD\x00\x00\x00\x00\x00SELL\x00159\x00LMT\x0033.22\x000\x00DAY\x00\x00\x00\x000\x00\x001\x000\x000\x000\x000\x000\x000\x000\x00\x000\x00\x00\x00\x00\x00\x00\x00\x000\x00\x00-1\x000\x00\x00\x000\x00\x00\x000\x000\x00\x000\x00\x00\x00\x00\x00\x000\x00\x00\x00\x00\x000\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x000\x00\x00\x000\x000\x00\x00\x000\x00\x000\x000\x000\x000\x00\x001.7976931348623157e+308\x001.7976931348623157e+308\x001.7976931348623157e+308\x001.7976931348623157e+308\x001.7976931348623157e+308\x000\x00\x00\x00\x001.7976931348623157e+308\x00\x00\x00\x00\x000\x000\x000\x00\x00'
2025-06-04 10:22:28,494 - src.order.manager - INFO - placeOrder called successfully for order e11358c4-b5e7-4cdc-9c7c-1aa89e6f2b83
2025-06-04 10:22:28,494 - src.order.base - INFO - Order e11358c4-b5e7-4cdc-9c7c-1aa89e6f2b83 status changed: pending_submit -> submitted (Submitted to broker)
2025-06-04 10:22:28,494 - src.rule.linked_order_actions - INFO - Auto-created BUY take profit e11358c4-b5e7-4cdc-9c7c-1aa89e6f2b83 at $33.22
2025-06-04 10:22:28,494 - src.rule.linked_order_actions - INFO - Starting double down order creation for SLV
2025-06-04 10:22:28,526 - src.order.base - INFO - Order 227657d3-ec10-4263-898d-84a42494490c status changed: submitted -> filled (Order fully filled)
2025-06-04 10:22:28,527 - src.order.base - INFO - Order 227657d3-ec10-4263-898d-84a42494490c filled: 159.0 @ 31.35 (159.0/159)
2025-06-04 10:22:28,526 - src.tws_connection - INFO - Open Order - ID: 36, Symbol: SLV, Action: BUY, Quantity: 159.0
2025-06-04 10:22:28,528 - src.tws_connection - INFO - Open Order - ID: 36, Symbol: SLV, Action: BUY, Quantity: 159.0
2025-06-04 10:22:28,529 - ibapi.wrapper - INFO - ANSWER commissionReport {'commissionReport': 1734125065552: ExecId: 00025b49.68404ae5.01.01, Commission: 1.005565, Currency: USD, RealizedPnL: , Yield: , YieldRedemptionDate: 0}
2025-06-04 10:22:28,646 - src.tws_connection - INFO - Open Order - ID: 37, Symbol: SLV, Action: SELL, Quantity: 159.0
2025-06-04 10:22:28,647 - src.order.base - INFO - Order c6c1d7cd-eace-423b-a750-9f0dd06c1fbd status changed: submitted -> accepted (IB status: PreSubmitted)
2025-06-04 10:22:28,709 - src.tws_connection - INFO - Open Order - ID: 38, Symbol: SLV, Action: SELL, Quantity: 159.0
2025-06-04 10:22:29,001 - src.rule.linked_order_actions - INFO - Found 1 stop orders for SLV: ['c6c1d7cd-eace-423b-a750-9f0dd06c1fbd']
2025-06-04 10:22:29,002 - src.rule.linked_order_actions - INFO - Executing double down action for SLV
2025-06-04 10:22:29,002 - ibapi.client - INFO - REQUEST reqMktData {'reqId': 1002, 'contract': 1734123639568: 0,SLV,STK,,0.0,,,SMART,,USD,,,False,,combo:, 'genericTickList': '', 'snapshot': False, 'regulatorySnapshot': False, 'mktDataOptions': []}
2025-06-04 10:22:29,003 - ibapi.client - INFO - SENDING reqMktData b'\x00\x00\x0001\x0011\x001002\x000\x00SLV\x00STK\x00\x000.0\x00\x00\x00SMART\x00\x00USD\x00\x00\x000\x00\x000\x000\x00\x00'
2025-06-04 10:22:29,037 - ibapi.wrapper - INFO - ANSWER tickReqParams {'tickerId': 1002, 'minTick': 0.01, 'bboExchange': 'a60001', 'snapshotPermissions': 3}
2025-06-04 10:22:29,038 - ibapi.wrapper - INFO - ANSWER marketDataType {'reqId': 1002, 'marketDataType': 1}
2025-06-04 10:22:29,038 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1002, 'tickType': 1, 'price': 31.34, 'attrib': 1734125080720: CanAutoExecute: 1, PastLimit: 0, PreOpen: 0}
2025-06-04 10:22:29,039 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1002, 'tickType': 0, 'size': 853}
2025-06-04 10:22:29,039 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1002, 'tickType': 2, 'price': 31.35, 'attrib': 1734124148048: CanAutoExecute: 1, PastLimit: 0, PreOpen: 0}
2025-06-04 10:22:29,039 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1002, 'tickType': 3, 'size': 1335}
2025-06-04 10:22:29,040 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1002, 'tickType': 4, 'price': 31.34, 'attrib': 1734124148048: CanAutoExecute: 0, PastLimit: 0, PreOpen: 0}
2025-06-04 10:22:29,040 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1002, 'tickType': 5, 'size': 5}
2025-06-04 10:22:29,040 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1002, 'tickType': 0, 'size': 853}
2025-06-04 10:22:29,040 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1002, 'tickType': 3, 'size': 1335}
2025-06-04 10:22:29,041 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1002, 'tickType': 5, 'size': 5}
2025-06-04 10:22:29,041 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1002, 'tickType': 8, 'size': 59297}
2025-06-04 10:22:29,041 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1002, 'tickType': 6, 'price': 31.43, 'attrib': 1734123368208: CanAutoExecute: 0, PastLimit: 0, PreOpen: 0}
2025-06-04 10:22:29,042 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1002, 'tickType': 7, 'price': 31.25, 'attrib': 1734123368208: CanAutoExecute: 0, PastLimit: 0, PreOpen: 0}
2025-06-04 10:22:29,042 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1002, 'tickType': 9, 'price': 31.44, 'attrib': 1734123969328: CanAutoExecute: 0, PastLimit: 0, PreOpen: 0}
2025-06-04 10:22:29,043 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1002, 'tickType': 14, 'price': 31.32, 'attrib': 1734123969328: CanAutoExecute: 0, PastLimit: 0, PreOpen: 0}
2025-06-04 10:22:29,043 - ibapi.wrapper - INFO - ANSWER tickString {'reqId': 1002, 'tickType': 32, 'value': 'ANJKPTVZUH'}
2025-06-04 10:22:29,043 - ibapi.wrapper - INFO - ANSWER tickString {'reqId': 1002, 'tickType': 33, 'value': 'ACNJKPTVZUH'}
2025-06-04 10:22:29,044 - ibapi.wrapper - INFO - ANSWER tickString {'reqId': 1002, 'tickType': 84, 'value': 'D'}
2025-06-04 10:22:29,044 - ibapi.wrapper - INFO - ANSWER tickString {'reqId': 1002, 'tickType': 45, 'value': '1749046944'}
2025-06-04 10:22:29,044 - ibapi.wrapper - INFO - ANSWER tickGeneric {'reqId': 1002, 'tickType': 49, 'value': 0.0}
2025-06-04 10:22:29,461 - ibapi.wrapper - INFO - ANSWER tickGeneric {'reqId': 1002, 'tickType': 49, 'value': 0.0}
2025-06-04 10:22:29,724 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1002, 'tickType': 8, 'size': 59383}
2025-06-04 10:22:29,725 - ibapi.wrapper - INFO - ANSWER tickString {'reqId': 1002, 'tickType': 45, 'value': '1749046949'}
2025-06-04 10:22:29,725 - ibapi.wrapper - INFO - ANSWER tickString {'reqId': 1002, 'tickType': 84, 'value': 'B'}
2025-06-04 10:22:29,726 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1002, 'tickType': 4, 'price': 31.35, 'attrib': 1734123606608: CanAutoExecute: 0, PastLimit: 0, PreOpen: 0}
2025-06-04 10:22:29,726 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1002, 'tickType': 5, 'size': 62}
2025-06-04 10:22:29,726 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1002, 'tickType': 5, 'size': 62}
2025-06-04 10:22:30,217 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1002, 'tickType': 8, 'size': 59384}
2025-06-04 10:22:30,218 - ibapi.wrapper - INFO - ANSWER tickString {'reqId': 1002, 'tickType': 84, 'value': 'D'}
2025-06-04 10:22:30,222 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1002, 'tickType': 5, 'size': 1}
2025-06-04 10:22:30,224 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1002, 'tickType': 0, 'size': 956}
2025-06-04 10:22:30,225 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1002, 'tickType': 3, 'size': 1284}
2025-06-04 10:22:30,356 - ibapi.client - INFO - REQUEST cancelMktData {'reqId': 1002}
2025-06-04 10:22:30,357 - ibapi.client - INFO - SENDING cancelMktData b'\x00\x00\x00\t2\x002\x001002\x00'
2025-06-04 10:22:30,365 - src.rule.linked_order_actions - INFO - Using ATR-based stop distance for SLV: 0.0814
2025-06-04 10:22:30,367 - src.rule.linked_order_actions - INFO - Double down calc for SLV (BUY): current=$31.35, stop_distance=$0.08, dd_distance=$0.04, dd_price=$31.31, original_qty=159, dd_qty=159
2025-06-04 10:22:30,367 - src.order.base - INFO - Order 17736f52-be20-49aa-972d-9c96dc682ada status changed: created -> pending_submit (Submitting to broker)
2025-06-04 10:22:30,368 - src.order.manager - INFO - Submitting order 17736f52-be20-49aa-972d-9c96dc682ada to TWS
2025-06-04 10:22:30,368 - src.order.manager - INFO - Got broker order ID 39 for order 17736f52-be20-49aa-972d-9c96dc682ada
2025-06-04 10:22:30,369 - src.order.manager - INFO - Calling placeOrder with ID 39, contract 0,SLV,STK,,0.0,,,SMART,,USD,,,False,,combo:, order 0,0,0: LMT BUY 159@31.310000 DAY
2025-06-04 10:22:30,369 - ibapi.client - INFO - REQUEST placeOrder {'orderId': 39, 'contract': 1734123639568: 0,SLV,STK,,0.0,,,SMART,,USD,,,False,,combo:, 'order': 1734123302864: 0,0,0: LMT BUY 159@31.310000 DAY}
2025-06-04 10:22:30,370 - ibapi.client - INFO - SENDING placeOrder b'\x00\x00\x01?3\x0039\x000\x00SLV\x00STK\x00\x000.0\x00\x00\x00SMART\x00\x00USD\x00\x00\x00\x00\x00BUY\x00159\x00LMT\x0031.31\x000\x00DAY\x00\x00\x00\x000\x00\x001\x000\x000\x000\x000\x000\x000\x000\x00\x000\x00\x00\x00\x00\x00\x00\x00\x000\x00\x00-1\x000\x00\x00\x000\x00\x00\x000\x000\x00\x000\x00\x00\x00\x00\x00\x000\x00\x00\x00\x00\x000\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x000\x00\x00\x000\x000\x00\x00\x000\x00\x000\x000\x000\x000\x00\x001.7976931348623157e+308\x001.7976931348623157e+308\x001.7976931348623157e+308\x001.7976931348623157e+308\x001.7976931348623157e+308\x000\x00\x00\x00\x001.7976931348623157e+308\x00\x00\x00\x00\x000\x000\x000\x00\x00'
2025-06-04 10:22:30,370 - src.order.manager - INFO - placeOrder called successfully for order 17736f52-be20-49aa-972d-9c96dc682ada
2025-06-04 10:22:30,373 - src.order.base - INFO - Order 17736f52-be20-49aa-972d-9c96dc682ada status changed: pending_submit -> submitted (Submitted to broker)
2025-06-04 10:22:30,374 - src.rule.linked_order_actions - INFO - Created BUY double down order 'doubledown1' for SLV: 159 shares @ $31.31
2025-06-04 10:22:30,374 - src.rule.linked_order_actions - INFO - Auto-created double down order for SLV
2025-06-04 10:22:30,375 - src.rule.linked_order_actions - INFO - Created and linked BUY main order 227657d3-ec10-4263-898d-84a42494490c for SLV
2025-06-04 10:22:30,379 - __main__ - INFO - 
================================================================================
2025-06-04 10:22:30,379 - __main__ - INFO - TEST 2: SECOND BUY SIGNAL (should be ignored)
2025-06-04 10:22:30,379 - __main__ - INFO - ================================================================================
2025-06-04 10:22:30,380 - __main__ - INFO - Active orders before second signal: 3
2025-06-04 10:22:30,380 - ibapi.client - INFO - REQUEST reqMktData {'reqId': 1003, 'contract': 1734123639568: 0,SLV,STK,,0.0,,,SMART,,USD,,,False,,combo:, 'genericTickList': '', 'snapshot': False, 'regulatorySnapshot': False, 'mktDataOptions': []}
2025-06-04 10:22:30,382 - ibapi.client - INFO - SENDING reqMktData b'\x00\x00\x0001\x0011\x001003\x000\x00SLV\x00STK\x00\x000.0\x00\x00\x00SMART\x00\x00USD\x00\x00\x000\x00\x000\x000\x00\x00'
2025-06-04 10:22:30,449 - ibapi.wrapper - INFO - ANSWER tickReqParams {'tickerId': 1003, 'minTick': 0.01, 'bboExchange': 'a60001', 'snapshotPermissions': 3}
2025-06-04 10:22:30,449 - ibapi.wrapper - INFO - ANSWER marketDataType {'reqId': 1003, 'marketDataType': 1}
2025-06-04 10:22:30,449 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1003, 'tickType': 1, 'price': 31.34, 'attrib': 1734125051984: CanAutoExecute: 1, PastLimit: 0, PreOpen: 0}
2025-06-04 10:22:30,450 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1003, 'tickType': 0, 'size': 956}
2025-06-04 10:22:30,450 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1003, 'tickType': 2, 'price': 31.35, 'attrib': 1734125051984: CanAutoExecute: 1, PastLimit: 0, PreOpen: 0}
2025-06-04 10:22:30,450 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1003, 'tickType': 3, 'size': 1284}
2025-06-04 10:22:30,450 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1003, 'tickType': 4, 'price': 31.35, 'attrib': 1734124545632: CanAutoExecute: 0, PastLimit: 0, PreOpen: 0}
2025-06-04 10:22:30,450 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1003, 'tickType': 5, 'size': 1}
2025-06-04 10:22:30,450 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1003, 'tickType': 0, 'size': 956}
2025-06-04 10:22:30,451 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1003, 'tickType': 3, 'size': 1284}
2025-06-04 10:22:30,451 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1003, 'tickType': 5, 'size': 1}
2025-06-04 10:22:30,451 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1003, 'tickType': 8, 'size': 59384}
2025-06-04 10:22:30,451 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1003, 'tickType': 6, 'price': 31.43, 'attrib': 1734124545632: CanAutoExecute: 0, PastLimit: 0, PreOpen: 0}
2025-06-04 10:22:30,451 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1003, 'tickType': 7, 'price': 31.25, 'attrib': 1734124934576: CanAutoExecute: 0, PastLimit: 0, PreOpen: 0}
2025-06-04 10:22:30,451 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1003, 'tickType': 9, 'price': 31.44, 'attrib': 1734124934576: CanAutoExecute: 0, PastLimit: 0, PreOpen: 0}
2025-06-04 10:22:30,451 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1003, 'tickType': 14, 'price': 31.32, 'attrib': 1734124934576: CanAutoExecute: 0, PastLimit: 0, PreOpen: 0}
2025-06-04 10:22:30,452 - ibapi.wrapper - INFO - ANSWER tickString {'reqId': 1003, 'tickType': 32, 'value': 'ANJKPTVZUH'}
2025-06-04 10:22:30,452 - ibapi.wrapper - INFO - ANSWER tickString {'reqId': 1003, 'tickType': 33, 'value': 'ANJKPTVZUH'}
2025-06-04 10:22:30,452 - ibapi.wrapper - INFO - ANSWER tickString {'reqId': 1003, 'tickType': 84, 'value': 'D'}
2025-06-04 10:22:30,452 - ibapi.wrapper - INFO - ANSWER tickString {'reqId': 1003, 'tickType': 45, 'value': '1749046949'}
2025-06-04 10:22:30,452 - ibapi.wrapper - INFO - ANSWER tickGeneric {'reqId': 1003, 'tickType': 49, 'value': 0.0}
2025-06-04 10:22:30,501 - src.tws_connection - INFO - Open Order - ID: 39, Symbol: SLV, Action: BUY, Quantity: 159.0
2025-06-04 10:22:30,502 - ibapi.client - INFO - REQUEST cancelMktData {'reqId': 1003}
2025-06-04 10:22:30,502 - ibapi.client - INFO - SENDING cancelMktData b'\x00\x00\x00\t2\x002\x001003\x00'
2025-06-04 10:22:30,503 - src.position.sizer - INFO - BUY position size: 159 shares @ $31.35 = $4984.65 (99.7% of $5000.00 allocation)
2025-06-04 10:22:30,503 - src.order.base - INFO - Order 8b986eac-1562-45e7-9112-595742e3eb21 status changed: created -> pending_submit (Submitting to broker)
2025-06-04 10:22:30,504 - src.order.manager - INFO - Submitting order 8b986eac-1562-45e7-9112-595742e3eb21 to TWS
2025-06-04 10:22:30,505 - src.order.manager - INFO - Got broker order ID 40 for order 8b986eac-1562-45e7-9112-595742e3eb21
2025-06-04 10:22:30,505 - src.order.manager - INFO - Calling placeOrder with ID 40, contract 0,SLV,STK,,0.0,,,SMART,,USD,,,False,,combo:, order 0,0,0: MKT BUY 159@0.000000 DAY
2025-06-04 10:22:30,506 - ibapi.client - INFO - REQUEST placeOrder {'orderId': 40, 'contract': 1734123638128: 0,SLV,STK,,0.0,,,SMART,,USD,,,False,,combo:, 'order': 1734123302224: 0,0,0: MKT BUY 159@0.000000 DAY}
2025-06-04 10:22:30,506 - ibapi.client - INFO - SENDING placeOrder b'\x00\x00\x01;3\x0040\x000\x00SLV\x00STK\x00\x000.0\x00\x00\x00SMART\x00\x00USD\x00\x00\x00\x00\x00BUY\x00159\x00MKT\x000\x000\x00DAY\x00\x00\x00\x000\x00\x001\x000\x000\x000\x000\x000\x000\x000\x00\x000\x00\x00\x00\x00\x00\x00\x00\x000\x00\x00-1\x000\x00\x00\x000\x00\x00\x000\x000\x00\x000\x00\x00\x00\x00\x00\x000\x00\x00\x00\x00\x000\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x000\x00\x00\x000\x000\x00\x00\x000\x00\x000\x000\x000\x000\x00\x001.7976931348623157e+308\x001.7976931348623157e+308\x001.7976931348623157e+308\x001.7976931348623157e+308\x001.7976931348623157e+308\x000\x00\x00\x00\x001.7976931348623157e+308\x00\x00\x00\x00\x000\x000\x000\x00\x00'
2025-06-04 10:22:30,506 - src.order.manager - INFO - placeOrder called successfully for order 8b986eac-1562-45e7-9112-595742e3eb21
2025-06-04 10:22:30,506 - src.order.base - INFO - Order 8b986eac-1562-45e7-9112-595742e3eb21 status changed: pending_submit -> submitted (Submitted to broker)
2025-06-04 10:22:30,507 - src.rule.linked_order_actions - INFO - Created new order context for SLV BUY position
2025-06-04 10:22:30,509 - ibapi.client - INFO - REQUEST reqMktData {'reqId': 1004, 'contract': 1734123638128: 0,SLV,STK,,0.0,,,SMART,,USD,,,False,,combo:, 'genericTickList': '', 'snapshot': False, 'regulatorySnapshot': False, 'mktDataOptions': []}
2025-06-04 10:22:30,509 - ibapi.client - INFO - SENDING reqMktData b'\x00\x00\x0001\x0011\x001004\x000\x00SLV\x00STK\x00\x000.0\x00\x00\x00SMART\x00\x00USD\x00\x00\x000\x00\x000\x000\x00\x00'
2025-06-04 10:22:30,574 - ibapi.wrapper - INFO - ANSWER tickReqParams {'tickerId': 1004, 'minTick': 0.01, 'bboExchange': 'a60001', 'snapshotPermissions': 3}
2025-06-04 10:22:30,575 - ibapi.wrapper - INFO - ANSWER marketDataType {'reqId': 1004, 'marketDataType': 1}
2025-06-04 10:22:30,575 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1004, 'tickType': 1, 'price': 31.34, 'attrib': 1734124934864: CanAutoExecute: 1, PastLimit: 0, PreOpen: 0}
2025-06-04 10:22:30,576 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1004, 'tickType': 0, 'size': 956}
2025-06-04 10:22:30,576 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1004, 'tickType': 2, 'price': 31.35, 'attrib': 1734124934864: CanAutoExecute: 1, PastLimit: 0, PreOpen: 0}
2025-06-04 10:22:30,576 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1004, 'tickType': 3, 'size': 1284}
2025-06-04 10:22:30,576 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1004, 'tickType': 4, 'price': 31.35, 'attrib': 1734124934864: CanAutoExecute: 0, PastLimit: 0, PreOpen: 0}
2025-06-04 10:22:30,576 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1004, 'tickType': 5, 'size': 1}
2025-06-04 10:22:30,577 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1004, 'tickType': 0, 'size': 956}
2025-06-04 10:22:30,577 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1004, 'tickType': 3, 'size': 1284}
2025-06-04 10:22:30,577 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1004, 'tickType': 5, 'size': 1}
2025-06-04 10:22:30,577 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1004, 'tickType': 8, 'size': 59384}
2025-06-04 10:22:30,577 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1004, 'tickType': 6, 'price': 31.43, 'attrib': 1734124934864: CanAutoExecute: 0, PastLimit: 0, PreOpen: 0}
2025-06-04 10:22:30,578 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1004, 'tickType': 7, 'price': 31.25, 'attrib': 1734124934864: CanAutoExecute: 0, PastLimit: 0, PreOpen: 0}
2025-06-04 10:22:30,578 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1004, 'tickType': 9, 'price': 31.44, 'attrib': 1734124934864: CanAutoExecute: 0, PastLimit: 0, PreOpen: 0}
2025-06-04 10:22:30,578 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1004, 'tickType': 14, 'price': 31.32, 'attrib': 1734124934864: CanAutoExecute: 0, PastLimit: 0, PreOpen: 0}
2025-06-04 10:22:30,578 - ibapi.wrapper - INFO - ANSWER tickString {'reqId': 1004, 'tickType': 32, 'value': 'ANJKPTVZUH'}
2025-06-04 10:22:30,578 - ibapi.wrapper - INFO - ANSWER tickString {'reqId': 1004, 'tickType': 33, 'value': 'ANJKPTVZUH'}
2025-06-04 10:22:30,579 - ibapi.wrapper - INFO - ANSWER tickString {'reqId': 1004, 'tickType': 84, 'value': 'D'}
2025-06-04 10:22:30,579 - ibapi.wrapper - INFO - ANSWER tickString {'reqId': 1004, 'tickType': 45, 'value': '1749046949'}
2025-06-04 10:22:30,579 - ibapi.wrapper - INFO - ANSWER tickGeneric {'reqId': 1004, 'tickType': 49, 'value': 0.0}
2025-06-04 10:22:30,661 - ibapi.wrapper - INFO - ANSWER tickGeneric {'reqId': 1004, 'tickType': 49, 'value': 0.0}
2025-06-04 10:22:30,704 - src.tws_connection - INFO - Open Order - ID: 40, Symbol: SLV, Action: BUY, Quantity: 159.0
2025-06-04 10:22:30,704 - ibapi.client - INFO - REQUEST cancelMktData {'reqId': 1004}
2025-06-04 10:22:30,705 - ibapi.client - INFO - SENDING cancelMktData b'\x00\x00\x00\t2\x002\x001004\x00'
2025-06-04 10:22:30,705 - src.rule.linked_order_actions - INFO - Percentage-based stop: SLV stop at $30.41 (3.0%)
2025-06-04 10:22:30,706 - src.order.base - INFO - Order 84c5ae35-646b-4abb-ad52-4e36fee8eaa1 status changed: created -> pending_submit (Submitting to broker)
2025-06-04 10:22:30,706 - src.order.manager - INFO - Submitting order 84c5ae35-646b-4abb-ad52-4e36fee8eaa1 to TWS
2025-06-04 10:22:30,706 - src.order.manager - INFO - Got broker order ID 41 for order 84c5ae35-646b-4abb-ad52-4e36fee8eaa1
2025-06-04 10:22:30,706 - src.order.manager - INFO - Calling placeOrder with ID 41, contract 0,SLV,STK,,0.0,,,SMART,,USD,,,False,,combo:, order 0,0,0: STP SELL 159@0.000000 DAY
2025-06-04 10:22:30,707 - ibapi.client - INFO - REQUEST placeOrder {'orderId': 41, 'contract': 1734123638128: 0,SLV,STK,,0.0,,,SMART,,USD,,,False,,combo:, 'order': 1734123302864: 0,0,0: STP SELL 159@0.000000 DAY}
2025-06-04 10:22:30,707 - ibapi.client - INFO - SENDING placeOrder b'\x00\x00\x01@3\x0041\x000\x00SLV\x00STK\x00\x000.0\x00\x00\x00SMART\x00\x00USD\x00\x00\x00\x00\x00SELL\x00159\x00STP\x000\x0030.41\x00DAY\x00\x00\x00\x000\x00\x001\x000\x000\x000\x000\x000\x000\x000\x00\x000\x00\x00\x00\x00\x00\x00\x00\x000\x00\x00-1\x000\x00\x00\x000\x00\x00\x000\x000\x00\x000\x00\x00\x00\x00\x00\x000\x00\x00\x00\x00\x000\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x000\x00\x00\x000\x000\x00\x00\x000\x00\x000\x000\x000\x000\x00\x001.7976931348623157e+308\x001.7976931348623157e+308\x001.7976931348623157e+308\x001.7976931348623157e+308\x001.7976931348623157e+308\x000\x00\x00\x00\x001.7976931348623157e+308\x00\x00\x00\x00\x000\x000\x000\x00\x00'
2025-06-04 10:22:30,707 - src.order.manager - INFO - placeOrder called successfully for order 84c5ae35-646b-4abb-ad52-4e36fee8eaa1
2025-06-04 10:22:30,707 - src.order.base - INFO - Order 84c5ae35-646b-4abb-ad52-4e36fee8eaa1 status changed: pending_submit -> submitted (Submitted to broker)
2025-06-04 10:22:30,708 - src.rule.linked_order_actions - INFO - Auto-created BUY stop loss 84c5ae35-646b-4abb-ad52-4e36fee8eaa1 at $30.41
2025-06-04 10:22:30,708 - src.rule.linked_order_actions - INFO - Percentage-based target: SLV target at $33.23 (6.0%)
2025-06-04 10:22:30,708 - src.order.base - INFO - Order 1f56f636-3170-4d8a-b765-ff8be587ce24 status changed: created -> pending_submit (Submitting to broker)
2025-06-04 10:22:30,708 - src.order.manager - INFO - Submitting order 1f56f636-3170-4d8a-b765-ff8be587ce24 to TWS
2025-06-04 10:22:30,709 - src.order.manager - INFO - Got broker order ID 42 for order 1f56f636-3170-4d8a-b765-ff8be587ce24
2025-06-04 10:22:30,709 - src.order.manager - INFO - Calling placeOrder with ID 42, contract 0,SLV,STK,,0.0,,,SMART,,USD,,,False,,combo:, order 0,0,0: LMT SELL 159@33.230000 DAY
2025-06-04 10:22:30,709 - ibapi.client - INFO - REQUEST placeOrder {'orderId': 42, 'contract': 1734123638128: 0,SLV,STK,,0.0,,,SMART,,USD,,,False,,combo:, 'order': 1734123304784: 0,0,0: LMT SELL 159@33.230000 DAY}
2025-06-04 10:22:30,710 - ibapi.client - INFO - SENDING placeOrder b'\x00\x00\x01@3\x0042\x000\x00SLV\x00STK\x00\x000.0\x00\x00\x00SMART\x00\x00USD\x00\x00\x00\x00\x00SELL\x00159\x00LMT\x0033.23\x000\x00DAY\x00\x00\x00\x000\x00\x001\x000\x000\x000\x000\x000\x000\x000\x00\x000\x00\x00\x00\x00\x00\x00\x00\x000\x00\x00-1\x000\x00\x00\x000\x00\x00\x000\x000\x00\x000\x00\x00\x00\x00\x00\x000\x00\x00\x00\x00\x000\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x000\x00\x00\x000\x000\x00\x00\x000\x00\x000\x000\x000\x000\x00\x001.7976931348623157e+308\x001.7976931348623157e+308\x001.7976931348623157e+308\x001.7976931348623157e+308\x001.7976931348623157e+308\x000\x00\x00\x00\x001.7976931348623157e+308\x00\x00\x00\x00\x000\x000\x000\x00\x00'
2025-06-04 10:22:30,710 - src.order.manager - INFO - placeOrder called successfully for order 1f56f636-3170-4d8a-b765-ff8be587ce24
2025-06-04 10:22:30,710 - src.order.base - INFO - Order 1f56f636-3170-4d8a-b765-ff8be587ce24 status changed: pending_submit -> submitted (Submitted to broker)
2025-06-04 10:22:30,710 - src.rule.linked_order_actions - INFO - Auto-created BUY take profit 1f56f636-3170-4d8a-b765-ff8be587ce24 at $33.23
2025-06-04 10:22:30,710 - src.rule.linked_order_actions - INFO - Starting double down order creation for SLV
2025-06-04 10:22:30,711 - src.order.base - INFO - Order 8b986eac-1562-45e7-9112-595742e3eb21 status changed: submitted -> accepted (IB status: PreSubmitted)
2025-06-04 10:22:30,744 - src.order.base - INFO - Order 8b986eac-1562-45e7-9112-595742e3eb21 status changed: accepted -> filled (Order fully filled)
2025-06-04 10:22:30,749 - src.order.base - INFO - Order 8b986eac-1562-45e7-9112-595742e3eb21 filled: 159.0 @ 31.35 (159.0/159)
2025-06-04 10:22:30,749 - src.tws_connection - INFO - Open Order - ID: 40, Symbol: SLV, Action: BUY, Quantity: 159.0
2025-06-04 10:22:30,750 - src.tws_connection - INFO - Open Order - ID: 40, Symbol: SLV, Action: BUY, Quantity: 159.0
2025-06-04 10:22:30,751 - ibapi.wrapper - INFO - ANSWER commissionReport {'commissionReport': 1734123302864: ExecId: 00025b49.68404ae9.01.01, Commission: 1.005565, Currency: USD, RealizedPnL: , Yield: , YieldRedemptionDate: 0}
2025-06-04 10:22:30,758 - src.tws_connection - INFO - Open Order - ID: 40, Symbol: SLV, Action: BUY, Quantity: 159.0
2025-06-04 10:22:30,825 - src.tws_connection - INFO - Open Order - ID: 41, Symbol: SLV, Action: SELL, Quantity: 159.0
2025-06-04 10:22:30,826 - src.order.base - INFO - Order 84c5ae35-646b-4abb-ad52-4e36fee8eaa1 status changed: submitted -> accepted (IB status: PreSubmitted)
2025-06-04 10:22:30,877 - src.tws_connection - INFO - Open Order - ID: 42, Symbol: SLV, Action: SELL, Quantity: 159.0
2025-06-04 10:22:31,218 - src.rule.linked_order_actions - INFO - Found 1 stop orders for SLV: ['84c5ae35-646b-4abb-ad52-4e36fee8eaa1']
2025-06-04 10:22:31,219 - src.rule.linked_order_actions - INFO - Executing double down action for SLV
2025-06-04 10:22:31,221 - ibapi.client - INFO - REQUEST reqMktData {'reqId': 1005, 'contract': 1734123640048: 0,SLV,STK,,0.0,,,SMART,,USD,,,False,,combo:, 'genericTickList': '', 'snapshot': False, 'regulatorySnapshot': False, 'mktDataOptions': []}
2025-06-04 10:22:31,221 - ibapi.client - INFO - SENDING reqMktData b'\x00\x00\x0001\x0011\x001005\x000\x00SLV\x00STK\x00\x000.0\x00\x00\x00SMART\x00\x00USD\x00\x00\x000\x00\x000\x000\x00\x00'
2025-06-04 10:22:31,257 - ibapi.wrapper - INFO - ANSWER tickReqParams {'tickerId': 1005, 'minTick': 0.01, 'bboExchange': 'a60001', 'snapshotPermissions': 3}
2025-06-04 10:22:31,258 - ibapi.wrapper - INFO - ANSWER marketDataType {'reqId': 1005, 'marketDataType': 1}
2025-06-04 10:22:31,258 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1005, 'tickType': 1, 'price': 31.34, 'attrib': 1734124944752: CanAutoExecute: 1, PastLimit: 0, PreOpen: 0}
2025-06-04 10:22:31,258 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1005, 'tickType': 0, 'size': 789}
2025-06-04 10:22:31,258 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1005, 'tickType': 2, 'price': 31.35, 'attrib': 1734124944752: CanAutoExecute: 1, PastLimit: 0, PreOpen: 0}
2025-06-04 10:22:31,259 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1005, 'tickType': 3, 'size': 1786}
2025-06-04 10:22:31,259 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1005, 'tickType': 4, 'price': 31.35, 'attrib': 1734124944752: CanAutoExecute: 0, PastLimit: 0, PreOpen: 0}
2025-06-04 10:22:31,259 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1005, 'tickType': 5, 'size': 1}
2025-06-04 10:22:31,259 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1005, 'tickType': 0, 'size': 789}
2025-06-04 10:22:31,259 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1005, 'tickType': 3, 'size': 1786}
2025-06-04 10:22:31,260 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1005, 'tickType': 5, 'size': 1}
2025-06-04 10:22:31,260 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1005, 'tickType': 8, 'size': 59384}
2025-06-04 10:22:31,260 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1005, 'tickType': 6, 'price': 31.43, 'attrib': 1734124944752: CanAutoExecute: 0, PastLimit: 0, PreOpen: 0}
2025-06-04 10:22:31,260 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1005, 'tickType': 7, 'price': 31.25, 'attrib': 1734124944752: CanAutoExecute: 0, PastLimit: 0, PreOpen: 0}
2025-06-04 10:22:31,260 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1005, 'tickType': 9, 'price': 31.44, 'attrib': 1734124944752: CanAutoExecute: 0, PastLimit: 0, PreOpen: 0}
2025-06-04 10:22:31,260 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1005, 'tickType': 14, 'price': 31.32, 'attrib': 1734124944752: CanAutoExecute: 0, PastLimit: 0, PreOpen: 0}
2025-06-04 10:22:31,260 - ibapi.wrapper - INFO - ANSWER tickString {'reqId': 1005, 'tickType': 32, 'value': 'NKPTVZUH'}
2025-06-04 10:22:31,261 - ibapi.wrapper - INFO - ANSWER tickString {'reqId': 1005, 'tickType': 33, 'value': 'ACNJKPTVYZUH'}
2025-06-04 10:22:31,261 - ibapi.wrapper - INFO - ANSWER tickString {'reqId': 1005, 'tickType': 84, 'value': 'D'}
2025-06-04 10:22:31,261 - ibapi.wrapper - INFO - ANSWER tickString {'reqId': 1005, 'tickType': 45, 'value': '1749046949'}
2025-06-04 10:22:31,261 - ibapi.wrapper - INFO - ANSWER tickGeneric {'reqId': 1005, 'tickType': 49, 'value': 0.0}
2025-06-04 10:22:31,389 - ibapi.client - INFO - REQUEST cancelMktData {'reqId': 1005}
2025-06-04 10:22:31,389 - ibapi.client - INFO - SENDING cancelMktData b'\x00\x00\x00\t2\x002\x001005\x00'
2025-06-04 10:22:31,394 - src.rule.linked_order_actions - INFO - Using ATR-based stop distance for SLV: 0.0814
2025-06-04 10:22:31,394 - src.rule.linked_order_actions - INFO - Double down calc for SLV (BUY): current=$31.35, stop_distance=$0.08, dd_distance=$0.04, dd_price=$31.31, original_qty=159, dd_qty=159
2025-06-04 10:22:31,395 - src.order.base - INFO - Order e83717de-8014-47f1-896d-0d44dc777d28 status changed: created -> pending_submit (Submitting to broker)
2025-06-04 10:22:31,395 - src.order.manager - INFO - Submitting order e83717de-8014-47f1-896d-0d44dc777d28 to TWS
2025-06-04 10:22:31,395 - src.order.manager - INFO - Got broker order ID 43 for order e83717de-8014-47f1-896d-0d44dc777d28
2025-06-04 10:22:31,396 - src.order.manager - INFO - Calling placeOrder with ID 43, contract 0,SLV,STK,,0.0,,,SMART,,USD,,,False,,combo:, order 0,0,0: LMT BUY 159@31.310000 DAY
2025-06-04 10:22:31,396 - ibapi.client - INFO - REQUEST placeOrder {'orderId': 43, 'contract': 1734123640528: 0,SLV,STK,,0.0,,,SMART,,USD,,,False,,combo:, 'order': 1734123305424: 0,0,0: LMT BUY 159@31.310000 DAY}
2025-06-04 10:22:31,397 - ibapi.client - INFO - SENDING placeOrder b'\x00\x00\x01?3\x0043\x000\x00SLV\x00STK\x00\x000.0\x00\x00\x00SMART\x00\x00USD\x00\x00\x00\x00\x00BUY\x00159\x00LMT\x0031.31\x000\x00DAY\x00\x00\x00\x000\x00\x001\x000\x000\x000\x000\x000\x000\x000\x00\x000\x00\x00\x00\x00\x00\x00\x00\x000\x00\x00-1\x000\x00\x00\x000\x00\x00\x000\x000\x00\x000\x00\x00\x00\x00\x00\x000\x00\x00\x00\x00\x000\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x000\x00\x00\x000\x000\x00\x00\x000\x00\x000\x000\x000\x000\x00\x001.7976931348623157e+308\x001.7976931348623157e+308\x001.7976931348623157e+308\x001.7976931348623157e+308\x001.7976931348623157e+308\x000\x00\x00\x00\x001.7976931348623157e+308\x00\x00\x00\x00\x000\x000\x000\x00\x00'
2025-06-04 10:22:31,397 - src.order.manager - INFO - placeOrder called successfully for order e83717de-8014-47f1-896d-0d44dc777d28
2025-06-04 10:22:31,398 - src.order.base - INFO - Order e83717de-8014-47f1-896d-0d44dc777d28 status changed: pending_submit -> submitted (Submitted to broker)
2025-06-04 10:22:31,398 - src.rule.linked_order_actions - INFO - Created BUY double down order 'doubledown1' for SLV: 159 shares @ $31.31
2025-06-04 10:22:31,398 - src.rule.linked_order_actions - INFO - Auto-created double down order for SLV
2025-06-04 10:22:31,398 - src.rule.linked_order_actions - INFO - Created and linked BUY main order 8b986eac-1562-45e7-9112-595742e3eb21 for SLV
2025-06-04 10:22:31,504 - src.tws_connection - INFO - Open Order - ID: 43, Symbol: SLV, Action: BUY, Quantity: 159.0
2025-06-04 10:22:32,395 - __main__ - INFO - Active orders after second signal: 6
2025-06-04 10:22:35,408 - __main__ - INFO - 
================================================================================
2025-06-04 10:22:35,412 - __main__ - INFO - TEST 3: SELL SIGNAL (should reverse position)
2025-06-04 10:22:35,415 - __main__ - INFO - ================================================================================
2025-06-04 10:22:35,417 - ibapi.client - INFO - REQUEST reqMktData {'reqId': 1006, 'contract': 1734123637168: 0,SLV,STK,,0.0,,,SMART,,USD,,,False,,combo:, 'genericTickList': '', 'snapshot': False, 'regulatorySnapshot': False, 'mktDataOptions': []}
2025-06-04 10:22:35,418 - ibapi.client - INFO - SENDING reqMktData b'\x00\x00\x0001\x0011\x001006\x000\x00SLV\x00STK\x00\x000.0\x00\x00\x00SMART\x00\x00USD\x00\x00\x000\x00\x000\x000\x00\x00'
2025-06-04 10:22:35,456 - ibapi.wrapper - INFO - ANSWER tickReqParams {'tickerId': 1006, 'minTick': 0.01, 'bboExchange': 'a60001', 'snapshotPermissions': 3}
2025-06-04 10:22:35,457 - ibapi.wrapper - INFO - ANSWER marketDataType {'reqId': 1006, 'marketDataType': 1}
2025-06-04 10:22:35,457 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1006, 'tickType': 1, 'price': 31.34, 'attrib': 1734124944944: CanAutoExecute: 1, PastLimit: 0, PreOpen: 0}
2025-06-04 10:22:35,458 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1006, 'tickType': 0, 'size': 567}
2025-06-04 10:22:35,458 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1006, 'tickType': 2, 'price': 31.35, 'attrib': 1734124944944: CanAutoExecute: 1, PastLimit: 0, PreOpen: 0}
2025-06-04 10:22:35,458 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1006, 'tickType': 3, 'size': 1443}
2025-06-04 10:22:35,459 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1006, 'tickType': 4, 'price': 31.35, 'attrib': 1734124944944: CanAutoExecute: 0, PastLimit: 0, PreOpen: 0}
2025-06-04 10:22:35,460 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1006, 'tickType': 5, 'size': 1}
2025-06-04 10:22:35,460 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1006, 'tickType': 0, 'size': 567}
2025-06-04 10:22:35,460 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1006, 'tickType': 3, 'size': 1443}
2025-06-04 10:22:35,461 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1006, 'tickType': 5, 'size': 1}
2025-06-04 10:22:35,461 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1006, 'tickType': 8, 'size': 59384}
2025-06-04 10:22:35,462 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1006, 'tickType': 6, 'price': 31.43, 'attrib': 1734124944944: CanAutoExecute: 0, PastLimit: 0, PreOpen: 0}
2025-06-04 10:22:35,462 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1006, 'tickType': 7, 'price': 31.25, 'attrib': 1734124944944: CanAutoExecute: 0, PastLimit: 0, PreOpen: 0}
2025-06-04 10:22:35,462 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1006, 'tickType': 9, 'price': 31.44, 'attrib': 1734124944944: CanAutoExecute: 0, PastLimit: 0, PreOpen: 0}
2025-06-04 10:22:35,463 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1006, 'tickType': 14, 'price': 31.32, 'attrib': 1734124944944: CanAutoExecute: 0, PastLimit: 0, PreOpen: 0}
2025-06-04 10:22:35,463 - ibapi.wrapper - INFO - ANSWER tickString {'reqId': 1006, 'tickType': 32, 'value': 'ANJKPTVZUH'}
2025-06-04 10:22:35,463 - ibapi.wrapper - INFO - ANSWER tickString {'reqId': 1006, 'tickType': 33, 'value': 'ACNJKPTVYZUH'}
2025-06-04 10:22:35,463 - ibapi.wrapper - INFO - ANSWER tickString {'reqId': 1006, 'tickType': 84, 'value': 'D'}
2025-06-04 10:22:35,464 - ibapi.wrapper - INFO - ANSWER tickString {'reqId': 1006, 'tickType': 45, 'value': '1749046949'}
2025-06-04 10:22:35,465 - ibapi.wrapper - INFO - ANSWER tickGeneric {'reqId': 1006, 'tickType': 49, 'value': 0.0}
2025-06-04 10:22:35,573 - ibapi.wrapper - INFO - ANSWER tickGeneric {'reqId': 1006, 'tickType': 49, 'value': 0.0}
2025-06-04 10:22:36,582 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1006, 'tickType': 0, 'size': 548}
2025-06-04 10:22:37,073 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1006, 'tickType': 8, 'size': 59453}
2025-06-04 10:22:37,074 - ibapi.wrapper - INFO - ANSWER tickString {'reqId': 1006, 'tickType': 45, 'value': '1749046956'}
2025-06-04 10:22:37,074 - ibapi.wrapper - INFO - ANSWER tickString {'reqId': 1006, 'tickType': 84, 'value': 'P'}
2025-06-04 10:22:37,075 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1006, 'tickType': 4, 'price': 31.34, 'attrib': 1734124944944: CanAutoExecute: 0, PastLimit: 0, PreOpen: 0}
2025-06-04 10:22:37,075 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1006, 'tickType': 5, 'size': 50}
2025-06-04 10:22:37,075 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1006, 'tickType': 5, 'size': 50}
2025-06-04 10:22:37,075 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1006, 'tickType': 1, 'price': 31.33, 'attrib': 1734124944944: CanAutoExecute: 1, PastLimit: 0, PreOpen: 0}
2025-06-04 10:22:37,076 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1006, 'tickType': 0, 'size': 1125}
2025-06-04 10:22:37,076 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1006, 'tickType': 2, 'price': 31.34, 'attrib': 1734124944944: CanAutoExecute: 1, PastLimit: 0, PreOpen: 0}
2025-06-04 10:22:37,076 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1006, 'tickType': 3, 'size': 1407}
2025-06-04 10:22:37,076 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1006, 'tickType': 0, 'size': 1125}
2025-06-04 10:22:37,076 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1006, 'tickType': 3, 'size': 1407}
2025-06-04 10:22:37,077 - ibapi.wrapper - INFO - ANSWER tickString {'reqId': 1006, 'tickType': 32, 'value': 'ANJKPTVZUH'}
2025-06-04 10:22:37,077 - ibapi.wrapper - INFO - ANSWER tickString {'reqId': 1006, 'tickType': 33, 'value': 'ACNJKPZU'}
2025-06-04 10:22:37,341 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1006, 'tickType': 8, 'size': 59462}
2025-06-04 10:22:37,342 - ibapi.wrapper - INFO - ANSWER tickString {'reqId': 1006, 'tickType': 84, 'value': 'C'}
2025-06-04 10:22:37,342 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1006, 'tickType': 5, 'size': 9}
2025-06-04 10:22:37,832 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1006, 'tickType': 0, 'size': 975}
2025-06-04 10:22:37,833 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1006, 'tickType': 3, 'size': 1204}
2025-06-04 10:22:37,834 - ibapi.wrapper - INFO - ANSWER tickString {'reqId': 1006, 'tickType': 32, 'value': 'ANJKPTVYZUH'}
2025-06-04 10:22:37,834 - ibapi.wrapper - INFO - ANSWER tickString {'reqId': 1006, 'tickType': 33, 'value': 'NJKPTVZUH'}
2025-06-04 10:22:38,585 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1006, 'tickType': 0, 'size': 857}
2025-06-04 10:22:38,586 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1006, 'tickType': 3, 'size': 1345}
2025-06-04 10:22:38,591 - ibapi.wrapper - INFO - ANSWER tickString {'reqId': 1006, 'tickType': 32, 'value': 'ANJKPTVZUH'}
2025-06-04 10:22:38,592 - ibapi.wrapper - INFO - ANSWER tickString {'reqId': 1006, 'tickType': 33, 'value': 'ACNJKPTVZUH'}
2025-06-04 10:22:39,329 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1006, 'tickType': 0, 'size': 872}
2025-06-04 10:22:39,329 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1006, 'tickType': 3, 'size': 1285}
2025-06-04 10:22:40,092 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1006, 'tickType': 8, 'size': 59463}
2025-06-04 10:22:40,092 - ibapi.wrapper - INFO - ANSWER tickString {'reqId': 1006, 'tickType': 45, 'value': '1749046959'}
2025-06-04 10:22:40,093 - ibapi.wrapper - INFO - ANSWER tickString {'reqId': 1006, 'tickType': 84, 'value': 'D'}
2025-06-04 10:22:40,093 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1006, 'tickType': 5, 'size': 1}
2025-06-04 10:22:40,093 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1006, 'tickType': 0, 'size': 914}
2025-06-04 10:22:40,430 - ibapi.client - INFO - REQUEST cancelMktData {'reqId': 1006}
2025-06-04 10:22:40,430 - ibapi.client - INFO - SENDING cancelMktData b'\x00\x00\x00\t2\x002\x001006\x00'
2025-06-04 10:22:40,431 - src.position.sizer - INFO - SELL position size: 159 shares @ $31.34 = $4983.06 (99.7% of $5000.00 allocation)
2025-06-04 10:22:40,432 - src.order.base - INFO - Order c0bcb219-e08d-4c8b-be53-d6db77dbe3f9 status changed: created -> pending_submit (Submitting to broker)
2025-06-04 10:22:40,432 - src.order.manager - INFO - Submitting order c0bcb219-e08d-4c8b-be53-d6db77dbe3f9 to TWS
2025-06-04 10:22:40,433 - src.order.manager - INFO - Got broker order ID 44 for order c0bcb219-e08d-4c8b-be53-d6db77dbe3f9
2025-06-04 10:22:40,433 - src.order.manager - INFO - Calling placeOrder with ID 44, contract 0,SLV,STK,,0.0,,,SMART,,USD,,,False,,combo:, order 0,0,0: MKT SELL 159@0.000000 DAY
2025-06-04 10:22:40,433 - ibapi.client - INFO - REQUEST placeOrder {'orderId': 44, 'contract': 1734123639568: 0,SLV,STK,,0.0,,,SMART,,USD,,,False,,combo:, 'order': 1734123305104: 0,0,0: MKT SELL 159@0.000000 DAY}
2025-06-04 10:22:40,434 - ibapi.client - INFO - SENDING placeOrder b'\x00\x00\x01<3\x0044\x000\x00SLV\x00STK\x00\x000.0\x00\x00\x00SMART\x00\x00USD\x00\x00\x00\x00\x00SELL\x00159\x00MKT\x000\x000\x00DAY\x00\x00\x00\x000\x00\x001\x000\x000\x000\x000\x000\x000\x000\x00\x000\x00\x00\x00\x00\x00\x00\x00\x000\x00\x00-1\x000\x00\x00\x000\x00\x00\x000\x000\x00\x000\x00\x00\x00\x00\x00\x000\x00\x00\x00\x00\x000\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x000\x00\x00\x000\x000\x00\x00\x000\x00\x000\x000\x000\x000\x00\x001.7976931348623157e+308\x001.7976931348623157e+308\x001.7976931348623157e+308\x001.7976931348623157e+308\x001.7976931348623157e+308\x000\x00\x00\x00\x001.7976931348623157e+308\x00\x00\x00\x00\x000\x000\x000\x00\x00'
2025-06-04 10:22:40,434 - src.order.manager - INFO - placeOrder called successfully for order c0bcb219-e08d-4c8b-be53-d6db77dbe3f9
2025-06-04 10:22:40,435 - src.order.base - INFO - Order c0bcb219-e08d-4c8b-be53-d6db77dbe3f9 status changed: pending_submit -> submitted (Submitted to broker)
2025-06-04 10:22:40,436 - src.rule.linked_order_actions - INFO - Created new order context for SLV SELL position
2025-06-04 10:22:40,438 - ibapi.client - INFO - REQUEST reqMktData {'reqId': 1007, 'contract': 1734123639568: 0,SLV,STK,,0.0,,,SMART,,USD,,,False,,combo:, 'genericTickList': '', 'snapshot': False, 'regulatorySnapshot': False, 'mktDataOptions': []}
2025-06-04 10:22:40,439 - ibapi.client - INFO - SENDING reqMktData b'\x00\x00\x0001\x0011\x001007\x000\x00SLV\x00STK\x00\x000.0\x00\x00\x00SMART\x00\x00USD\x00\x00\x000\x00\x000\x000\x00\x00'
2025-06-04 10:22:40,441 - __main__ - INFO - 
================================================================================
2025-06-04 10:22:40,442 - __main__ - INFO - TEST 4: SECOND SELL SIGNAL (should be ignored)
2025-06-04 10:22:40,442 - __main__ - INFO - ================================================================================
2025-06-04 10:22:40,442 - __main__ - INFO - Active orders before second SELL signal: 7
2025-06-04 10:22:40,501 - ibapi.wrapper - INFO - ANSWER tickReqParams {'tickerId': 1007, 'minTick': 0.01, 'bboExchange': 'a60001', 'snapshotPermissions': 3}
2025-06-04 10:22:40,501 - ibapi.wrapper - INFO - ANSWER marketDataType {'reqId': 1007, 'marketDataType': 1}
2025-06-04 10:22:40,502 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1007, 'tickType': 1, 'price': 31.33, 'attrib': 1734124945136: CanAutoExecute: 1, PastLimit: 0, PreOpen: 0}
2025-06-04 10:22:40,502 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1007, 'tickType': 0, 'size': 914}
2025-06-04 10:22:40,502 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1007, 'tickType': 2, 'price': 31.34, 'attrib': 1734124945136: CanAutoExecute: 1, PastLimit: 0, PreOpen: 0}
2025-06-04 10:22:40,502 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1007, 'tickType': 3, 'size': 1285}
2025-06-04 10:22:40,502 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1007, 'tickType': 4, 'price': 31.34, 'attrib': 1734124945136: CanAutoExecute: 0, PastLimit: 0, PreOpen: 0}
2025-06-04 10:22:40,505 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1007, 'tickType': 5, 'size': 1}
2025-06-04 10:22:40,508 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1007, 'tickType': 0, 'size': 914}
2025-06-04 10:22:40,509 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1007, 'tickType': 3, 'size': 1285}
2025-06-04 10:22:40,509 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1007, 'tickType': 5, 'size': 1}
2025-06-04 10:22:40,510 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1007, 'tickType': 8, 'size': 59463}
2025-06-04 10:22:40,510 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1007, 'tickType': 6, 'price': 31.43, 'attrib': 1734124945136: CanAutoExecute: 0, PastLimit: 0, PreOpen: 0}
2025-06-04 10:22:40,510 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1007, 'tickType': 7, 'price': 31.25, 'attrib': 1734124945136: CanAutoExecute: 0, PastLimit: 0, PreOpen: 0}
2025-06-04 10:22:40,510 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1007, 'tickType': 9, 'price': 31.44, 'attrib': 1734124945136: CanAutoExecute: 0, PastLimit: 0, PreOpen: 0}
2025-06-04 10:22:40,510 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1007, 'tickType': 14, 'price': 31.32, 'attrib': 1734124945136: CanAutoExecute: 0, PastLimit: 0, PreOpen: 0}
2025-06-04 10:22:40,510 - ibapi.wrapper - INFO - ANSWER tickString {'reqId': 1007, 'tickType': 32, 'value': 'ANJKPTVZUH'}
2025-06-04 10:22:40,511 - ibapi.wrapper - INFO - ANSWER tickString {'reqId': 1007, 'tickType': 33, 'value': 'ACNJKPTVZUH'}
2025-06-04 10:22:40,511 - ibapi.wrapper - INFO - ANSWER tickString {'reqId': 1007, 'tickType': 84, 'value': 'D'}
2025-06-04 10:22:40,511 - ibapi.wrapper - INFO - ANSWER tickString {'reqId': 1007, 'tickType': 45, 'value': '1749046959'}
2025-06-04 10:22:40,511 - ibapi.wrapper - INFO - ANSWER tickGeneric {'reqId': 1007, 'tickType': 49, 'value': 0.0}
2025-06-04 10:22:40,562 - src.tws_connection - INFO - Open Order - ID: 44, Symbol: SLV, Action: SELL, Quantity: 159.0
2025-06-04 10:22:40,562 - ibapi.client - INFO - REQUEST cancelMktData {'reqId': 1007}
2025-06-04 10:22:40,563 - ibapi.client - INFO - SENDING cancelMktData b'\x00\x00\x00\t2\x002\x001007\x00'
2025-06-04 10:22:40,563 - src.rule.linked_order_actions - INFO - Percentage-based stop: SLV stop at $32.28 (3.0%)
2025-06-04 10:22:40,563 - src.order.base - INFO - Order 88180516-86f6-4955-811e-145bf2583f5a status changed: created -> pending_submit (Submitting to broker)
2025-06-04 10:22:40,563 - src.order.manager - INFO - Submitting order 88180516-86f6-4955-811e-145bf2583f5a to TWS
2025-06-04 10:22:40,563 - src.order.manager - INFO - Got broker order ID 45 for order 88180516-86f6-4955-811e-145bf2583f5a
2025-06-04 10:22:40,564 - src.order.manager - INFO - Calling placeOrder with ID 45, contract 0,SLV,STK,,0.0,,,SMART,,USD,,,False,,combo:, order 0,0,0: STP BUY 159@0.000000 DAY
2025-06-04 10:22:40,564 - ibapi.client - INFO - REQUEST placeOrder {'orderId': 45, 'contract': 1734123637168: 0,SLV,STK,,0.0,,,SMART,,USD,,,False,,combo:, 'order': 1734123305744: 0,0,0: STP BUY 159@0.000000 DAY}
2025-06-04 10:22:40,564 - ibapi.client - INFO - SENDING placeOrder b'\x00\x00\x01?3\x0045\x000\x00SLV\x00STK\x00\x000.0\x00\x00\x00SMART\x00\x00USD\x00\x00\x00\x00\x00BUY\x00159\x00STP\x000\x0032.28\x00DAY\x00\x00\x00\x000\x00\x001\x000\x000\x000\x000\x000\x000\x000\x00\x000\x00\x00\x00\x00\x00\x00\x00\x000\x00\x00-1\x000\x00\x00\x000\x00\x00\x000\x000\x00\x000\x00\x00\x00\x00\x00\x000\x00\x00\x00\x00\x000\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x000\x00\x00\x000\x000\x00\x00\x000\x00\x000\x000\x000\x000\x00\x001.7976931348623157e+308\x001.7976931348623157e+308\x001.7976931348623157e+308\x001.7976931348623157e+308\x001.7976931348623157e+308\x000\x00\x00\x00\x001.7976931348623157e+308\x00\x00\x00\x00\x000\x000\x000\x00\x00'
2025-06-04 10:22:40,564 - src.order.manager - INFO - placeOrder called successfully for order 88180516-86f6-4955-811e-145bf2583f5a
2025-06-04 10:22:40,564 - src.order.base - INFO - Order 88180516-86f6-4955-811e-145bf2583f5a status changed: pending_submit -> submitted (Submitted to broker)
2025-06-04 10:22:40,565 - src.rule.linked_order_actions - INFO - Auto-created SELL stop loss 88180516-86f6-4955-811e-145bf2583f5a at $32.28
2025-06-04 10:22:40,565 - src.rule.linked_order_actions - INFO - Percentage-based target: SLV target at $29.46 (6.0%)
2025-06-04 10:22:40,565 - src.order.base - INFO - Order 1d9a9462-fe4e-4e65-9299-fd2085b152d8 status changed: created -> pending_submit (Submitting to broker)
2025-06-04 10:22:40,565 - src.order.manager - INFO - Submitting order 1d9a9462-fe4e-4e65-9299-fd2085b152d8 to TWS
2025-06-04 10:22:40,565 - src.order.manager - INFO - Got broker order ID 46 for order 1d9a9462-fe4e-4e65-9299-fd2085b152d8
2025-06-04 10:22:40,565 - src.order.manager - INFO - Calling placeOrder with ID 46, contract 0,SLV,STK,,0.0,,,SMART,,USD,,,False,,combo:, order 0,0,0: LMT BUY 159@29.460000 DAY
2025-06-04 10:22:40,566 - ibapi.client - INFO - REQUEST placeOrder {'orderId': 46, 'contract': 1734123639568: 0,SLV,STK,,0.0,,,SMART,,USD,,,False,,combo:, 'order': 1734123306064: 0,0,0: LMT BUY 159@29.460000 DAY}
2025-06-04 10:22:40,566 - ibapi.client - INFO - SENDING placeOrder b'\x00\x00\x01?3\x0046\x000\x00SLV\x00STK\x00\x000.0\x00\x00\x00SMART\x00\x00USD\x00\x00\x00\x00\x00BUY\x00159\x00LMT\x0029.46\x000\x00DAY\x00\x00\x00\x000\x00\x001\x000\x000\x000\x000\x000\x000\x000\x00\x000\x00\x00\x00\x00\x00\x00\x00\x000\x00\x00-1\x000\x00\x00\x000\x00\x00\x000\x000\x00\x000\x00\x00\x00\x00\x00\x000\x00\x00\x00\x00\x000\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x000\x00\x00\x000\x000\x00\x00\x000\x00\x000\x000\x000\x000\x00\x001.7976931348623157e+308\x001.7976931348623157e+308\x001.7976931348623157e+308\x001.7976931348623157e+308\x001.7976931348623157e+308\x000\x00\x00\x00\x001.7976931348623157e+308\x00\x00\x00\x00\x000\x000\x000\x00\x00'
2025-06-04 10:22:40,566 - src.order.manager - INFO - placeOrder called successfully for order 1d9a9462-fe4e-4e65-9299-fd2085b152d8
2025-06-04 10:22:40,566 - src.order.base - INFO - Order 1d9a9462-fe4e-4e65-9299-fd2085b152d8 status changed: pending_submit -> submitted (Submitted to broker)
2025-06-04 10:22:40,566 - src.rule.linked_order_actions - INFO - Auto-created SELL take profit 1d9a9462-fe4e-4e65-9299-fd2085b152d8 at $29.46
2025-06-04 10:22:40,567 - src.rule.linked_order_actions - INFO - Starting double down order creation for SLV
2025-06-04 10:22:40,618 - src.tws_connection - INFO - Open Order - ID: 44, Symbol: SLV, Action: SELL, Quantity: 159.0
2025-06-04 10:22:40,619 - src.order.base - INFO - Order c0bcb219-e08d-4c8b-be53-d6db77dbe3f9 status changed: submitted -> partially_filled (Order partially filled)
2025-06-04 10:22:40,619 - src.tws_connection - INFO - Open Order - ID: 44, Symbol: SLV, Action: SELL, Quantity: 159.0
2025-06-04 10:22:40,619 - src.order.base - INFO - Order c0bcb219-e08d-4c8b-be53-d6db77dbe3f9 filled: 100.0 @ 31.33 (100.0/159)
2025-06-04 10:22:40,622 - src.order.base - INFO - Order c0bcb219-e08d-4c8b-be53-d6db77dbe3f9 status changed: partially_filled -> submitted (IB status: Submitted)
2025-06-04 10:22:40,623 - src.order.base - INFO - Order c0bcb219-e08d-4c8b-be53-d6db77dbe3f9 status changed: submitted -> filled (Order fully filled)
2025-06-04 10:22:40,623 - src.order.base - INFO - Order c0bcb219-e08d-4c8b-be53-d6db77dbe3f9 filled: 59.0 @ 31.33 (159.0/159)
2025-06-04 10:22:40,622 - src.tws_connection - INFO - Open Order - ID: 44, Symbol: SLV, Action: SELL, Quantity: 159.0
2025-06-04 10:22:40,625 - src.tws_connection - INFO - Open Order - ID: 44, Symbol: SLV, Action: SELL, Quantity: 159.0
2025-06-04 10:22:40,626 - ibapi.wrapper - INFO - ANSWER commissionReport {'commissionReport': 1734123306064: ExecId: 00025b49.68404af8.01.01, Commission: 1.020100, Currency: USD, RealizedPnL: -3.652531, Yield: , YieldRedemptionDate: 0}
2025-06-04 10:22:40,627 - src.tws_connection - INFO - Open Order - ID: 44, Symbol: SLV, Action: SELL, Quantity: 159.0
2025-06-04 10:22:40,629 - ibapi.wrapper - INFO - ANSWER commissionReport {'commissionReport': 1734125078688: ExecId: 00025b49.68404af9.01.01, Commission: 0.011859, Currency: USD, RealizedPnL: -1.564993, Yield: , YieldRedemptionDate: 0}
2025-06-04 10:22:40,629 - src.tws_connection - INFO - Open Order - ID: 42, Symbol: SLV, Action: SELL, Quantity: 159.0
2025-06-04 10:22:40,630 - src.order.base - INFO - Order 1f56f636-3170-4d8a-b765-ff8be587ce24 status changed: submitted -> accepted (IB status: PreSubmitted)
2025-06-04 10:22:40,630 - src.tws_connection - INFO - Open Order - ID: 42, Symbol: SLV, Action: SELL, Quantity: 159.0
2025-06-04 10:22:40,631 - src.order.base - INFO - Order 1f56f636-3170-4d8a-b765-ff8be587ce24 status changed: accepted -> submitted (IB status: Submitted)
2025-06-04 10:22:40,706 - src.tws_connection - INFO - Open Order - ID: 45, Symbol: SLV, Action: BUY, Quantity: 159.0
2025-06-04 10:22:40,708 - src.order.base - INFO - Order 88180516-86f6-4955-811e-145bf2583f5a status changed: submitted -> accepted (IB status: PreSubmitted)
2025-06-04 10:22:40,763 - src.tws_connection - INFO - Open Order - ID: 46, Symbol: SLV, Action: BUY, Quantity: 159.0
2025-06-04 10:22:41,078 - src.rule.linked_order_actions - INFO - Found 1 stop orders for SLV: ['88180516-86f6-4955-811e-145bf2583f5a']
2025-06-04 10:22:41,078 - src.rule.linked_order_actions - INFO - Executing double down action for SLV
2025-06-04 10:22:41,079 - ibapi.client - INFO - REQUEST reqMktData {'reqId': 1008, 'contract': 1734123639568: 0,SLV,STK,,0.0,,,SMART,,USD,,,False,,combo:, 'genericTickList': '', 'snapshot': False, 'regulatorySnapshot': False, 'mktDataOptions': []}
2025-06-04 10:22:41,079 - ibapi.client - INFO - SENDING reqMktData b'\x00\x00\x0001\x0011\x001008\x000\x00SLV\x00STK\x00\x000.0\x00\x00\x00SMART\x00\x00USD\x00\x00\x000\x00\x000\x000\x00\x00'
2025-06-04 10:22:41,114 - ibapi.wrapper - INFO - ANSWER tickReqParams {'tickerId': 1008, 'minTick': 0.01, 'bboExchange': 'a60001', 'snapshotPermissions': 3}
2025-06-04 10:22:41,114 - ibapi.wrapper - INFO - ANSWER marketDataType {'reqId': 1008, 'marketDataType': 1}
2025-06-04 10:22:41,115 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1008, 'tickType': 1, 'price': 31.33, 'attrib': 1734124945328: CanAutoExecute: 1, PastLimit: 0, PreOpen: 0}
2025-06-04 10:22:41,115 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1008, 'tickType': 0, 'size': 936}
2025-06-04 10:22:41,115 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1008, 'tickType': 2, 'price': 31.34, 'attrib': 1734124945328: CanAutoExecute: 1, PastLimit: 0, PreOpen: 0}
2025-06-04 10:22:41,116 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1008, 'tickType': 3, 'size': 1076}
2025-06-04 10:22:41,116 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1008, 'tickType': 4, 'price': 31.34, 'attrib': 1734124945328: CanAutoExecute: 0, PastLimit: 0, PreOpen: 0}
2025-06-04 10:22:41,116 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1008, 'tickType': 5, 'size': 1}
2025-06-04 10:22:41,116 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1008, 'tickType': 0, 'size': 936}
2025-06-04 10:22:41,117 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1008, 'tickType': 3, 'size': 1076}
2025-06-04 10:22:41,117 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1008, 'tickType': 5, 'size': 1}
2025-06-04 10:22:41,117 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1008, 'tickType': 8, 'size': 59463}
2025-06-04 10:22:41,117 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1008, 'tickType': 6, 'price': 31.43, 'attrib': 1734124945328: CanAutoExecute: 0, PastLimit: 0, PreOpen: 0}
2025-06-04 10:22:41,118 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1008, 'tickType': 7, 'price': 31.25, 'attrib': 1734124945328: CanAutoExecute: 0, PastLimit: 0, PreOpen: 0}
2025-06-04 10:22:41,118 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1008, 'tickType': 9, 'price': 31.44, 'attrib': 1734124945328: CanAutoExecute: 0, PastLimit: 0, PreOpen: 0}
2025-06-04 10:22:41,118 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1008, 'tickType': 14, 'price': 31.32, 'attrib': 1734124945328: CanAutoExecute: 0, PastLimit: 0, PreOpen: 0}
2025-06-04 10:22:41,119 - ibapi.wrapper - INFO - ANSWER tickString {'reqId': 1008, 'tickType': 32, 'value': 'ANJKPTVYZUH'}
2025-06-04 10:22:41,119 - ibapi.wrapper - INFO - ANSWER tickString {'reqId': 1008, 'tickType': 33, 'value': 'NJKPTVZUH'}
2025-06-04 10:22:41,119 - ibapi.wrapper - INFO - ANSWER tickString {'reqId': 1008, 'tickType': 84, 'value': 'D'}
2025-06-04 10:22:41,121 - ibapi.wrapper - INFO - ANSWER tickString {'reqId': 1008, 'tickType': 45, 'value': '1749046959'}
2025-06-04 10:22:41,121 - ibapi.wrapper - INFO - ANSWER tickGeneric {'reqId': 1008, 'tickType': 49, 'value': 0.0}
2025-06-04 10:22:41,208 - ibapi.wrapper - INFO - ANSWER tickGeneric {'reqId': 1008, 'tickType': 49, 'value': 0.0}
2025-06-04 10:22:41,283 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1008, 'tickType': 8, 'size': 59466}
2025-06-04 10:22:41,283 - ibapi.wrapper - INFO - ANSWER tickString {'reqId': 1008, 'tickType': 45, 'value': '1749046960'}
2025-06-04 10:22:41,283 - ibapi.wrapper - INFO - ANSWER tickString {'reqId': 1008, 'tickType': 84, 'value': 'Z'}
2025-06-04 10:22:41,283 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1008, 'tickType': 4, 'price': 31.33, 'attrib': 1734124945328: CanAutoExecute: 0, PastLimit: 0, PreOpen: 0}
2025-06-04 10:22:41,284 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1008, 'tickType': 5, 'size': 1}
2025-06-04 10:22:41,527 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1008, 'tickType': 0, 'size': 914}
2025-06-04 10:22:41,528 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1008, 'tickType': 3, 'size': 1211}
2025-06-04 10:22:41,528 - ibapi.wrapper - INFO - ANSWER tickString {'reqId': 1008, 'tickType': 32, 'value': 'ANJKPTVZUH'}
2025-06-04 10:22:41,528 - ibapi.wrapper - INFO - ANSWER tickString {'reqId': 1008, 'tickType': 33, 'value': 'ACNJKPTVZUH'}
2025-06-04 10:22:42,287 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1008, 'tickType': 0, 'size': 877}
2025-06-04 10:22:42,289 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1008, 'tickType': 3, 'size': 1210}
2025-06-04 10:22:42,458 - ibapi.client - INFO - REQUEST cancelMktData {'reqId': 1008}
2025-06-04 10:22:42,459 - ibapi.client - INFO - SENDING cancelMktData b'\x00\x00\x00\t2\x002\x001008\x00'
2025-06-04 10:22:42,464 - src.rule.linked_order_actions - INFO - Using ATR-based stop distance for SLV: 0.0814
2025-06-04 10:22:42,464 - src.rule.linked_order_actions - INFO - Double down calc for SLV (SELL): current=$31.33, stop_distance=$0.08, dd_distance=$0.04, dd_price=$31.37, original_qty=159, dd_qty=-159
2025-06-04 10:22:42,464 - src.order.base - INFO - Order 6225ceb4-1720-4ae1-8930-daa5a53422ea status changed: created -> pending_submit (Submitting to broker)
2025-06-04 10:22:42,465 - src.order.manager - INFO - Submitting order 6225ceb4-1720-4ae1-8930-daa5a53422ea to TWS
2025-06-04 10:22:42,465 - src.order.manager - INFO - Got broker order ID 47 for order 6225ceb4-1720-4ae1-8930-daa5a53422ea
2025-06-04 10:22:42,465 - src.order.manager - INFO - Calling placeOrder with ID 47, contract 0,SLV,STK,,0.0,,,SMART,,USD,,,False,,combo:, order 0,0,0: LMT SELL 159@31.370000 DAY
2025-06-04 10:22:42,465 - ibapi.client - INFO - REQUEST placeOrder {'orderId': 47, 'contract': 1734123639568: 0,SLV,STK,,0.0,,,SMART,,USD,,,False,,combo:, 'order': 1734125191248: 0,0,0: LMT SELL 159@31.370000 DAY}
2025-06-04 10:22:42,466 - ibapi.client - INFO - SENDING placeOrder b'\x00\x00\x01@3\x0047\x000\x00SLV\x00STK\x00\x000.0\x00\x00\x00SMART\x00\x00USD\x00\x00\x00\x00\x00SELL\x00159\x00LMT\x0031.37\x000\x00DAY\x00\x00\x00\x000\x00\x001\x000\x000\x000\x000\x000\x000\x000\x00\x000\x00\x00\x00\x00\x00\x00\x00\x000\x00\x00-1\x000\x00\x00\x000\x00\x00\x000\x000\x00\x000\x00\x00\x00\x00\x00\x000\x00\x00\x00\x00\x000\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x000\x00\x00\x000\x000\x00\x00\x000\x00\x000\x000\x000\x000\x00\x001.7976931348623157e+308\x001.7976931348623157e+308\x001.7976931348623157e+308\x001.7976931348623157e+308\x001.7976931348623157e+308\x000\x00\x00\x00\x001.7976931348623157e+308\x00\x00\x00\x00\x000\x000\x000\x00\x00'
2025-06-04 10:22:42,466 - src.order.manager - INFO - placeOrder called successfully for order 6225ceb4-1720-4ae1-8930-daa5a53422ea
2025-06-04 10:22:42,467 - src.order.base - INFO - Order 6225ceb4-1720-4ae1-8930-daa5a53422ea status changed: pending_submit -> submitted (Submitted to broker)
2025-06-04 10:22:42,467 - src.rule.linked_order_actions - INFO - Created SELL double down order 'doubledown1' for SLV: -159 shares @ $31.37
2025-06-04 10:22:42,468 - src.rule.linked_order_actions - INFO - Auto-created double down order for SLV
2025-06-04 10:22:42,468 - src.rule.linked_order_actions - INFO - Created and linked SELL main order c0bcb219-e08d-4c8b-be53-d6db77dbe3f9 for SLV
2025-06-04 10:22:42,469 - ibapi.client - INFO - REQUEST reqMktData {'reqId': 1009, 'contract': 1734123639568: 0,SLV,STK,,0.0,,,SMART,,USD,,,False,,combo:, 'genericTickList': '', 'snapshot': False, 'regulatorySnapshot': False, 'mktDataOptions': []}
2025-06-04 10:22:42,469 - ibapi.client - INFO - SENDING reqMktData b'\x00\x00\x0001\x0011\x001009\x000\x00SLV\x00STK\x00\x000.0\x00\x00\x00SMART\x00\x00USD\x00\x00\x000\x00\x000\x000\x00\x00'
2025-06-04 10:22:42,470 - __main__ - INFO - Active orders after second SELL signal: 9
2025-06-04 10:22:42,474 - __main__ - INFO - 
================================================================================
2025-06-04 10:22:42,474 - __main__ - INFO - TEST SUMMARY
2025-06-04 10:22:42,474 - __main__ - INFO - ================================================================================
2025-06-04 10:22:42,475 - __main__ - INFO - Total active orders: 9
2025-06-04 10:22:42,475 - __main__ - INFO - Total completed orders: 3
2025-06-04 10:22:42,475 - __main__ - INFO - 
Order Details:
2025-06-04 10:22:42,475 - __main__ - INFO -   SLV sell 159 @ market - filled
2025-06-04 10:22:42,476 - __main__ - INFO -   SLV buy 159 @ market - filled
2025-06-04 10:22:42,476 - __main__ - INFO -   SLV buy 159 @ market - filled
2025-06-04 10:22:42,476 - ibapi.client - INFO - REQUEST cancelMktData {'reqId': 1009}
2025-06-04 10:22:42,476 - ibapi.client - INFO - SENDING cancelMktData b'\x00\x00\x00\t2\x002\x001009\x00'
2025-06-04 10:22:42,477 - src.rule.engine - INFO - Rule engine stopped
2025-06-04 10:22:42,477 - __main__ - INFO - 
Cleaning up orders...
2025-06-04 10:22:42,477 - src.order.base - INFO - Order 1d9a9462-fe4e-4e65-9299-fd2085b152d8 status changed: submitted -> pending_cancel (Test cleanup)
2025-06-04 10:22:42,477 - src.order.manager - INFO - Cancelling order 1d9a9462-fe4e-4e65-9299-fd2085b152d8 with broker ID 46
2025-06-04 10:22:42,478 - ibapi.client - INFO - REQUEST cancelOrder {'orderId': 46}
2025-06-04 10:22:42,478 - ibapi.client - INFO - SENDING cancelOrder b'\x00\x00\x00\x074\x001\x0046\x00'
2025-06-04 10:22:42,478 - src.order.base - INFO - Order 84c5ae35-646b-4abb-ad52-4e36fee8eaa1 status changed: accepted -> pending_cancel (Test cleanup)
2025-06-04 10:22:42,478 - src.order.manager - INFO - Cancelling order 84c5ae35-646b-4abb-ad52-4e36fee8eaa1 with broker ID 41
2025-06-04 10:22:42,479 - ibapi.client - INFO - REQUEST cancelOrder {'orderId': 41}
2025-06-04 10:22:42,479 - ibapi.client - INFO - SENDING cancelOrder b'\x00\x00\x00\x074\x001\x0041\x00'
2025-06-04 10:22:42,479 - src.order.base - INFO - Order 17736f52-be20-49aa-972d-9c96dc682ada status changed: submitted -> pending_cancel (Test cleanup)
2025-06-04 10:22:42,479 - src.order.manager - INFO - Cancelling order 17736f52-be20-49aa-972d-9c96dc682ada with broker ID 39
2025-06-04 10:22:42,480 - ibapi.client - INFO - REQUEST cancelOrder {'orderId': 39}
2025-06-04 10:22:42,480 - ibapi.client - INFO - SENDING cancelOrder b'\x00\x00\x00\x074\x001\x0039\x00'
2025-06-04 10:22:42,480 - src.order.base - INFO - Order c6c1d7cd-eace-423b-a750-9f0dd06c1fbd status changed: accepted -> pending_cancel (Test cleanup)
2025-06-04 10:22:42,480 - src.order.manager - INFO - Cancelling order c6c1d7cd-eace-423b-a750-9f0dd06c1fbd with broker ID 37
2025-06-04 10:22:42,480 - ibapi.client - INFO - REQUEST cancelOrder {'orderId': 37}
2025-06-04 10:22:42,481 - ibapi.client - INFO - SENDING cancelOrder b'\x00\x00\x00\x074\x001\x0037\x00'
2025-06-04 10:22:42,481 - src.order.base - INFO - Order 1f56f636-3170-4d8a-b765-ff8be587ce24 status changed: submitted -> pending_cancel (Test cleanup)
2025-06-04 10:22:42,481 - src.order.manager - INFO - Cancelling order 1f56f636-3170-4d8a-b765-ff8be587ce24 with broker ID 42
2025-06-04 10:22:42,481 - ibapi.client - INFO - REQUEST cancelOrder {'orderId': 42}
2025-06-04 10:22:42,481 - ibapi.client - INFO - SENDING cancelOrder b'\x00\x00\x00\x074\x001\x0042\x00'
2025-06-04 10:22:42,483 - src.order.base - INFO - Order e83717de-8014-47f1-896d-0d44dc777d28 status changed: submitted -> pending_cancel (Test cleanup)
2025-06-04 10:22:42,484 - src.order.manager - INFO - Cancelling order e83717de-8014-47f1-896d-0d44dc777d28 with broker ID 43
2025-06-04 10:22:42,484 - ibapi.client - INFO - REQUEST cancelOrder {'orderId': 43}
2025-06-04 10:22:42,484 - ibapi.client - INFO - SENDING cancelOrder b'\x00\x00\x00\x074\x001\x0043\x00'
2025-06-04 10:22:42,484 - src.order.base - INFO - Order e11358c4-b5e7-4cdc-9c7c-1aa89e6f2b83 status changed: submitted -> pending_cancel (Test cleanup)
2025-06-04 10:22:42,484 - src.order.manager - INFO - Cancelling order e11358c4-b5e7-4cdc-9c7c-1aa89e6f2b83 with broker ID 38
2025-06-04 10:22:42,485 - ibapi.client - INFO - REQUEST cancelOrder {'orderId': 38}
2025-06-04 10:22:42,485 - ibapi.client - INFO - SENDING cancelOrder b'\x00\x00\x00\x074\x001\x0038\x00'
2025-06-04 10:22:42,485 - src.order.base - INFO - Order 88180516-86f6-4955-811e-145bf2583f5a status changed: accepted -> pending_cancel (Test cleanup)
2025-06-04 10:22:42,485 - src.order.manager - INFO - Cancelling order 88180516-86f6-4955-811e-145bf2583f5a with broker ID 45
2025-06-04 10:22:42,485 - ibapi.client - INFO - REQUEST cancelOrder {'orderId': 45}
2025-06-04 10:22:42,485 - ibapi.client - INFO - SENDING cancelOrder b'\x00\x00\x00\x074\x001\x0045\x00'
2025-06-04 10:22:42,486 - src.order.base - INFO - Order 6225ceb4-1720-4ae1-8930-daa5a53422ea status changed: submitted -> pending_cancel (Test cleanup)
2025-06-04 10:22:42,486 - src.order.manager - INFO - Cancelling order 6225ceb4-1720-4ae1-8930-daa5a53422ea with broker ID 47
2025-06-04 10:22:42,488 - ibapi.client - INFO - REQUEST cancelOrder {'orderId': 47}
2025-06-04 10:22:42,489 - ibapi.client - INFO - SENDING cancelOrder b'\x00\x00\x00\x074\x001\x0047\x00'
2025-06-04 10:22:42,489 - __main__ - INFO - Disconnecting from TWS...
2025-06-04 10:22:42,490 - src.tws_connection - INFO - Disconnecting from TWS
2025-06-04 10:22:42,490 - ibapi.client - INFO - disconnecting
2025-06-04 10:22:42,499 - src.tws_connection - WARNING - Not connected to TWS
2025-06-04 10:22:42,500 - src.price.service - WARNING - TWS not connected - cannot get price
2025-06-04 10:22:42,500 - src.tws_connection - INFO - Connection thread: Message loop ended
2025-06-04 10:22:42,502 - src.rule.linked_order_actions - ERROR - Could not get price for SLV
2025-06-04 10:22:42,502 - src.rule.linked_order_actions - WARNING - Could not calculate position size for SLV
