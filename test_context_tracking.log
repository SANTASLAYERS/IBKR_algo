2025-06-04 11:28:42,654 - __main__ - INFO - Starting context tracking test...
2025-06-04 11:28:42,654 - src.trade_tracker - INFO - TradeTracker initialized
2025-06-04 11:28:42,655 - src.trade_tracker - INFO - Cleared all trades from tracker
2025-06-04 11:28:42,659 - __main__ - INFO - Connecting to TWS...
2025-06-04 11:28:42,659 - src.tws_connection - INFO - Connecting to TWS at 127.0.0.1:7497
2025-06-04 11:28:42,661 - src.tws_connection - INFO - Connection thread: Connecting to 127.0.0.1:7497 (client ID: 1)
2025-06-04 11:28:43,375 - ibapi.client - INFO - sent startApi
2025-06-04 11:28:43,376 - ibapi.client - INFO - REQUEST startApi {}
2025-06-04 11:28:43,376 - ibapi.client - INFO - SENDING startApi b'\x00\x00\x00\x0871\x002\x001\x00\x00'
2025-06-04 11:28:43,383 - ibapi.client - INFO - REQUEST startApi {}
2025-06-04 11:28:43,383 - ibapi.client - INFO - SENDING startApi b'\x00\x00\x00\x0871\x002\x001\x00\x00'
2025-06-04 11:28:43,383 - src.tws_connection - INFO - Connection thread: Socket connected, starting message loop
2025-06-04 11:28:43,411 - src.tws_connection - INFO - Requesting additional order IDs from TWS
2025-06-04 11:28:43,412 - ibapi.client - INFO - REQUEST reqIds {'numIds': 50}
2025-06-04 11:28:43,412 - ibapi.client - INFO - SENDING reqIds b'\x00\x00\x00\x078\x001\x0050\x00'
2025-06-04 11:28:43,431 - src.order.manager - INFO - OrderManager callbacks set up with TWSConnection
2025-06-04 11:28:43,431 - src.position.tracker - INFO - PositionTracker async initialization completed
2025-06-04 11:28:43,431 - src.rule.linked_order_actions - INFO - LinkedOrderConclusionManager initialized - monitoring for position conclusions
2025-06-04 11:28:43,432 - src.rule.engine - INFO - Rule engine started
2025-06-04 11:28:43,432 - __main__ - INFO - 
================================================================================
2025-06-04 11:28:43,433 - __main__ - INFO - STEP 1: CREATE POSITION WITH ORDERS
2025-06-04 11:28:43,433 - __main__ - INFO - ================================================================================
2025-06-04 11:28:43,433 - src.trade_tracker - INFO - Started tracking BUY trade for SLV
2025-06-04 11:28:43,434 - src.rule.linked_order_actions - INFO - Using fixed position size: 50 shares for SLV
2025-06-04 11:28:43,434 - src.order.base - INFO - Order dfcb15f5-1e1a-48a5-bc3a-09f7e6328640 status changed: created -> pending_submit (Submitting to broker)
2025-06-04 11:28:43,434 - src.order.manager - INFO - Submitting order dfcb15f5-1e1a-48a5-bc3a-09f7e6328640 to TWS
2025-06-04 11:28:43,434 - src.order.manager - INFO - Got broker order ID 53 for order dfcb15f5-1e1a-48a5-bc3a-09f7e6328640
2025-06-04 11:28:43,435 - src.order.manager - INFO - Calling placeOrder with ID 53, contract 0,SLV,STK,,0.0,,,SMART,,USD,,,False,,combo:, order 0,0,0: MKT BUY 50@0.000000 DAY
2025-06-04 11:28:43,435 - ibapi.client - INFO - REQUEST placeOrder {'orderId': 53, 'contract': 2862240177120: 0,SLV,STK,,0.0,,,SMART,,USD,,,False,,combo:, 'order': 2862240177456: 0,0,0: MKT BUY 50@0.000000 DAY}
2025-06-04 11:28:43,435 - ibapi.client - INFO - SENDING placeOrder b'\x00\x00\x01:3\x0053\x000\x00SLV\x00STK\x00\x000.0\x00\x00\x00SMART\x00\x00USD\x00\x00\x00\x00\x00BUY\x0050\x00MKT\x000\x000\x00DAY\x00\x00\x00\x000\x00\x001\x000\x000\x000\x000\x000\x000\x000\x00\x000\x00\x00\x00\x00\x00\x00\x00\x000\x00\x00-1\x000\x00\x00\x000\x00\x00\x000\x000\x00\x000\x00\x00\x00\x00\x00\x000\x00\x00\x00\x00\x000\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x000\x00\x00\x000\x000\x00\x00\x000\x00\x000\x000\x000\x000\x00\x001.7976931348623157e+308\x001.7976931348623157e+308\x001.7976931348623157e+308\x001.7976931348623157e+308\x001.7976931348623157e+308\x000\x00\x00\x00\x001.7976931348623157e+308\x00\x00\x00\x00\x000\x000\x000\x00\x00'
2025-06-04 11:28:43,436 - src.order.manager - INFO - placeOrder called successfully for order dfcb15f5-1e1a-48a5-bc3a-09f7e6328640
2025-06-04 11:28:43,436 - src.order.base - INFO - Order dfcb15f5-1e1a-48a5-bc3a-09f7e6328640 status changed: pending_submit -> submitted (Submitted to broker)
2025-06-04 11:28:43,436 - src.rule.linked_order_actions - INFO - Created new order context for SLV BUY position
2025-06-04 11:28:43,437 - ibapi.client - INFO - REQUEST reqMktData {'reqId': 1000, 'contract': 2862239524624: 0,SLV,STK,,0.0,,,SMART,,USD,,,False,,combo:, 'genericTickList': '', 'snapshot': False, 'regulatorySnapshot': False, 'mktDataOptions': []}
2025-06-04 11:28:43,438 - ibapi.client - INFO - SENDING reqMktData b'\x00\x00\x0001\x0011\x001000\x000\x00SLV\x00STK\x00\x000.0\x00\x00\x00SMART\x00\x00USD\x00\x00\x000\x00\x000\x000\x00\x00'
2025-06-04 11:28:43,497 - ibapi.wrapper - INFO - ANSWER tickReqParams {'tickerId': 1000, 'minTick': 0.01, 'bboExchange': 'a60001', 'snapshotPermissions': 3}
2025-06-04 11:28:43,498 - ibapi.wrapper - INFO - ANSWER marketDataType {'reqId': 1000, 'marketDataType': 1}
2025-06-04 11:28:43,498 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1000, 'tickType': 1, 'price': 31.27, 'attrib': 2862240177120: CanAutoExecute: 1, PastLimit: 0, PreOpen: 0}
2025-06-04 11:28:43,498 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1000, 'tickType': 0, 'size': 772}
2025-06-04 11:28:43,498 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1000, 'tickType': 2, 'price': 31.28, 'attrib': 2862239524944: CanAutoExecute: 1, PastLimit: 0, PreOpen: 0}
2025-06-04 11:28:43,498 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1000, 'tickType': 3, 'size': 928}
2025-06-04 11:28:43,499 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1000, 'tickType': 4, 'price': 31.27, 'attrib': 2862239524944: CanAutoExecute: 0, PastLimit: 0, PreOpen: 0}
2025-06-04 11:28:43,499 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1000, 'tickType': 5, 'size': 1}
2025-06-04 11:28:43,499 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1000, 'tickType': 0, 'size': 772}
2025-06-04 11:28:43,499 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1000, 'tickType': 3, 'size': 928}
2025-06-04 11:28:43,499 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1000, 'tickType': 5, 'size': 1}
2025-06-04 11:28:43,500 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1000, 'tickType': 8, 'size': 105047}
2025-06-04 11:28:43,500 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1000, 'tickType': 6, 'price': 31.43, 'attrib': 2862239495920: CanAutoExecute: 0, PastLimit: 0, PreOpen: 0}
2025-06-04 11:28:43,500 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1000, 'tickType': 7, 'price': 31.23, 'attrib': 2862239495920: CanAutoExecute: 0, PastLimit: 0, PreOpen: 0}
2025-06-04 11:28:43,500 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1000, 'tickType': 9, 'price': 31.44, 'attrib': 2862239235632: CanAutoExecute: 0, PastLimit: 0, PreOpen: 0}
2025-06-04 11:28:43,500 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1000, 'tickType': 14, 'price': 31.32, 'attrib': 2862240040080: CanAutoExecute: 0, PastLimit: 0, PreOpen: 0}
2025-06-04 11:28:43,501 - ibapi.wrapper - INFO - ANSWER tickString {'reqId': 1000, 'tickType': 32, 'value': 'ANJKPTVZUH'}
2025-06-04 11:28:43,501 - ibapi.wrapper - INFO - ANSWER tickString {'reqId': 1000, 'tickType': 33, 'value': 'ANJKPTVYZUH'}
2025-06-04 11:28:43,501 - ibapi.wrapper - INFO - ANSWER tickString {'reqId': 1000, 'tickType': 84, 'value': 'Z'}
2025-06-04 11:28:43,501 - ibapi.wrapper - INFO - ANSWER tickString {'reqId': 1000, 'tickType': 45, 'value': '1749050922'}
2025-06-04 11:28:43,501 - ibapi.wrapper - INFO - ANSWER tickGeneric {'reqId': 1000, 'tickType': 49, 'value': 0.0}
2025-06-04 11:28:43,565 - src.tws_connection - INFO - Open Order - ID: 53, Symbol: SLV, Action: BUY, Quantity: 50.0
2025-06-04 11:28:43,566 - ibapi.client - INFO - REQUEST cancelMktData {'reqId': 1000}
2025-06-04 11:28:43,566 - ibapi.client - INFO - SENDING cancelMktData b'\x00\x00\x00\t2\x002\x001000\x00'
2025-06-04 11:28:43,567 - src.rule.linked_order_actions - INFO - Percentage-based stop: SLV stop at $30.33 (3.0%)
2025-06-04 11:28:43,567 - src.order.base - INFO - Order 34279b3b-32c3-4b28-b046-9f35c8447723 status changed: created -> pending_submit (Submitting to broker)
2025-06-04 11:28:43,568 - src.order.manager - INFO - Submitting order 34279b3b-32c3-4b28-b046-9f35c8447723 to TWS
2025-06-04 11:28:43,568 - src.order.manager - INFO - Got broker order ID 54 for order 34279b3b-32c3-4b28-b046-9f35c8447723
2025-06-04 11:28:43,568 - src.order.manager - INFO - Calling placeOrder with ID 54, contract 0,SLV,STK,,0.0,,,SMART,,USD,,,False,,combo:, order 0,0,0: STP SELL 50@0.000000 DAY
2025-06-04 11:28:43,568 - ibapi.client - INFO - REQUEST placeOrder {'orderId': 54, 'contract': 2862239496528: 0,SLV,STK,,0.0,,,SMART,,USD,,,False,,combo:, 'order': 2862239527824: 0,0,0: STP SELL 50@0.000000 DAY}
2025-06-04 11:28:43,569 - ibapi.client - INFO - SENDING placeOrder b'\x00\x00\x01?3\x0054\x000\x00SLV\x00STK\x00\x000.0\x00\x00\x00SMART\x00\x00USD\x00\x00\x00\x00\x00SELL\x0050\x00STP\x000\x0030.33\x00DAY\x00\x00\x00\x000\x00\x001\x000\x000\x000\x000\x000\x000\x000\x00\x000\x00\x00\x00\x00\x00\x00\x00\x000\x00\x00-1\x000\x00\x00\x000\x00\x00\x000\x000\x00\x000\x00\x00\x00\x00\x00\x000\x00\x00\x00\x00\x000\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x000\x00\x00\x000\x000\x00\x00\x000\x00\x000\x000\x000\x000\x00\x001.7976931348623157e+308\x001.7976931348623157e+308\x001.7976931348623157e+308\x001.7976931348623157e+308\x001.7976931348623157e+308\x000\x00\x00\x00\x001.7976931348623157e+308\x00\x00\x00\x00\x000\x000\x000\x00\x00'
2025-06-04 11:28:43,569 - src.order.manager - INFO - placeOrder called successfully for order 34279b3b-32c3-4b28-b046-9f35c8447723
2025-06-04 11:28:43,569 - src.order.base - INFO - Order 34279b3b-32c3-4b28-b046-9f35c8447723 status changed: pending_submit -> submitted (Submitted to broker)
2025-06-04 11:28:43,570 - src.rule.linked_order_actions - INFO - Auto-created BUY stop loss 34279b3b-32c3-4b28-b046-9f35c8447723 at $30.33
2025-06-04 11:28:43,570 - src.rule.linked_order_actions - INFO - Percentage-based target: SLV target at $33.15 (6.0%)
2025-06-04 11:28:43,570 - src.order.base - INFO - Order 74bc171d-3d34-4d03-80b3-7120a2589216 status changed: created -> pending_submit (Submitting to broker)
2025-06-04 11:28:43,570 - src.order.manager - INFO - Submitting order 74bc171d-3d34-4d03-80b3-7120a2589216 to TWS
2025-06-04 11:28:43,571 - src.order.manager - INFO - Got broker order ID 55 for order 74bc171d-3d34-4d03-80b3-7120a2589216
2025-06-04 11:28:43,571 - src.order.manager - INFO - Calling placeOrder with ID 55, contract 0,SLV,STK,,0.0,,,SMART,,USD,,,False,,combo:, order 0,0,0: LMT SELL 50@33.150000 DAY
2025-06-04 11:28:43,571 - ibapi.client - INFO - REQUEST placeOrder {'orderId': 55, 'contract': 2862241415248: 0,SLV,STK,,0.0,,,SMART,,USD,,,False,,combo:, 'order': 2862239528464: 0,0,0: LMT SELL 50@33.150000 DAY}
2025-06-04 11:28:43,572 - ibapi.client - INFO - SENDING placeOrder b'\x00\x00\x01?3\x0055\x000\x00SLV\x00STK\x00\x000.0\x00\x00\x00SMART\x00\x00USD\x00\x00\x00\x00\x00SELL\x0050\x00LMT\x0033.15\x000\x00DAY\x00\x00\x00\x000\x00\x001\x000\x000\x000\x000\x000\x000\x000\x00\x000\x00\x00\x00\x00\x00\x00\x00\x000\x00\x00-1\x000\x00\x00\x000\x00\x00\x000\x000\x00\x000\x00\x00\x00\x00\x00\x000\x00\x00\x00\x00\x000\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x000\x00\x00\x000\x000\x00\x00\x000\x00\x000\x000\x000\x000\x00\x001.7976931348623157e+308\x001.7976931348623157e+308\x001.7976931348623157e+308\x001.7976931348623157e+308\x001.7976931348623157e+308\x000\x00\x00\x00\x001.7976931348623157e+308\x00\x00\x00\x00\x000\x000\x000\x00\x00'
2025-06-04 11:28:43,572 - src.order.manager - INFO - placeOrder called successfully for order 74bc171d-3d34-4d03-80b3-7120a2589216
2025-06-04 11:28:43,573 - src.order.base - INFO - Order 74bc171d-3d34-4d03-80b3-7120a2589216 status changed: pending_submit -> submitted (Submitted to broker)
2025-06-04 11:28:43,573 - src.rule.linked_order_actions - INFO - Auto-created BUY take profit 74bc171d-3d34-4d03-80b3-7120a2589216 at $33.15
2025-06-04 11:28:43,573 - src.rule.linked_order_actions - INFO - Starting double down order creation for SLV
2025-06-04 11:28:43,574 - src.order.base - INFO - Order dfcb15f5-1e1a-48a5-bc3a-09f7e6328640 status changed: submitted -> accepted (IB status: PreSubmitted)
2025-06-04 11:28:43,609 - src.order.base - INFO - Order dfcb15f5-1e1a-48a5-bc3a-09f7e6328640 status changed: accepted -> filled (Order fully filled)
2025-06-04 11:28:43,618 - src.order.base - INFO - Order dfcb15f5-1e1a-48a5-bc3a-09f7e6328640 filled: 50.0 @ 31.28 (50.0/50)
2025-06-04 11:28:43,617 - src.tws_connection - INFO - Open Order - ID: 53, Symbol: SLV, Action: BUY, Quantity: 50.0
2025-06-04 11:28:43,622 - src.tws_connection - INFO - Open Order - ID: 53, Symbol: SLV, Action: BUY, Quantity: 50.0
2025-06-04 11:28:43,624 - ibapi.wrapper - INFO - ANSWER commissionReport {'commissionReport': 2862240178128: ExecId: 00025b49.68406dde.01.01, Commission: 1.001750, Currency: USD, RealizedPnL: , Yield: , YieldRedemptionDate: 0}
2025-06-04 11:28:43,692 - src.tws_connection - INFO - Open Order - ID: 54, Symbol: SLV, Action: SELL, Quantity: 50.0
2025-06-04 11:28:43,699 - src.order.base - INFO - Order 34279b3b-32c3-4b28-b046-9f35c8447723 status changed: submitted -> accepted (IB status: PreSubmitted)
2025-06-04 11:28:43,745 - src.tws_connection - INFO - Open Order - ID: 55, Symbol: SLV, Action: SELL, Quantity: 50.0
2025-06-04 11:28:44,084 - src.rule.linked_order_actions - INFO - Found 1 stop orders for SLV: ['34279b3b-32c3-4b28-b046-9f35c8447723']
2025-06-04 11:28:44,085 - src.rule.linked_order_actions - INFO - Executing double down action for SLV
2025-06-04 11:28:44,085 - ibapi.client - INFO - REQUEST reqMktData {'reqId': 1001, 'contract': 2862239910080: 0,SLV,STK,,0.0,,,SMART,,USD,,,False,,combo:, 'genericTickList': '', 'snapshot': False, 'regulatorySnapshot': False, 'mktDataOptions': []}
2025-06-04 11:28:44,086 - ibapi.client - INFO - SENDING reqMktData b'\x00\x00\x0001\x0011\x001001\x000\x00SLV\x00STK\x00\x000.0\x00\x00\x00SMART\x00\x00USD\x00\x00\x000\x00\x000\x000\x00\x00'
2025-06-04 11:28:44,124 - ibapi.wrapper - INFO - ANSWER tickReqParams {'tickerId': 1001, 'minTick': 0.01, 'bboExchange': 'a60001', 'snapshotPermissions': 3}
2025-06-04 11:28:44,126 - ibapi.wrapper - INFO - ANSWER marketDataType {'reqId': 1001, 'marketDataType': 1}
2025-06-04 11:28:44,126 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1001, 'tickType': 1, 'price': 31.27, 'attrib': 2862240040896: CanAutoExecute: 1, PastLimit: 0, PreOpen: 0}
2025-06-04 11:28:44,126 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1001, 'tickType': 0, 'size': 772}
2025-06-04 11:28:44,127 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1001, 'tickType': 2, 'price': 31.28, 'attrib': 2862239733328: CanAutoExecute: 1, PastLimit: 0, PreOpen: 0}
2025-06-04 11:28:44,127 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1001, 'tickType': 3, 'size': 919}
2025-06-04 11:28:44,128 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1001, 'tickType': 4, 'price': 31.27, 'attrib': 2862239733328: CanAutoExecute: 0, PastLimit: 0, PreOpen: 0}
2025-06-04 11:28:44,128 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1001, 'tickType': 5, 'size': 1}
2025-06-04 11:28:44,129 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1001, 'tickType': 0, 'size': 772}
2025-06-04 11:28:44,130 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1001, 'tickType': 3, 'size': 919}
2025-06-04 11:28:44,130 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1001, 'tickType': 5, 'size': 1}
2025-06-04 11:28:44,130 - ibapi.wrapper - INFO - ANSWER tickSize {'reqId': 1001, 'tickType': 8, 'size': 105047}
2025-06-04 11:28:44,130 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1001, 'tickType': 6, 'price': 31.43, 'attrib': 2862239911520: CanAutoExecute: 0, PastLimit: 0, PreOpen: 0}
2025-06-04 11:28:44,131 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1001, 'tickType': 7, 'price': 31.23, 'attrib': 2862239911520: CanAutoExecute: 0, PastLimit: 0, PreOpen: 0}
2025-06-04 11:28:44,131 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1001, 'tickType': 9, 'price': 31.44, 'attrib': 2862239998800: CanAutoExecute: 0, PastLimit: 0, PreOpen: 0}
2025-06-04 11:28:44,131 - ibapi.wrapper - INFO - ANSWER tickPrice {'reqId': 1001, 'tickType': 14, 'price': 31.32, 'attrib': 2862239998800: CanAutoExecute: 0, PastLimit: 0, PreOpen: 0}
2025-06-04 11:28:44,131 - ibapi.wrapper - INFO - ANSWER tickString {'reqId': 1001, 'tickType': 32, 'value': 'ANJKPTVZUH'}
2025-06-04 11:28:44,131 - ibapi.wrapper - INFO - ANSWER tickString {'reqId': 1001, 'tickType': 33, 'value': 'ANJKPTVYZUH'}
2025-06-04 11:28:44,132 - ibapi.wrapper - INFO - ANSWER tickString {'reqId': 1001, 'tickType': 84, 'value': 'Z'}
2025-06-04 11:28:44,132 - ibapi.wrapper - INFO - ANSWER tickString {'reqId': 1001, 'tickType': 45, 'value': '1749050922'}
2025-06-04 11:28:44,132 - ibapi.wrapper - INFO - ANSWER tickGeneric {'reqId': 1001, 'tickType': 49, 'value': 0.0}
2025-06-04 11:28:44,439 - ibapi.client - INFO - REQUEST cancelMktData {'reqId': 1001}
2025-06-04 11:28:44,440 - ibapi.client - INFO - SENDING cancelMktData b'\x00\x00\x00\t2\x002\x001001\x00'
2025-06-04 11:28:44,446 - src.rule.linked_order_actions - INFO - Using ATR-based stop distance for SLV: 0.0814
2025-06-04 11:28:44,446 - src.rule.linked_order_actions - INFO - Double down calc for SLV (BUY): current=$31.27, stop_distance=$0.08, dd_distance=$0.04, dd_price=$31.23, original_qty=50, dd_qty=50
2025-06-04 11:28:44,447 - src.order.base - INFO - Order 80ef3925-a6ef-4555-9d82-ceeab5c64745 status changed: created -> pending_submit (Submitting to broker)
2025-06-04 11:28:44,447 - src.order.manager - INFO - Submitting order 80ef3925-a6ef-4555-9d82-ceeab5c64745 to TWS
2025-06-04 11:28:44,447 - src.order.manager - INFO - Got broker order ID 56 for order 80ef3925-a6ef-4555-9d82-ceeab5c64745
2025-06-04 11:28:44,448 - src.order.manager - INFO - Calling placeOrder with ID 56, contract 0,SLV,STK,,0.0,,,SMART,,USD,,,False,,combo:, order 0,0,0: LMT BUY 50@31.230000 DAY
2025-06-04 11:28:44,448 - ibapi.client - INFO - REQUEST placeOrder {'orderId': 56, 'contract': 2862239910080: 0,SLV,STK,,0.0,,,SMART,,USD,,,False,,combo:, 'order': 2862239525584: 0,0,0: LMT BUY 50@31.230000 DAY}
2025-06-04 11:28:44,448 - ibapi.client - INFO - SENDING placeOrder b'\x00\x00\x01>3\x0056\x000\x00SLV\x00STK\x00\x000.0\x00\x00\x00SMART\x00\x00USD\x00\x00\x00\x00\x00BUY\x0050\x00LMT\x0031.23\x000\x00DAY\x00\x00\x00\x000\x00\x001\x000\x000\x000\x000\x000\x000\x000\x00\x000\x00\x00\x00\x00\x00\x00\x00\x000\x00\x00-1\x000\x00\x00\x000\x00\x00\x000\x000\x00\x000\x00\x00\x00\x00\x00\x000\x00\x00\x00\x00\x000\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x000\x00\x00\x000\x000\x00\x00\x000\x00\x000\x000\x000\x000\x00\x001.7976931348623157e+308\x001.7976931348623157e+308\x001.7976931348623157e+308\x001.7976931348623157e+308\x001.7976931348623157e+308\x000\x00\x00\x00\x001.7976931348623157e+308\x00\x00\x00\x00\x000\x000\x000\x00\x00'
2025-06-04 11:28:44,449 - src.order.manager - INFO - placeOrder called successfully for order 80ef3925-a6ef-4555-9d82-ceeab5c64745
2025-06-04 11:28:44,449 - src.order.base - INFO - Order 80ef3925-a6ef-4555-9d82-ceeab5c64745 status changed: pending_submit -> submitted (Submitted to broker)
2025-06-04 11:28:44,449 - src.rule.linked_order_actions - INFO - Created BUY double down order 'doubledown1' for SLV: 50 shares @ $31.23
2025-06-04 11:28:44,450 - src.rule.linked_order_actions - INFO - Auto-created double down order for SLV
2025-06-04 11:28:44,450 - src.rule.linked_order_actions - INFO - Created and linked BUY main order dfcb15f5-1e1a-48a5-bc3a-09f7e6328640 for SLV
2025-06-04 11:28:44,585 - src.tws_connection - INFO - Open Order - ID: 56, Symbol: SLV, Action: BUY, Quantity: 50.0
2025-06-04 11:28:46,446 - __main__ - INFO -   - limit: 50 @ $31.23
2025-06-04 11:28:46,446 - __main__ - INFO -   - limit: -50 @ $33.15
2025-06-04 11:28:46,446 - __main__ - INFO -   - stop: -50 @ $30.33
2025-06-04 11:28:46,446 - __main__ - INFO - 
================================================================================
2025-06-04 11:28:46,446 - __main__ - INFO - STEP 2: CLOSE POSITION USING CONTEXT
2025-06-04 11:28:46,447 - __main__ - INFO - ================================================================================
2025-06-04 11:28:46,447 - __main__ - INFO - 
Using LinkedCloseAllAction to cancel all orders...
2025-06-04 11:28:46,447 - src.trade_tracker - INFO - Closed trade for SLV
2025-06-04 11:28:46,447 - src.rule.linked_order_actions - INFO - Closed all linked orders and position for SLV
2025-06-04 11:28:48,472 - __main__ - INFO - 
================================================================================
2025-06-04 11:28:48,472 - __main__ - INFO - SUMMARY
2025-06-04 11:28:48,473 - __main__ - INFO - ================================================================================
2025-06-04 11:28:48,473 - __main__ - INFO - 
The context successfully:
2025-06-04 11:28:48,473 - __main__ - INFO - 1. Tracked all order IDs when created
2025-06-04 11:28:48,474 - __main__ - INFO - 2. Enabled cancellation of all related orders
2025-06-04 11:28:48,474 - __main__ - INFO - 3. Cleared itself after position closed
2025-06-04 11:28:48,474 - __main__ - INFO - 4. Updated TradeTracker to prevent duplicates
2025-06-04 11:28:48,474 - src.rule.engine - INFO - Rule engine stopped
2025-06-04 11:28:48,475 - src.trade_tracker - INFO - Cleared all trades from tracker
2025-06-04 11:28:48,475 - __main__ - INFO - 
Disconnecting from TWS...
2025-06-04 11:28:48,475 - src.tws_connection - INFO - Disconnecting from TWS
2025-06-04 11:28:48,475 - ibapi.client - INFO - disconnecting
2025-06-04 11:28:48,536 - src.tws_connection - WARNING - Not connected to TWS
2025-06-04 11:28:48,536 - src.tws_connection - INFO - Connection thread: Message loop ended
